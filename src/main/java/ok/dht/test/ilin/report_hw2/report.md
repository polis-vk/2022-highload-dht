Тестирование при размере `LinkedBlockingQueue` равным 256 и количеству воркеров равным половине от количества ядер
процессора (4).

# PUT

`wrk2 -R 25000 -c 64 -t 4 -d 180 -s src/main/java/ok/dht/test/ilin/scripts/put.lua -L http://localhost:19234`

```
Running 3m test @ http://localhost:19234
  4 threads and 64 connections
  Thread calibration: mean lat.: 2.383ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 2.373ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 2.377ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 2.374ms, rate sampling interval: 10ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     2.63ms    7.21ms 153.47ms   97.42%
    Req/Sec     6.59k     1.29k   19.44k    84.03%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.40ms
 75.000%    2.20ms
 90.000%    3.64ms
 99.000%   40.77ms
 99.900%   95.23ms
 99.990%  140.41ms
 99.999%  145.92ms
100.000%  153.60ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.038     0.000000            1         1.00
       0.583     0.100000       424953         1.11
       0.811     0.200000       849630         1.25
       1.009     0.300000      1275191         1.43
       1.202     0.400000      1699252         1.67
       1.400     0.500000      2124866         2.00
       1.507     0.550000      2337394         2.22
       1.629     0.600000      2549555         2.50
       1.774     0.650000      2761874         2.86
       1.954     0.700000      2974102         3.33
       2.197     0.750000      3187363         4.00
       2.347     0.775000      3292994         4.44
       2.525     0.800000      3399423         5.00
       2.733     0.825000      3505149         5.71
       2.983     0.850000      3611191         6.67
       3.281     0.875000      3717393         8.00
       3.451     0.887500      3770467         8.89
       3.641     0.900000      3823591        10.00
       3.861     0.912500      3876670        11.43
       4.119     0.925000      3929599        13.33
       4.439     0.937500      3982746        16.00
       4.639     0.943750      4009373        17.78
       4.879     0.950000      4035890        20.00
       5.191     0.956250      4062188        22.86
       5.659     0.962500      4088793        26.67
       6.615     0.968750      4115256        32.00
       7.931     0.971875      4128524        35.56
      10.631     0.975000      4141811        40.00
      14.183     0.978125      4155065        45.71
      17.839     0.981250      4168366        53.33
      23.983     0.984375      4181623        64.00
      28.799     0.985938      4188251        71.11
      33.471     0.987500      4194923        80.00
      37.855     0.989062      4201524        91.43
      42.687     0.990625      4208203       106.67
      46.879     0.992188      4214828       128.00
      48.863     0.992969      4218130       142.22
      51.071     0.993750      4221476       160.00
      54.463     0.994531      4224779       182.86
      58.783     0.995313      4228092       213.33
      63.327     0.996094      4231401       256.00
      65.727     0.996484      4233090       284.44
      68.095     0.996875      4234717       320.00
      70.591     0.997266      4236395       365.71
      73.919     0.997656      4238036       426.67
      78.271     0.998047      4239698       512.00
      81.599     0.998242      4240534       568.89
      85.247     0.998437      4241351       640.00
      88.959     0.998633      4242185       731.43
      92.159     0.998828      4243017       853.33
      95.679     0.999023      4243841      1024.00
      97.663     0.999121      4244262      1137.78
     100.287     0.999219      4244674      1280.00
     104.511     0.999316      4245083      1462.86
     108.415     0.999414      4245496      1706.67
     112.703     0.999512      4245914      2048.00
     115.647     0.999561      4246121      2275.56
     118.783     0.999609      4246332      2560.00
     122.047     0.999658      4246535      2925.71
     126.207     0.999707      4246741      3413.33
     130.559     0.999756      4246948      4096.00
     132.223     0.999780      4247056      4551.11
     133.503     0.999805      4247156      5120.00
     135.167     0.999829      4247265      5851.43
     136.831     0.999854      4247363      6826.67
     138.879     0.999878      4247468      8192.00
     139.775     0.999890      4247519      9102.22
     140.671     0.999902      4247577     10240.00
     141.311     0.999915      4247628     11702.86
     141.951     0.999927      4247682     13653.33
     142.591     0.999939      4247735     16384.00
     142.847     0.999945      4247757     18204.44
     143.359     0.999951      4247791     20480.00
     143.615     0.999957      4247812     23405.71
     143.871     0.999963      4247832     27306.67
     144.255     0.999969      4247858     32768.00
     144.511     0.999973      4247876     36408.89
     144.639     0.999976      4247886     40960.00
     144.767     0.999979      4247895     46811.43
     145.023     0.999982      4247911     54613.33
     145.279     0.999985      4247923     65536.00
     145.407     0.999986      4247927     72817.78
     145.663     0.999988      4247936     81920.00
     145.791     0.999989      4247940     93622.86
     146.047     0.999991      4247947    109226.67
     146.559     0.999992      4247953    131072.00
     146.815     0.999993      4247956    145635.56
     147.327     0.999994      4247960    163840.00
     148.223     0.999995      4247963    187245.71
     148.607     0.999995      4247967    218453.33
     149.119     0.999996      4247969    262144.00
     149.503     0.999997      4247972    291271.11
     149.631     0.999997      4247973    327680.00
     149.759     0.999997      4247974    374491.43
     150.911     0.999998      4247977    436906.67
     150.911     0.999998      4247977    524288.00
     151.295     0.999998      4247978    582542.22
     151.423     0.999998      4247979    655360.00
     151.679     0.999999      4247980    748982.86
     152.063     0.999999      4247981    873813.33
     152.063     0.999999      4247981   1048576.00
     152.191     0.999999      4247983   1165084.44
     152.191     0.999999      4247983   1310720.00
     152.191     0.999999      4247983   1497965.71
     152.191     0.999999      4247983   1747626.67
     152.191     1.000000      4247983   2097152.00
     152.319     1.000000      4247984   2330168.89
     152.319     1.000000      4247984   2621440.00
     152.319     1.000000      4247984   2995931.43
     152.319     1.000000      4247984   3495253.33
     152.319     1.000000      4247984   4194304.00
     153.599     1.000000      4247985   4660337.78
     153.599     1.000000      4247985          inf
#[Mean    =        2.632, StdDeviation   =        7.206]
#[Max     =      153.472, Total count    =      4247985]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  4499040 requests in 3.00m, 287.47MB read
Requests/sec:  24994.74
Transfer/sec:      1.60MB
```

[Результаты профилирования `cpu`](put_cpu_hw2.html)
[Результаты профилирования `alloc`](put_alloc_hw2.html)
[Результаты_профилирования `lock`](put_lock_hw2.html)

По сравнению с синхронным сервером Latency значительно увеличилось с 0.87ms до 2.63 ms, при одинаковом rate, это связано
с тем что запросы лежат в очереди и не могут обрабатываться, при этом в синхронном сервисе происходило нагрузочное
тестирование в одну коннекцию и один поток а сейчас в 64 коннекции и 4 потока. Но при этом ассинхронный сервер
выдерживает rate 30000 без потерь, и стабильным latency, а синхронный уже терял запросы.

Если сравнивать профилирование, то в асинхронном сервере уменишилось время на select селектором, с 27.8% до 7.17%, это
значит мы больше времени делаем полезную работу. Например время на put в RocksDB увеличилось с 20.54% до 28.3%.

При этом аллокации на handleRequest увеличились с 40.43% до 53.73%, из них отправка ответа увеличилась с 17.35% до
26.76% а работа с rocksDB с 18.47% до 20.56%  (но при этом стоит помнить что мы не видим аллокаций в самой rocksDB)
И так как логика работы с rocksDB была передана отдельным воркерам, то аллокации у селектора снизились до 31.98% с
88.50%.

Большая часть времени локов тратиться на park у LinkedBlockingQueue когда executor хочет взять задачу 79.63%, а
оставшиеся 17.66% тратяться на то чтобы положить задачу в очередь, улучшить это можно если бы мы взяли lock free очередь
например.

При размере очереди 32:
`wrk2 -R 25000 -c 64 -t 4 -d 180 -s src/main/java/ok/dht/test/ilin/scripts/put.lua -L http://localhost:19234`

```
Running 3m test @ http://localhost:19234
  4 threads and 64 connections
  Thread calibration: mean lat.: 1.437ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.499ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.464ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.375ms, rate sampling interval: 10ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.56ms    2.35ms  69.57ms   96.95%
    Req/Sec     6.59k   849.24    24.89k    87.21%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.23ms
 75.000%    1.67ms
 90.000%    2.20ms
 99.000%    9.96ms
 99.900%   37.28ms
 99.990%   57.79ms
 99.999%   65.28ms
100.000%   69.63ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.033     0.000000            1         1.00
       0.579     0.100000       425362         1.11
       0.779     0.200000       851161         1.25
       0.938     0.300000      1274779         1.43
       1.085     0.400000      1699385         1.67
       1.232     0.500000      2125242         2.00
       1.308     0.550000      2338965         2.22
       1.386     0.600000      2550011         2.50
       1.470     0.650000      2763591         2.86
       1.561     0.700000      2973697         3.33
       1.666     0.750000      3186981         4.00
       1.725     0.775000      3293354         4.44
       1.790     0.800000      3399223         5.00
       1.863     0.825000      3504589         5.71
       1.950     0.850000      3611708         6.67
       2.057     0.875000      3718263         8.00
       2.121     0.887500      3770910         8.89
       2.197     0.900000      3824173        10.00
       2.289     0.912500      3876812        11.43
       2.407     0.925000      3929467        13.33
       2.571     0.937500      3982508        16.00
       2.685     0.943750      4009271        17.78
       2.833     0.950000      4035571        20.00
       3.047     0.956250      4062189        22.86
       3.367     0.962500      4088665        26.67
       3.847     0.968750      4115245        32.00
       4.175     0.971875      4128543        35.56
       4.599     0.975000      4141836        40.00
       5.163     0.978125      4155069        45.71
       5.955     0.981250      4168318        53.33
       7.035     0.984375      4181620        64.00
       7.711     0.985938      4188252        71.11
       8.487     0.987500      4194910        80.00
       9.343     0.989062      4201498        91.43
      10.407     0.990625      4208186       106.67
      11.655     0.992188      4214795       128.00
      12.439     0.992969      4218114       142.22
      13.391     0.993750      4221428       160.00
      14.519     0.994531      4224729       182.86
      15.855     0.995313      4228056       213.33
      17.551     0.996094      4231371       256.00
      18.687     0.996484      4233025       284.44
      20.207     0.996875      4234686       320.00
      22.159     0.997266      4236351       365.71
      24.527     0.997656      4238004       426.67
      27.583     0.998047      4239664       512.00
      29.295     0.998242      4240499       568.89
      31.023     0.998437      4241326       640.00
      33.087     0.998633      4242153       731.43
      35.199     0.998828      4242981       853.33
      37.663     0.999023      4243812      1024.00
      38.943     0.999121      4244232      1137.78
      40.479     0.999219      4244643      1280.00
      42.175     0.999316      4245058      1462.86
      44.063     0.999414      4245474      1706.67
      46.079     0.999512      4245887      2048.00
      47.103     0.999561      4246096      2275.56
      48.159     0.999609      4246301      2560.00
      49.471     0.999658      4246508      2925.71
      51.231     0.999707      4246715      3413.33
      52.895     0.999756      4246925      4096.00
      53.727     0.999780      4247031      4551.11
      54.559     0.999805      4247131      5120.00
      55.263     0.999829      4247237      5851.43
      55.999     0.999854      4247337      6826.67
      56.895     0.999878      4247444      8192.00
      57.343     0.999890      4247493      9102.22
      57.887     0.999902      4247547     10240.00
      58.719     0.999915      4247600     11702.86
      59.711     0.999927      4247650     13653.33
      60.607     0.999939      4247701     16384.00
      61.087     0.999945      4247726     18204.44
      61.439     0.999951      4247753     20480.00
      62.015     0.999957      4247778     23405.71
      62.431     0.999963      4247804     27306.67
      62.879     0.999969      4247831     32768.00
      63.039     0.999973      4247843     36408.89
      63.263     0.999976      4247856     40960.00
      63.711     0.999979      4247870     46811.43
      64.127     0.999982      4247883     54613.33
      64.511     0.999985      4247896     65536.00
      64.671     0.999986      4247902     72817.78
      64.863     0.999988      4247908     81920.00
      65.151     0.999989      4247914     93622.86
      65.599     0.999991      4247922    109226.67
      65.983     0.999992      4247928    131072.00
      66.175     0.999993      4247931    145635.56
      66.303     0.999994      4247934    163840.00
      66.559     0.999995      4247938    187245.71
      66.687     0.999995      4247940    218453.33
      66.815     0.999996      4247943    262144.00
      66.943     0.999997      4247946    291271.11
      67.199     0.999997      4247947    327680.00
      67.391     0.999997      4247948    374491.43
      67.519     0.999998      4247950    436906.67
      67.775     0.999998      4247951    524288.00
      67.903     0.999998      4247952    582542.22
      68.031     0.999998      4247954    655360.00
      68.031     0.999999      4247954    748982.86
      68.543     0.999999      4247955    873813.33
      68.543     0.999999      4247955   1048576.00
      68.607     0.999999      4247956   1165084.44
      68.607     0.999999      4247956   1310720.00
      69.119     0.999999      4247958   1497965.71
      69.119     0.999999      4247958   1747626.67
      69.119     1.000000      4247958   2097152.00
      69.119     1.000000      4247958   2330168.89
      69.119     1.000000      4247958   2621440.00
      69.119     1.000000      4247958   2995931.43
      69.119     1.000000      4247958   3495253.33
      69.119     1.000000      4247958   4194304.00
      69.631     1.000000      4247959   4660337.78
      69.631     1.000000      4247959          inf
#[Mean    =        1.562, StdDeviation   =        2.355]
#[Max     =       69.568, Total count    =      4247959]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  4493015 requests in 3.00m, 287.65MB read
  Non-2xx or 3xx responses: 49270
Requests/sec:  24961.20
Transfer/sec:      1.60MB

```

[Результаты профилирования `cpu`](put_cpu_hw2_small_queue.html)
[Результаты профилирования `alloc`](put_alloc_hw2_small_queue.html)
[Результаты_профилирования `lock`](put_lock_hw2_small_queue.html)

При уменьшении размера очереди например до 32, latency уменьшилось, но при этом сервер начал отвечать не 2xx и 3xx
запросами, что означает отвержение из очереди, и часть запросов просто не исполнялось, что видно по логам сервиса. Это
конечно же плохо, потому что с очередью в 256 сервис отвечает дольше но не захлебывается, хотя скорее всего ответ идет
дольше, потому что дольше запросы лежат в очереди.

Так же по результатам профилирования можно увидеть что время cpu на put в rocksdb увеличелось с 28.30% до 39.10%, при
этом время на send response уменьшилось с 26.65% до 15.42% В частности это связано с тем что количество запросов
доходящих до воркеров уменьшилось.

очередь 1024
`wrk2 -R 25000 -c 64 -t 4 -d 180 -s src/main/java/ok/dht/test/ilin/scripts/put.lua -L http://localhost:19234`

```
Running 3m test @ http://localhost:19234
  4 threads and 64 connections
  Thread calibration: mean lat.: 1.503ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.495ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.494ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.503ms, rate sampling interval: 10ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.83ms    2.28ms  56.16ms   94.23%
    Req/Sec     6.59k     1.04k   20.11k    80.68%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.36ms
 75.000%    2.10ms
 90.000%    3.39ms
 99.000%    7.64ms
 99.900%   34.53ms
 99.990%   50.05ms
 99.999%   52.67ms
100.000%   56.19ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.043     0.000000            1         1.00
       0.570     0.100000       426285         1.11
       0.793     0.200000       850807         1.25
       0.986     0.300000      1275477         1.43
       1.174     0.400000      1700004         1.67
       1.364     0.500000      2124211         2.00
       1.466     0.550000      2338006         2.22
       1.579     0.600000      2549161         2.50
       1.714     0.650000      2762002         2.86
       1.878     0.700000      2974114         3.33
       2.097     0.750000      3186439         4.00
       2.235     0.775000      3292288         4.44
       2.399     0.800000      3399123         5.00
       2.591     0.825000      3505503         5.71
       2.815     0.850000      3611048         6.67
       3.081     0.875000      3717484         8.00
       3.231     0.887500      3770702         8.89
       3.393     0.900000      3823325        10.00
       3.573     0.912500      3876491        11.43
       3.777     0.925000      3929552        13.33
       4.013     0.937500      3982531        16.00
       4.151     0.943750      4009547        17.78
       4.299     0.950000      4035721        20.00
       4.467     0.956250      4062299        22.86
       4.667     0.962500      4088917        26.67
       4.907     0.968750      4115320        32.00
       5.051     0.971875      4128727        35.56
       5.219     0.975000      4142088        40.00
       5.415     0.978125      4155261        45.71
       5.663     0.981250      4168397        53.33
       6.011     0.984375      4181739        64.00
       6.251     0.985938      4188283        71.11
       6.583     0.987500      4194969        80.00
       7.107     0.989062      4201547        91.43
       8.167     0.990625      4208190       106.67
      10.471     0.992188      4214840       128.00
      11.855     0.992969      4218147       142.22
      13.391     0.993750      4221469       160.00
      15.167     0.994531      4224791       182.86
      16.959     0.995313      4228109       213.33
      18.655     0.996094      4231448       256.00
      19.583     0.996484      4233084       284.44
      20.783     0.996875      4234751       320.00
      22.079     0.997266      4236405       365.71
      23.599     0.997656      4238067       426.67
      25.375     0.998047      4239721       512.00
      26.495     0.998242      4240544       568.89
      28.319     0.998437      4241371       640.00
      30.527     0.998633      4242204       731.43
      32.799     0.998828      4243035       853.33
      34.783     0.999023      4243875      1024.00
      35.647     0.999121      4244277      1137.78
      36.543     0.999219      4244693      1280.00
      37.823     0.999316      4245116      1462.86
      39.423     0.999414      4245521      1706.67
      41.631     0.999512      4245938      2048.00
      42.623     0.999561      4246147      2275.56
      43.423     0.999609      4246354      2560.00
      44.351     0.999658      4246561      2925.71
      45.631     0.999707      4246764      3413.33
      47.071     0.999756      4246971      4096.00
      47.711     0.999780      4247078      4551.11
      48.223     0.999805      4247189      5120.00
      48.735     0.999829      4247285      5851.43
      49.151     0.999854      4247390      6826.67
      49.567     0.999878      4247491      8192.00
      49.855     0.999890      4247545      9102.22
      50.111     0.999902      4247596     10240.00
      50.367     0.999915      4247653     11702.86
      50.591     0.999927      4247701     13653.33
      50.847     0.999939      4247753     16384.00
      50.943     0.999945      4247780     18204.44
      51.103     0.999951      4247802     20480.00
      51.231     0.999957      4247828     23405.71
      51.391     0.999963      4247854     27306.67
      51.551     0.999969      4247879     32768.00
      51.679     0.999973      4247893     36408.89
      51.807     0.999976      4247907     40960.00
      51.871     0.999979      4247918     46811.43
      51.999     0.999982      4247931     54613.33
      52.191     0.999985      4247947     65536.00
      52.287     0.999986      4247950     72817.78
      52.383     0.999988      4247957     81920.00
      52.543     0.999989      4247963     93622.86
      52.767     0.999991      4247970    109226.67
      53.087     0.999992      4247979    131072.00
      53.087     0.999993      4247979    145635.56
      53.247     0.999994      4247983    163840.00
      53.311     0.999995      4247986    187245.71
      53.343     0.999995      4247989    218453.33
      53.471     0.999996      4247992    262144.00
      53.503     0.999997      4247994    291271.11
      53.631     0.999997      4247996    327680.00
      53.663     0.999997      4247997    374491.43
      53.823     0.999998      4247999    436906.67
      54.207     0.999998      4248000    524288.00
      54.335     0.999998      4248001    582542.22
      54.399     0.999998      4248002    655360.00
      54.463     0.999999      4248003    748982.86
      54.623     0.999999      4248004    873813.33
      54.623     0.999999      4248004   1048576.00
      54.783     0.999999      4248006   1165084.44
      54.783     0.999999      4248006   1310720.00
      54.783     0.999999      4248006   1497965.71
      54.783     0.999999      4248006   1747626.67
      54.783     1.000000      4248006   2097152.00
      55.807     1.000000      4248007   2330168.89
      55.807     1.000000      4248007   2621440.00
      55.807     1.000000      4248007   2995931.43
      55.807     1.000000      4248007   3495253.33
      55.807     1.000000      4248007   4194304.00
      56.191     1.000000      4248008   4660337.78
      56.191     1.000000      4248008          inf
#[Mean    =        1.831, StdDeviation   =        2.283]
#[Max     =       56.160, Total count    =      4248008]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  4499064 requests in 3.00m, 287.47MB read
Requests/sec:  24994.84
Transfer/sec:      1.60MB
```

latency уменьшился, но при этом на результатах профилирования видно, что время cpu в процентах отдельно взятых вещей
отличается не сильно, в пределах 5% что не является статистически значимым, но при этом время которое мы находимся на
локе, когда хотим взять задачу из очереди уменьшилось с 79.63% до 72.60% значит мы меньше ждем задач, и больше делаем
полезную работу.

# GET

`wrk2 -R 25000 -c 64 -t 4 -d 300 -s src/main/java/ok/dht/test/ilin/scripts/get.lua -L http://localhost:19234`

```
Running 5m test @ http://localhost:19234
  4 threads and 64 connections
  Thread calibration: mean lat.: 1.530ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.524ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.529ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.523ms, rate sampling interval: 10ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.70ms    1.78ms  79.55ms   93.05%
    Req/Sec     6.58k   825.83    22.55k    79.80%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.38ms
 75.000%    2.02ms
 90.000%    3.04ms
 99.000%    6.29ms
 99.900%   22.53ms
 99.990%   58.72ms
 99.999%   73.02ms
100.000%   79.61ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.039     0.000000            1         1.00
       0.605     0.100000       726371         1.11
       0.823     0.200000      1452352         1.25
       1.010     0.300000      2178375         1.43
       1.190     0.400000      2899967         1.67
       1.375     0.500000      3624626         2.00
       1.475     0.550000      3989717         2.22
       1.584     0.600000      4351731         2.50
       1.705     0.650000      4713013         2.86
       1.846     0.700000      5075915         3.33
       2.022     0.750000      5437740         4.00
       2.127     0.775000      5617690         4.44
       2.251     0.800000      5801059         5.00
       2.393     0.825000      5981188         5.71
       2.563     0.850000      6162491         6.67
       2.773     0.875000      6343405         8.00
       2.899     0.887500      6433791         8.89
       3.041     0.900000      6523557        10.00
       3.205     0.912500      6614792        11.43
       3.393     0.925000      6705153        13.33
       3.611     0.937500      6795068        16.00
       3.741     0.943750      6840955        17.78
       3.885     0.950000      6886201        20.00
       4.047     0.956250      6931377        22.86
       4.235     0.962500      6976296        26.67
       4.463     0.968750      7021817        32.00
       4.599     0.971875      7044734        35.56
       4.751     0.975000      7067079        40.00
       4.931     0.978125      7089528        45.71
       5.155     0.981250      7112347        53.33
       5.435     0.984375      7134767        64.00
       5.611     0.985938      7146108        71.11
       5.827     0.987500      7157454        80.00
       6.095     0.989062      7168818        91.43
       6.443     0.990625      7180138       106.67
       6.919     0.992188      7191409       128.00
       7.235     0.992969      7197069       142.22
       7.611     0.993750      7202753       160.00
       8.059     0.994531      7208386       182.86
       8.607     0.995313      7214086       213.33
       9.295     0.996094      7219753       256.00
       9.687     0.996484      7222555       284.44
      10.151     0.996875      7225368       320.00
      10.719     0.997266      7228199       365.71
      11.455     0.997656      7231048       426.67
      12.455     0.998047      7233875       512.00
      13.199     0.998242      7235281       568.89
      14.271     0.998437      7236694       640.00
      15.927     0.998633      7238110       731.43
      18.607     0.998828      7239526       853.33
      23.103     0.999023      7240939      1024.00
      25.551     0.999121      7241650      1137.78
      28.479     0.999219      7242355      1280.00
      31.487     0.999316      7243065      1462.86
      34.527     0.999414      7243777      1706.67
      37.759     0.999512      7244482      2048.00
      39.519     0.999561      7244835      2275.56
      41.471     0.999609      7245189      2560.00
      43.551     0.999658      7245546      2925.71
      45.919     0.999707      7245897      3413.33
      48.319     0.999756      7246251      4096.00
      49.631     0.999780      7246425      4551.11
      51.231     0.999805      7246604      5120.00
      52.863     0.999829      7246780      5851.43
      55.007     0.999854      7246958      6826.67
      56.799     0.999878      7247134      8192.00
      57.791     0.999890      7247222      9102.22
      58.943     0.999902      7247312     10240.00
      60.255     0.999915      7247400     11702.86
      61.535     0.999927      7247489     13653.33
      63.199     0.999939      7247576     16384.00
      63.967     0.999945      7247619     18204.44
      64.895     0.999951      7247664     20480.00
      65.791     0.999957      7247709     23405.71
      66.815     0.999963      7247752     27306.67
      68.223     0.999969      7247797     32768.00
      68.799     0.999973      7247821     36408.89
      69.375     0.999976      7247844     40960.00
      69.887     0.999979      7247864     46811.43
      70.591     0.999982      7247886     54613.33
      71.423     0.999985      7247908     65536.00
      71.743     0.999986      7247920     72817.78
      72.447     0.999988      7247931     81920.00
      72.895     0.999989      7247941     93622.86
      73.407     0.999991      7247951    109226.67
      74.175     0.999992      7247962    131072.00
      74.687     0.999993      7247969    145635.56
      75.071     0.999994      7247973    163840.00
      75.903     0.999995      7247980    187245.71
      76.351     0.999995      7247984    218453.33
      76.799     0.999996      7247990    262144.00
      77.311     0.999997      7247993    291271.11
      77.631     0.999997      7247995    327680.00
      78.079     0.999997      7247999    374491.43
      78.207     0.999998      7248002    436906.67
      78.335     0.999998      7248004    524288.00
      78.399     0.999998      7248006    582542.22
      78.399     0.999998      7248006    655360.00
      78.527     0.999999      7248008    748982.86
      78.655     0.999999      7248009    873813.33
      78.975     0.999999      7248011   1048576.00
      78.975     0.999999      7248011   1165084.44
      79.167     0.999999      7248012   1310720.00
      79.295     0.999999      7248013   1497965.71
      79.295     0.999999      7248013   1747626.67
      79.359     1.000000      7248014   2097152.00
      79.359     1.000000      7248014   2330168.89
      79.487     1.000000      7248015   2621440.00
      79.487     1.000000      7248015   2995931.43
      79.487     1.000000      7248015   3495253.33
      79.615     1.000000      7248017   4194304.00
      79.615     1.000000      7248017          inf
#[Mean    =        1.704, StdDeviation   =        1.779]
#[Max     =       79.552, Total count    =      7248017]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  7499084 requests in 5.00m, 471.22MB read
Requests/sec:  24996.88
Transfer/sec:      1.57MB
```

[Результаты профилирования `cpu`](get_cpu_hw2.htm)
[Результаты профилирования `alloc`](get_alloc_hw2.htm)
[Результаты профилирования `lock`](get_lock_hw2.htm)

По сравнению с синхронным сервером latancy почти такой же, но при этом задачи ждут в очереди, и при trace 25000 сервис
не захлебывается как было при синхронном сервисе, где при этом trace'е сервис начинал терять запросы. При этом 99
перцентиль сильно уменьшился, значит сервис более стабильный и стабильнее для бОльшего количества запросов.

Сильно увеличился cpu sendResponse с 14.24% до 30.9%, сильно уменьшился get RocksDB с 47.72% до 11.17%, и сильно
увеличился read selectorThread'a с 5.57% до 26.8%, значит в целом получилось сильно оптимизировать время самой обработки
запросов.

при этом так же как и с GET'ом мы блокируемся большую часть на получении запросов из очереди, возможно поможет
увеличение размера очереди.

Так же помимо изменения очереди можно попробовать измениния количества селекторов, и изменения количества воркеров. Еще
можно пробовать разные стратегии очереди, например взять LIFO очередь. 