Запросы в 4 потока и 64 соединения в синхронном режиме
-

> wrk -t 4 -c 64 -R 20000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

4 threads and 64 connections

Thread calibration: mean lat.: 0.959ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.950ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.953ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.954ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency     0.97ms   500.26us   16.53ms      72.24%
    Req/Sec      5.28k     314.04    10.44k      75.54%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    0.94ms
    75.000%    1.28ms
    90.000%    1.55ms
    99.000%    2.03ms
    99.900%    5.44ms
    99.990%   10.67ms
    99.999%   14.82ms
    100.000%  16.54ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.012     0.000000            1         1.00
       0.394     0.100000       100170         1.11
       0.554     0.200000       200146         1.25
       0.684     0.300000       300030         1.43
       0.813     0.400000       399593         1.67
       0.945     0.500000       499474         2.00
       1.011     0.550000       549594         2.22
       1.076     0.600000       599111         2.50
       1.143     0.650000       649513         2.86
       1.210     0.700000       698882         3.33
       1.281     0.750000       749423         4.00
       1.318     0.775000       774445         4.44
       1.356     0.800000       799276         5.00
       1.395     0.825000       823702         5.71
       1.439     0.850000       849079         6.67
       1.488     0.875000       873906         8.00
       1.516     0.887500       886212         8.89
       1.548     0.900000       898762        10.00
       1.584     0.912500       911109        11.43
       1.625     0.925000       923729        13.33
       1.672     0.937500       936215        16.00
       1.698     0.943750       942393        17.78
       1.726     0.950000       948534        20.00
       1.757     0.956250       954911        22.86
       1.788     0.962500       961030        26.67
       1.823     0.968750       967221        32.00
       1.843     0.971875       970326        35.56
       1.864     0.975000       973516        40.00
       1.888     0.978125       976621        45.71
       1.915     0.981250       979725        53.33
       1.947     0.984375       982844        64.00
       1.966     0.985938       984412        71.11
       1.987     0.987500       985970        80.00
       2.011     0.989062       987485        91.43
       2.042     0.990625       989050       106.67
       2.081     0.992188       990677       128.00
       2.101     0.992969       991413       142.22
       2.127     0.993750       992176       160.00
       2.157     0.994531       992972       182.86
       2.193     0.995313       993726       213.33
       2.247     0.996094       994509       256.00
       2.283     0.996484       994893       284.44
       2.343     0.996875       995293       320.00
       2.435     0.997266       995669       365.71
       2.589     0.997656       996059       426.67
       3.203     0.998047       996449       512.00
       3.589     0.998242       996644       568.89
       4.017     0.998437       996839       640.00
       4.523     0.998633       997036       731.43
       5.007     0.998828       997229       853.33
       5.503     0.999023       997425      1024.00
       5.791     0.999121       997522      1137.78
       6.047     0.999219       997620      1280.00
       6.311     0.999316       997717      1462.86
       6.555     0.999414       997814      1706.67
       6.871     0.999512       997912      2048.00
       7.059     0.999561       997961      2275.56
       7.271     0.999609       998009      2560.00
       7.519     0.999658       998057      2925.71
       7.783     0.999707       998106      3413.33
       8.199     0.999756       998156      4096.00
       8.407     0.999780       998179      4551.11
       8.727     0.999805       998204      5120.00
       9.047     0.999829       998228      5851.43
       9.583     0.999854       998252      6826.67
      10.071     0.999878       998277      8192.00
      10.431     0.999890       998290      9102.22
      10.823     0.999902       998301     10240.00
      11.247     0.999915       998313     11702.86
      11.687     0.999927       998325     13653.33
      12.111     0.999939       998338     16384.00
      12.287     0.999945       998344     18204.44
      12.391     0.999951       998350     20480.00
      12.615     0.999957       998356     23405.71
      13.023     0.999963       998362     27306.67
      13.151     0.999969       998368     32768.00
      13.279     0.999973       998371     36408.89
      13.487     0.999976       998374     40960.00
      13.679     0.999979       998377     46811.43
      13.951     0.999982       998380     54613.33
      14.535     0.999985       998383     65536.00
      14.679     0.999986       998385     72817.78
      14.775     0.999988       998386     81920.00
      14.823     0.999989       998388     93622.86
      14.879     0.999991       998389    109226.67
      15.167     0.999992       998391    131072.00
      15.503     0.999993       998392    145635.56
      15.503     0.999994       998392    163840.00
      15.511     0.999995       998393    187245.71
      15.751     0.999995       998394    218453.33
      15.975     0.999996       998395    262144.00
      15.975     0.999997       998395    291271.11
      15.975     0.999997       998395    327680.00
      16.151     0.999997       998396    374491.43
      16.151     0.999998       998396    436906.67
      16.159     0.999998       998397    524288.00
      16.159     0.999998       998397    582542.22
      16.159     0.999998       998397    655360.00
      16.159     0.999999       998397    748982.86
      16.159     0.999999       998397    873813.33
      16.543     0.999999       998398   1048576.00
      16.543     1.000000       998398          inf
***
    #[Mean    =        0.973, StdDeviation   =        0.500]
    #[Max     =       16.528, Total count    =       998398]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1199269 requests in 1.00m, 76.63MB read

Requests/sec:  19987.44

Transfer/sec:      1.28MB

> wrk -t 4 -c 64 -R 30000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

4 threads and 64 connections

Thread calibration: mean lat.: 0.978ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.997ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.980ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.987ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency     1.00ms   467.73us    9.14ms      64.47%
    Req/Sec      7.85k     470.09    11.89k      74.40%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    0.97ms
    75.000%    1.34ms
    90.000%    1.61ms
    99.000%    1.95ms
    99.900%    3.94ms
    99.990%    6.17ms
    99.999%    7.38ms
    100.000%   9.14ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.027     0.000000            1         1.00
       0.424     0.100000       150489         1.11
       0.550     0.200000       299795         1.25
       0.685     0.300000       449982         1.43
       0.826     0.400000       599107         1.67
       0.972     0.500000       749751         2.00
       1.045     0.550000       824346         2.22
       1.120     0.600000       898757         2.50
       1.196     0.650000       973748         2.86
       1.270     0.700000      1048953         3.33
       1.344     0.750000      1123863         4.00
       1.382     0.775000      1161092         4.44
       1.421     0.800000      1198421         5.00
       1.463     0.825000      1236162         5.71
       1.507     0.850000      1273654         6.67
       1.555     0.875000      1310789         8.00
       1.580     0.887500      1329438         8.89
       1.606     0.900000      1348062        10.00
       1.634     0.912500      1366928        11.43
       1.663     0.925000      1385696        13.33
       1.694     0.937500      1404185        16.00
       1.711     0.943750      1413646        17.78
       1.728     0.950000      1422822        20.00
       1.747     0.956250      1432210        22.86
       1.768     0.962500      1441705        26.67
       1.792     0.968750      1450964        32.00
       1.805     0.971875      1455571        35.56
       1.820     0.975000      1460198        40.00
       1.837     0.978125      1464986        45.71
       1.856     0.981250      1469526        53.33
       1.880     0.984375      1474239        64.00
       1.895     0.985938      1476683        71.11
       1.911     0.987500      1478912        80.00
       1.931     0.989062      1481232        91.43
       1.956     0.990625      1483580       106.67
       1.990     0.992188      1485921       128.00
       2.012     0.992969      1487084       142.22
       2.039     0.993750      1488251       160.00
       2.075     0.994531      1489457       182.86
       2.119     0.995313      1490596       213.33
       2.183     0.996094      1491743       256.00
       2.227     0.996484      1492349       284.44
       2.271     0.996875      1492908       320.00
       2.333     0.997266      1493499       365.71
       2.417     0.997656      1494079       426.67
       2.577     0.998047      1494659       512.00
       2.715     0.998242      1494951       568.89
       2.981     0.998437      1495243       640.00
       3.317     0.998633      1495536       731.43
       3.639     0.998828      1495828       853.33
       3.977     0.999023      1496121      1024.00
       4.159     0.999121      1496273      1137.78
       4.371     0.999219      1496414      1280.00
       4.551     0.999316      1496560      1462.86
       4.747     0.999414      1496708      1706.67
       4.927     0.999512      1496851      2048.00
       5.035     0.999561      1496924      2275.56
       5.175     0.999609      1497000      2560.00
       5.295     0.999658      1497072      2925.71
       5.431     0.999707      1497147      3413.33
       5.539     0.999756      1497218      4096.00
       5.619     0.999780      1497256      4551.11
       5.731     0.999805      1497294      5120.00
       5.823     0.999829      1497329      5851.43
       5.911     0.999854      1497364      6826.67
       6.047     0.999878      1497402      8192.00
       6.103     0.999890      1497419      9102.22
       6.175     0.999902      1497436     10240.00
       6.251     0.999915      1497455     11702.86
       6.335     0.999927      1497473     13653.33
       6.395     0.999939      1497491     16384.00
       6.447     0.999945      1497500     18204.44
       6.519     0.999951      1497510     20480.00
       6.587     0.999957      1497519     23405.71
       6.687     0.999963      1497528     27306.67
       6.775     0.999969      1497537     32768.00
       6.835     0.999973      1497541     36408.89
       6.863     0.999976      1497546     40960.00
       6.963     0.999979      1497551     46811.43
       7.027     0.999982      1497555     54613.33
       7.123     0.999985      1497560     65536.00
       7.187     0.999986      1497562     72817.78
       7.299     0.999988      1497564     81920.00
       7.383     0.999989      1497567     93622.86
       7.419     0.999991      1497569    109226.67
       7.571     0.999992      1497571    131072.00
       7.739     0.999993      1497572    145635.56
       7.823     0.999994      1497573    163840.00
       8.399     0.999995      1497575    187245.71
       8.495     0.999995      1497576    218453.33
       8.535     0.999996      1497577    262144.00
       8.535     0.999997      1497577    291271.11
       8.615     0.999997      1497578    327680.00
       8.871     0.999997      1497579    374491.43
       8.871     0.999998      1497579    436906.67
       8.975     0.999998      1497580    524288.00
       8.975     0.999998      1497580    582542.22
       8.975     0.999998      1497580    655360.00
       8.991     0.999999      1497581    748982.86
       8.991     0.999999      1497581    873813.33
       8.991     0.999999      1497581   1048576.00
       8.991     0.999999      1497581   1165084.44
       8.991     0.999999      1497581   1310720.00
       9.143     0.999999      1497582   1497965.71
       9.143     1.000000      1497582          inf
***
    #[Mean    =        0.997, StdDeviation   =        0.468]
    #[Max     =        9.136, Total count    =      1497582]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1798884 requests in 1.00m, 114.94MB read

Requests/sec:  29981.37

Transfer/sec:      1.92MB

> wrk -t 4 -c 64 -R 15000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

4 threads and 64 connections

Thread calibration: mean lat.: 0.920ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.923ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.915ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.920ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency     0.92ms   434.34us    6.47ms      65.76%
    Req/Sec      3.97k     259.49     5.89k      68.99%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    0.91ms
    75.000%    1.22ms
    90.000%    1.47ms
    99.000%    1.97ms
    99.900%    2.32ms
    99.990%    3.33ms
    99.999%    5.20ms
    100.000%   6.47ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.014     0.000000            1         1.00
       0.341     0.100000        75282         1.11
       0.500     0.200000       149840         1.25
       0.646     0.300000       224913         1.43
       0.776     0.400000       299546         1.67
       0.907     0.500000       374516         2.00
       0.968     0.550000       412133         2.22
       1.029     0.600000       449663         2.50
       1.091     0.650000       487100         2.86
       1.155     0.700000       524422         3.33
       1.221     0.750000       562150         4.00
       1.254     0.775000       580767         4.44
       1.287     0.800000       599251         5.00
       1.322     0.825000       618176         5.71
       1.360     0.850000       636811         6.67
       1.407     0.875000       655464         8.00
       1.435     0.887500       664709         8.89
       1.469     0.900000       674156        10.00
       1.509     0.912500       683345        11.43
       1.557     0.925000       692778        13.33
       1.612     0.937500       702100        16.00
       1.642     0.943750       706711        17.78
       1.675     0.950000       711451        20.00
       1.708     0.956250       716112        22.86
       1.743     0.962500       720789        26.67
       1.780     0.968750       725489        32.00
       1.798     0.971875       727761        35.56
       1.818     0.975000       730125        40.00
       1.840     0.978125       732443        45.71
       1.864     0.981250       734756        53.33
       1.894     0.984375       737150        64.00
       1.911     0.985938       738276        71.11
       1.931     0.987500       739443        80.00
       1.953     0.989062       740619        91.43
       1.976     0.990625       741783       106.67
       2.003     0.992188       742952       128.00
       2.017     0.992969       743529       142.22
       2.033     0.993750       744143       160.00
       2.051     0.994531       744732       182.86
       2.069     0.995313       745292       213.33
       2.089     0.996094       745873       256.00
       2.101     0.996484       746206       284.44
       2.113     0.996875       746496       320.00
       2.125     0.997266       746757       365.71
       2.141     0.997656       747034       426.67
       2.163     0.998047       747331       512.00
       2.179     0.998242       747491       568.89
       2.197     0.998437       747626       640.00
       2.223     0.998633       747770       731.43
       2.257     0.998828       747917       853.33
       2.325     0.999023       748060      1024.00
       2.363     0.999121       748132      1137.78
       2.407     0.999219       748206      1280.00
       2.461     0.999316       748277      1462.86
       2.523     0.999414       748351      1706.67
       2.593     0.999512       748426      2048.00
       2.639     0.999561       748461      2275.56
       2.693     0.999609       748497      2560.00
       2.757     0.999658       748534      2925.71
       2.831     0.999707       748569      3413.33
       2.917     0.999756       748606      4096.00
       2.969     0.999780       748625      4551.11
       3.029     0.999805       748643      5120.00
       3.101     0.999829       748661      5851.43
       3.157     0.999854       748680      6826.67
       3.249     0.999878       748697      8192.00
       3.285     0.999890       748706      9102.22
       3.343     0.999902       748716     10240.00
       3.385     0.999915       748726     11702.86
       3.447     0.999927       748734     13653.33
       3.559     0.999939       748743     16384.00
       3.597     0.999945       748747     18204.44
       3.707     0.999951       748752     20480.00
       3.803     0.999957       748757     23405.71
       3.891     0.999963       748761     27306.67
       4.051     0.999969       748766     32768.00
       4.111     0.999973       748768     36408.89
       4.279     0.999976       748770     40960.00
       4.443     0.999979       748773     46811.43
       4.627     0.999982       748775     54613.33
       4.707     0.999985       748777     65536.00
       4.923     0.999986       748778     72817.78
       4.951     0.999988       748779     81920.00
       5.203     0.999989       748781     93622.86
       5.271     0.999991       748782    109226.67
       5.307     0.999992       748784    131072.00
       5.307     0.999993       748784    145635.56
       5.307     0.999994       748784    163840.00
       5.567     0.999995       748785    187245.71
       5.567     0.999995       748785    218453.33
       5.815     0.999996       748786    262144.00
       5.815     0.999997       748786    291271.11
       5.815     0.999997       748786    327680.00
       6.047     0.999997       748787    374491.43
       6.047     0.999998       748787    436906.67
       6.047     0.999998       748787    524288.00
       6.047     0.999998       748787    582542.22
       6.047     0.999998       748787    655360.00
       6.475     0.999999       748788    748982.86
       6.475     1.000000       748788          inf
***
    #[Mean    =        0.915, StdDeviation   =        0.434]
    #[Max     =        6.472, Total count    =       748788]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
899444 requests in 1.00m, 58.23MB read

Requests/sec:  14990.90

Transfer/sec:      0.97MB

> wrk -t 4 -c 64 -R 20000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

4 threads and 64 connections

Thread calibration: mean lat.: 0.960ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.964ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.961ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.952ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency     0.95ms   432.22us    6.86ms      65.52%
    Req/Sec      5.21k     274.52     6.55k      62.51%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    0.93ms
    75.000%    1.26ms
    90.000%    1.52ms
    99.000%    1.97ms
    99.900%    2.49ms
    99.990%    3.16ms
    99.999%    3.80ms
    100.000%   6.87ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.015     0.000000            1         1.00
       0.386     0.100000       100379         1.11
       0.545     0.200000       199768         1.25
       0.670     0.300000       299569         1.43
       0.802     0.400000       399473         1.67
       0.931     0.500000       499931         2.00
       0.995     0.550000       549753         2.22
       1.059     0.600000       599287         2.50
       1.125     0.650000       649510         2.86
       1.192     0.700000       699340         3.33
       1.260     0.750000       749115         4.00
       1.295     0.775000       774306         4.44
       1.330     0.800000       798736         5.00
       1.368     0.825000       823817         5.71
       1.411     0.850000       849101         6.67
       1.460     0.875000       873686         8.00
       1.489     0.887500       886266         8.89
       1.521     0.900000       898791        10.00
       1.557     0.912500       911303        11.43
       1.596     0.925000       923628        13.33
       1.639     0.937500       936089        16.00
       1.661     0.943750       942412        17.78
       1.684     0.950000       948646        20.00
       1.708     0.956250       954949        22.86
       1.733     0.962500       960990        26.67
       1.764     0.968750       967399        32.00
       1.781     0.971875       970436        35.56
       1.799     0.975000       973436        40.00
       1.821     0.978125       976567        45.71
       1.847     0.981250       979771        53.33
       1.879     0.984375       982823        64.00
       1.899     0.985938       984421        71.11
       1.922     0.987500       985937        80.00
       1.949     0.989062       987500        91.43
       1.982     0.990625       989043       106.67
       2.018     0.992188       990627       128.00
       2.037     0.992969       991389       142.22
       2.057     0.993750       992155       160.00
       2.081     0.994531       992989       182.86
       2.105     0.995313       993764       213.33
       2.133     0.996094       994532       256.00
       2.149     0.996484       994895       284.44
       2.169     0.996875       995297       320.00
       2.193     0.997266       995686       365.71
       2.223     0.997656       996059       426.67
       2.271     0.998047       996454       512.00
       2.299     0.998242       996646       568.89
       2.333     0.998437       996838       640.00
       2.377     0.998633       997035       731.43
       2.435     0.998828       997223       853.33
       2.499     0.999023       997418      1024.00
       2.537     0.999121       997517      1137.78
       2.575     0.999219       997615      1280.00
       2.617     0.999316       997710      1462.86
       2.679     0.999414       997811      1706.67
       2.745     0.999512       997907      2048.00
       2.777     0.999561       997955      2275.56
       2.815     0.999609       998003      2560.00
       2.859     0.999658       998055      2925.71
       2.891     0.999707       998099      3413.33
       2.937     0.999756       998148      4096.00
       2.959     0.999780       998173      4551.11
       2.991     0.999805       998198      5120.00
       3.023     0.999829       998221      5851.43
       3.055     0.999854       998245      6826.67
       3.097     0.999878       998270      8192.00
       3.135     0.999890       998282      9102.22
       3.171     0.999902       998295     10240.00
       3.193     0.999915       998306     11702.86
       3.233     0.999927       998318     13653.33
       3.305     0.999939       998331     16384.00
       3.319     0.999945       998337     18204.44
       3.345     0.999951       998343     20480.00
       3.371     0.999957       998349     23405.71
       3.423     0.999963       998355     27306.67
       3.479     0.999969       998361     32768.00
       3.497     0.999973       998364     36408.89
       3.527     0.999976       998367     40960.00
       3.579     0.999979       998370     46811.43
       3.637     0.999982       998373     54613.33
       3.707     0.999985       998376     65536.00
       3.771     0.999986       998379     72817.78
       3.771     0.999988       998379     81920.00
       3.795     0.999989       998381     93622.86
       3.829     0.999991       998382    109226.67
       3.883     0.999992       998384    131072.00
       4.003     0.999993       998385    145635.56
       4.003     0.999994       998385    163840.00
       4.075     0.999995       998386    187245.71
       4.203     0.999995       998387    218453.33
       4.519     0.999996       998388    262144.00
       4.519     0.999997       998388    291271.11
       4.519     0.999997       998388    327680.00
       4.575     0.999997       998389    374491.43
       4.575     0.999998       998389    436906.67
       4.907     0.999998       998390    524288.00
       4.907     0.999998       998390    582542.22
       4.907     0.999998       998390    655360.00
       4.907     0.999999       998390    748982.86
       4.907     0.999999       998390    873813.33
       6.867     0.999999       998391   1048576.00
       6.867     1.000000       998391          inf
***
    #[Mean    =        0.948, StdDeviation   =        0.432]
    #[Max     =        6.864, Total count    =       998391]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1199258 requests in 1.00m, 77.65MB read

Requests/sec:  19987.64

Transfer/sec:      1.29MB

Запросы в 20 потоков и 64 соединения в синхронном режиме
-

> wrk -t 20 -c 64 -R 20000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

20 threads and 64 connections

Thread calibration: mean lat.: 0.840ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.818ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.835ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.780ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.812ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.735ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.834ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.819ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.797ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.803ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.829ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.816ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.756ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.837ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.825ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.810ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.773ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.834ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.818ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.783ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency   806.52us   342.56us    5.51ms      61.45%
    Req/Sec      1.03k      65.05     1.55k      59.20%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%  809.00us
    75.000%    1.09ms
    90.000%    1.26ms
    99.000%    1.44ms
    99.900%    1.58ms
    99.990%    4.09ms
    99.999%    5.15ms
    100.000%   5.51ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.013     0.000000            1         1.00
       0.358     0.100000       100274         1.11
       0.468     0.200000       200096         1.25
       0.577     0.300000       300714         1.43
       0.692     0.400000       400563         1.67
       0.809     0.500000       500589         2.00
       0.867     0.550000       550188         2.22
       0.923     0.600000       600624         2.50
       0.977     0.650000       649879         2.86
       1.032     0.700000       699841         3.33
       1.086     0.750000       750454         4.00
       1.113     0.775000       775472         4.44
       1.140     0.800000       799824         5.00
       1.168     0.825000       824771         5.71
       1.197     0.850000       850540         6.67
       1.226     0.875000       875453         8.00
       1.240     0.887500       887202         8.89
       1.256     0.900000       900221        10.00
       1.272     0.912500       912394        11.43
       1.290     0.925000       925031        13.33
       1.309     0.937500       937281        16.00
       1.320     0.943750       943835        17.78
       1.331     0.950000       949991        20.00
       1.343     0.956250       956198        22.86
       1.356     0.962500       962632        26.67
       1.369     0.968750       968521        32.00
       1.376     0.971875       971734        35.56
       1.384     0.975000       975008        40.00
       1.392     0.978125       978074        45.71
       1.401     0.981250       981156        53.33
       1.411     0.984375       984098        64.00
       1.418     0.985938       985795        71.11
       1.424     0.987500       987174        80.00
       1.433     0.989062       988852        91.43
       1.442     0.990625       990304       106.67
       1.454     0.992188       991943       128.00
       1.461     0.992969       992737       142.22
       1.467     0.993750       993440       160.00
       1.475     0.994531       994243       182.86
       1.483     0.995313       994971       213.33
       1.493     0.996094       995811       256.00
       1.498     0.996484       996190       284.44
       1.504     0.996875       996533       320.00
       1.512     0.997266       996959       365.71
       1.520     0.997656       997344       426.67
       1.530     0.998047       997716       512.00
       1.536     0.998242       997899       568.89
       1.543     0.998437       998095       640.00
       1.554     0.998633       998294       731.43
       1.566     0.998828       998483       853.33
       1.588     0.999023       998679      1024.00
       1.609     0.999121       998778      1137.78
       1.662     0.999219       998877      1280.00
       1.889     0.999316       998971      1462.86
       2.227     0.999414       999069      1706.67
       2.487     0.999512       999166      2048.00
       2.619     0.999561       999216      2275.56
       2.811     0.999609       999264      2560.00
       2.987     0.999658       999313      2925.71
       3.157     0.999707       999362      3413.33
       3.339     0.999756       999410      4096.00
       3.411     0.999780       999435      4551.11
       3.563     0.999805       999459      5120.00
       3.691     0.999829       999484      5851.43
       3.847     0.999854       999508      6826.67
       3.993     0.999878       999532      8192.00
       4.039     0.999890       999545      9102.22
       4.123     0.999902       999557     10240.00
       4.219     0.999915       999570     11702.86
       4.335     0.999927       999581     13653.33
       4.415     0.999939       999593     16384.00
       4.455     0.999945       999600     18204.44
       4.523     0.999951       999607     20480.00
       4.591     0.999957       999612     23405.71
       4.643     0.999963       999618     27306.67
       4.747     0.999969       999624     32768.00
       4.823     0.999973       999627     36408.89
       4.839     0.999976       999630     40960.00
       4.895     0.999979       999633     46811.43
       4.927     0.999982       999637     54613.33
       4.979     0.999985       999640     65536.00
       5.023     0.999986       999641     72817.78
       5.035     0.999988       999642     81920.00
       5.147     0.999989       999644     93622.86
       5.179     0.999991       999645    109226.67
       5.227     0.999992       999647    131072.00
       5.279     0.999993       999648    145635.56
       5.279     0.999994       999648    163840.00
       5.291     0.999995       999649    187245.71
       5.355     0.999995       999650    218453.33
       5.387     0.999996       999651    262144.00
       5.387     0.999997       999651    291271.11
       5.387     0.999997       999651    327680.00
       5.403     0.999997       999652    374491.43
       5.403     0.999998       999652    436906.67
       5.511     0.999998       999653    524288.00
       5.511     0.999998       999653    582542.22
       5.511     0.999998       999653    655360.00
       5.511     0.999999       999653    748982.86
       5.511     0.999999       999653    873813.33
       5.515     0.999999       999654   1048576.00
       5.515     1.000000       999654          inf
***
    #[Mean    =        0.807, StdDeviation   =        0.343]
    #[Max     =        5.512, Total count    =       999654]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1199880 requests in 1.00m, 76.67MB read

Requests/sec:  19998.90

Transfer/sec:      1.28MB

> wrk -t 20 -c 64 -R 30000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

20 threads and 64 connections

Thread calibration: mean lat.: 0.784ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.789ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.792ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.769ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.823ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.806ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.734ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.752ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.792ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.775ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.774ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.809ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.793ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.809ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.780ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.765ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.825ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.769ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.833ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.839ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency   741.01us   348.30us    5.78ms      60.29%
    Req/Sec      1.57k      87.01     2.33k      68.29%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%  742.00us
    75.000%    1.03ms
    90.000%    1.19ms
    99.000%    1.36ms
    99.900%    2.16ms
    99.990%    4.60ms
    99.999%    5.28ms
    100.000%   5.78ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.026     0.000000            1         1.00
       0.270     0.100000       151209         1.11
       0.385     0.200000       299990         1.25
       0.511     0.300000       450133         1.43
       0.630     0.400000       600424         1.67
       0.742     0.500000       749772         2.00
       0.795     0.550000       825186         2.22
       0.852     0.600000       900770         2.50
       0.913     0.650000       975830         2.86
       0.972     0.700000      1050237         3.33
       1.030     0.750000      1124646         4.00
       1.057     0.775000      1162516         4.44
       1.083     0.800000      1200436         5.00
       1.108     0.825000      1237899         5.71
       1.133     0.850000      1274617         6.67
       1.161     0.875000      1313298         8.00
       1.175     0.887500      1331661         8.89
       1.190     0.900000      1349860        10.00
       1.207     0.912500      1369119        11.43
       1.224     0.925000      1387415        13.33
       1.242     0.937500      1405958        16.00
       1.252     0.943750      1415946        17.78
       1.261     0.950000      1424647        20.00
       1.271     0.956250      1433920        22.86
       1.282     0.962500      1443401        26.67
       1.294     0.968750      1452745        32.00
       1.301     0.971875      1457717        35.56
       1.308     0.975000      1462281        40.00
       1.316     0.978125      1467021        45.71
       1.325     0.981250      1471718        53.33
       1.335     0.984375      1476349        64.00
       1.341     0.985938      1478691        71.11
       1.347     0.987500      1480752        80.00
       1.355     0.989062      1483256        91.43
       1.363     0.990625      1485420       106.67
       1.373     0.992188      1487789       128.00
       1.379     0.992969      1489057       142.22
       1.385     0.993750      1490160       160.00
       1.392     0.994531      1491283       182.86
       1.401     0.995313      1492514       213.33
       1.412     0.996094      1493718       256.00
       1.418     0.996484      1494290       284.44
       1.425     0.996875      1494806       320.00
       1.434     0.997266      1495413       365.71
       1.446     0.997656      1496016       426.67
       1.461     0.998047      1496573       512.00
       1.473     0.998242      1496861       568.89
       1.492     0.998437      1497142       640.00
       1.546     0.998633      1497428       731.43
       1.767     0.998828      1497719       853.33
       2.207     0.999023      1498012      1024.00
       2.419     0.999121      1498159      1137.78
       2.671     0.999219      1498306      1280.00
       2.873     0.999316      1498451      1462.86
       3.105     0.999414      1498599      1706.67
       3.357     0.999512      1498745      2048.00
       3.463     0.999561      1498818      2275.56
       3.591     0.999609      1498891      2560.00
       3.747     0.999658      1498964      2925.71
       3.901     0.999707      1499037      3413.33
       4.029     0.999756      1499111      4096.00
       4.119     0.999780      1499148      4551.11
       4.175     0.999805      1499184      5120.00
       4.279     0.999829      1499220      5851.43
       4.399     0.999854      1499259      6826.67
       4.495     0.999878      1499293      8192.00
       4.567     0.999890      1499315      9102.22
       4.615     0.999902      1499333     10240.00
       4.667     0.999915      1499350     11702.86
       4.711     0.999927      1499367     13653.33
       4.775     0.999939      1499386     16384.00
       4.799     0.999945      1499394     18204.44
       4.867     0.999951      1499405     20480.00
       4.907     0.999957      1499412     23405.71
       4.967     0.999963      1499422     27306.67
       5.035     0.999969      1499432     32768.00
       5.063     0.999973      1499435     36408.89
       5.111     0.999976      1499441     40960.00
       5.123     0.999979      1499444     46811.43
       5.175     0.999982      1499449     54613.33
       5.231     0.999985      1499454     65536.00
       5.243     0.999986      1499457     72817.78
       5.247     0.999988      1499458     81920.00
       5.279     0.999989      1499460     93622.86
       5.347     0.999991      1499463    109226.67
       5.367     0.999992      1499465    131072.00
       5.415     0.999993      1499466    145635.56
       5.447     0.999994      1499467    163840.00
       5.459     0.999995      1499468    187245.71
       5.547     0.999995      1499470    218453.33
       5.559     0.999996      1499471    262144.00
       5.559     0.999997      1499471    291271.11
       5.583     0.999997      1499472    327680.00
       5.583     0.999997      1499472    374491.43
       5.623     0.999998      1499473    436906.67
       5.663     0.999998      1499474    524288.00
       5.663     0.999998      1499474    582542.22
       5.663     0.999998      1499474    655360.00
       5.663     0.999999      1499474    748982.86
       5.711     0.999999      1499475    873813.33
       5.711     0.999999      1499475   1048576.00
       5.711     0.999999      1499475   1165084.44
       5.711     0.999999      1499475   1310720.00
       5.711     0.999999      1499475   1497965.71
       5.783     0.999999      1499476   1747626.67
       5.783     1.000000      1499476          inf
***
    #[Mean    =        0.741, StdDeviation   =        0.348]
    #[Max     =        5.780, Total count    =      1499476]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1799792 requests in 1.00m, 115.00MB read

Requests/sec:  29998.18

Transfer/sec:      1.92MB

> wrk -t 20 -c 64 -R 15000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

20 threads and 64 connections

Thread calibration: mean lat.: 0.806ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.790ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.874ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.782ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.773ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.863ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.757ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.798ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.711ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.766ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.873ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.827ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.809ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.859ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.752ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.779ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.882ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.851ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.873ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.796ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency   806.22us   350.62us    5.56ms      63.96%
    Req/Sec     791.80      73.61     1.00k      55.38%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%  804.00us
    75.000%    1.08ms
    90.000%    1.27ms
    99.000%    1.49ms
    99.900%    2.05ms
    99.990%    2.71ms
    99.999%    4.32ms
    100.000%   5.57ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.010     0.000000            1         1.00
       0.353     0.100000        75096         1.11
       0.480     0.200000       150278         1.25
       0.581     0.300000       225105         1.43
       0.691     0.400000       299917         1.67
       0.804     0.500000       375424         2.00
       0.858     0.550000       412596         2.22
       0.912     0.600000       449917         2.50
       0.966     0.650000       487906         2.86
       1.021     0.700000       525281         3.33
       1.080     0.750000       562897         4.00
       1.109     0.775000       581600         4.44
       1.139     0.800000       600340         5.00
       1.170     0.825000       618638         5.71
       1.202     0.850000       637526         6.67
       1.236     0.875000       656091         8.00
       1.254     0.887500       665627         8.89
       1.272     0.900000       674949        10.00
       1.292     0.912500       684415        11.43
       1.314     0.925000       693714        13.33
       1.338     0.937500       702976        16.00
       1.351     0.943750       707743        17.78
       1.364     0.950000       712409        20.00
       1.377     0.956250       717085        22.86
       1.391     0.962500       721669        26.67
       1.407     0.968750       726353        32.00
       1.416     0.971875       728795        35.56
       1.425     0.975000       731033        40.00
       1.435     0.978125       733354        45.71
       1.447     0.981250       735705        53.33
       1.461     0.984375       738025        64.00
       1.469     0.985938       739254        71.11
       1.478     0.987500       740457        80.00
       1.488     0.989062       741646        91.43
       1.499     0.990625       742780       106.67
       1.512     0.992188       743948       128.00
       1.520     0.992969       744524       142.22
       1.529     0.993750       745059       160.00
       1.541     0.994531       745654       182.86
       1.556     0.995313       746223       213.33
       1.579     0.996094       746832       256.00
       1.592     0.996484       747101       284.44
       1.613     0.996875       747392       320.00
       1.644     0.997266       747692       365.71
       1.699     0.997656       747981       426.67
       1.773     0.998047       748270       512.00
       1.819     0.998242       748417       568.89
       1.864     0.998437       748566       640.00
       1.919     0.998633       748710       731.43
       1.989     0.998828       748857       853.33
       2.061     0.999023       749004      1024.00
       2.111     0.999121       749076      1137.78
       2.151     0.999219       749149      1280.00
       2.195     0.999316       749223      1462.86
       2.243     0.999414       749295      1706.67
       2.297     0.999512       749368      2048.00
       2.325     0.999561       749409      2275.56
       2.367     0.999609       749442      2560.00
       2.407     0.999658       749479      2925.71
       2.455     0.999707       749518      3413.33
       2.505     0.999756       749554      4096.00
       2.525     0.999780       749570      4551.11
       2.555     0.999805       749589      5120.00
       2.577     0.999829       749606      5851.43
       2.631     0.999854       749625      6826.67
       2.669     0.999878       749643      8192.00
       2.691     0.999890       749652      9102.22
       2.717     0.999902       749662     10240.00
       2.755     0.999915       749670     11702.86
       2.791     0.999927       749680     13653.33
       2.833     0.999939       749689     16384.00
       2.847     0.999945       749693     18204.44
       2.881     0.999951       749698     20480.00
       2.893     0.999957       749702     23405.71
       2.953     0.999963       749707     27306.67
       3.031     0.999969       749712     32768.00
       3.255     0.999973       749714     36408.89
       3.373     0.999976       749716     40960.00
       3.483     0.999979       749718     46811.43
       3.545     0.999982       749721     54613.33
       3.787     0.999985       749723     65536.00
       3.887     0.999986       749724     72817.78
       3.993     0.999988       749725     81920.00
       4.151     0.999989       749726     93622.86
       4.551     0.999991       749728    109226.67
       4.667     0.999992       749729    131072.00
       4.667     0.999993       749729    145635.56
       4.671     0.999994       749730    163840.00
       4.671     0.999995       749730    187245.71
       4.699     0.999995       749731    218453.33
       4.763     0.999996       749732    262144.00
       4.763     0.999997       749732    291271.11
       4.763     0.999997       749732    327680.00
       4.763     0.999997       749732    374491.43
       4.791     0.999998       749733    436906.67
       4.791     0.999998       749733    524288.00
       4.791     0.999998       749733    582542.22
       4.791     0.999998       749733    655360.00
       4.791     0.999999       749733    748982.86
       5.567     0.999999       749734    873813.33
       5.567     1.000000       749734          inf
***
    #[Mean    =        0.806, StdDeviation   =        0.351]
    #[Max     =        5.564, Total count    =       749734]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
899924 requests in 1.00m, 58.27MB read

Requests/sec:  14999.01

Transfer/sec:      0.97MB

> wrk -t 20 -c 64 -R 20000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

20 threads and 64 connections

Thread calibration: mean lat.: 0.842ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.816ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.839ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.795ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.782ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.734ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.773ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.715ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.767ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.803ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.747ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.778ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.773ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.780ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.772ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.738ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.727ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.773ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.786ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.713ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency   769.09us   348.41us   10.19ms      63.29%
    Req/Sec      1.04k      69.03     1.89k      77.71%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%  762.00us
    75.000%    1.04ms
    90.000%    1.22ms
    99.000%    1.46ms
    99.900%    2.17ms
    99.990%    3.31ms
    99.999%    7.30ms
    100.000%  10.20ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.010     0.000000            2         1.00
       0.320     0.100000       100154         1.11
       0.428     0.200000       200764         1.25
       0.541     0.300000       299986         1.43
       0.655     0.400000       400728         1.67
       0.762     0.500000       500147         2.00
       0.819     0.550000       550217         2.22
       0.878     0.600000       600204         2.50
       0.936     0.650000       650197         2.86
       0.989     0.700000       700128         3.33
       1.039     0.750000       750477         4.00
       1.064     0.775000       775241         4.44
       1.091     0.800000       800562         5.00
       1.118     0.825000       824813         5.71
       1.148     0.850000       850194         6.67
       1.182     0.875000       875392         8.00
       1.200     0.887500       887783         8.89
       1.220     0.900000       900125        10.00
       1.242     0.912500       912228        11.43
       1.266     0.925000       924751        13.33
       1.293     0.937500       937337        16.00
       1.307     0.943750       943492        17.78
       1.322     0.950000       949879        20.00
       1.337     0.956250       956097        22.86
       1.353     0.962500       962447        26.67
       1.369     0.968750       968616        32.00
       1.378     0.971875       971872        35.56
       1.387     0.975000       974956        40.00
       1.397     0.978125       978029        45.71
       1.408     0.981250       980962        53.33
       1.423     0.984375       984215        64.00
       1.431     0.985938       985609        71.11
       1.442     0.987500       987296        80.00
       1.454     0.989062       988748        91.43
       1.470     0.990625       990375       106.67
       1.487     0.992188       991864       128.00
       1.497     0.992969       992643       142.22
       1.509     0.993750       993424       160.00
       1.523     0.994531       994200       182.86
       1.545     0.995313       994976       213.33
       1.582     0.996094       995761       256.00
       1.615     0.996484       996148       284.44
       1.660     0.996875       996535       320.00
       1.725     0.997266       996924       365.71
       1.804     0.997656       997318       426.67
       1.899     0.998047       997708       512.00
       1.945     0.998242       997900       568.89
       2.000     0.998437       998098       640.00
       2.057     0.998633       998301       731.43
       2.121     0.998828       998486       853.33
       2.185     0.999023       998684      1024.00
       2.227     0.999121       998784      1137.78
       2.271     0.999219       998879      1280.00
       2.317     0.999316       998976      1462.86
       2.361     0.999414       999074      1706.67
       2.417     0.999512       999169      2048.00
       2.455     0.999561       999218      2275.56
       2.497     0.999609       999269      2560.00
       2.541     0.999658       999316      2925.71
       2.617     0.999707       999365      3413.33
       2.681     0.999756       999414      4096.00
       2.703     0.999780       999439      4551.11
       2.749     0.999805       999463      5120.00
       2.799     0.999829       999488      5851.43
       2.863     0.999854       999511      6826.67
       3.023     0.999878       999535      8192.00
       3.191     0.999890       999548      9102.22
       3.471     0.999902       999560     10240.00
       3.747     0.999915       999572     11702.86
       4.009     0.999927       999584     13653.33
       4.295     0.999939       999596     16384.00
       4.467     0.999945       999603     18204.44
       4.759     0.999951       999609     20480.00
       5.035     0.999957       999616     23405.71
       5.139     0.999963       999621     27306.67
       5.275     0.999969       999627     32768.00
       5.423     0.999973       999630     36408.89
       5.899     0.999976       999633     40960.00
       6.287     0.999979       999636     46811.43
       6.723     0.999982       999639     54613.33
       6.923     0.999985       999642     65536.00
       7.107     0.999986       999644     72817.78
       7.259     0.999988       999645     81920.00
       7.299     0.999989       999647     93622.86
       7.479     0.999991       999648    109226.67
       8.155     0.999992       999650    131072.00
       8.175     0.999993       999651    145635.56
       8.175     0.999994       999651    163840.00
       8.535     0.999995       999652    187245.71
       8.871     0.999995       999653    218453.33
       9.159     0.999996       999654    262144.00
       9.159     0.999997       999654    291271.11
       9.159     0.999997       999654    327680.00
       9.871     0.999997       999655    374491.43
       9.871     0.999998       999655    436906.67
      10.191     0.999998       999656    524288.00
      10.191     0.999998       999656    582542.22
      10.191     0.999998       999656    655360.00
      10.191     0.999999       999656    748982.86
      10.191     0.999999       999656    873813.33
      10.199     0.999999       999657   1048576.00
      10.199     1.000000       999657          inf
***
    #[Mean    =        0.769, StdDeviation   =        0.348]
    #[Max     =       10.192, Total count    =       999657]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1199886 requests in 1.00m, 77.69MB read

Requests/sec:  19998.45

Transfer/sec:      1.29MB

Запросы в 64 потока в синхронном режиме
-

> wrk -t 64 -c 64 -R 20000 -d 1m -s put.lua http://localhost:19234

Running 1m test @ http://localhost:19234

64 threads and 64 connections

Thread calibration: mean lat.: 0.952ms, rate sampling interval: 10ms

...

Thread calibration: mean lat.: 0.940ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency   956.11us   295.61us   3.84ms      58.80%
    Req/Sec     328.65      37.54   444.00      83.00%

1199936 requests in 1.00m, 76.67MB read

Requests/sec:  20002.15

Transfer/sec:      1.28MB

> wrk -t 64 -c 64 -R 15000 -d 1m -s get.lua http://localhost:19234

Running 1m test @ http://localhost:19234

64 threads and 64 connections

Thread calibration: mean lat.: 0.969ms, rate sampling interval: 10ms

...

Thread calibration: mean lat.: 0.941ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   954.74us  299.72us   5.20ms   59.55%
    Req/Sec   243.33     49.04   333.00     64.36%

899910 requests in 1.00m, 58.26MB read

Requests/sec:  15004.44

Transfer/sec:      0.97MB

Запросы с использованием `ExecutorService` в 4 потока и 64 соединения в асинхронном режиме с использованием стека
-

> wrk -t 4 -c 64 -R 20000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

4 threads and 64 connections

Thread calibration: mean lat.: 1.240ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.236ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.345ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.214ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency     1.60ms    10.72ms 257.15ms      99.38%
    Req/Sec      5.28k      1.47k   89.11k      98.70%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    0.87ms
    75.000%    1.20ms
    90.000%    1.50ms
    99.000%    2.21ms
    99.900%  207.36ms
    99.990%  250.49ms
    99.999%  255.10ms
    100.000% 257.28ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.016     0.000000            1         1.00
       0.340     0.100000        99657         1.11
       0.490     0.200000       198655         1.25
       0.626     0.300000       298106         1.43
       0.749     0.400000       397453         1.67
       0.871     0.500000       496044         2.00
       0.934     0.550000       545993         2.22
       0.996     0.600000       595431         2.50
       1.055     0.650000       644894         2.86
       1.124     0.700000       694559         3.33
       1.200     0.750000       744263         4.00
       1.238     0.775000       769175         4.44
       1.277     0.800000       793901         5.00
       1.325     0.825000       818569         5.71
       1.376     0.850000       843317         6.67
       1.435     0.875000       868015         8.00
       1.468     0.887500       880635         8.89
       1.503     0.900000       892973        10.00
       1.542     0.912500       905228        11.43
       1.586     0.925000       917751        13.33
       1.634     0.937500       930027        16.00
       1.660     0.943750       936185        17.78
       1.689     0.950000       942500        20.00
       1.721     0.956250       948593        22.86
       1.758     0.962500       954790        26.67
       1.804     0.968750       961015        32.00
       1.831     0.971875       964173        35.56
       1.859     0.975000       967233        40.00
       1.891     0.978125       970345        45.71
       1.928     0.981250       973397        53.33
       1.978     0.984375       976514        64.00
       2.011     0.985938       978037        71.11
       2.059     0.987500       979573        80.00
       2.135     0.989062       981138        91.43
       2.335     0.990625       982668       106.67
       5.403     0.992188       984218       128.00
       8.255     0.992969       984993       142.22
      11.919     0.993750       985768       160.00
      18.559     0.994531       986543       182.86
      32.719     0.995313       987318       213.33
      68.095     0.996094       988093       256.00
      87.039     0.996484       988480       284.44
     105.855     0.996875       988870       320.00
     124.607     0.997266       989255       365.71
     143.487     0.997656       989644       426.67
     161.919     0.998047       990030       512.00
     171.263     0.998242       990225       568.89
     180.735     0.998437       990421       640.00
     189.951     0.998633       990612       731.43
     199.295     0.998828       990806       853.33
     208.511     0.999023       991000      1024.00
     213.119     0.999121       991096      1137.78
     217.855     0.999219       991193      1280.00
     222.591     0.999316       991289      1462.86
     227.199     0.999414       991388      1706.67
     232.063     0.999512       991483      2048.00
     234.239     0.999561       991532      2275.56
     236.671     0.999609       991581      2560.00
     238.719     0.999658       991630      2925.71
     241.407     0.999707       991680      3413.33
     243.455     0.999756       991725      4096.00
     244.735     0.999780       991752      4551.11
     245.887     0.999805       991776      5120.00
     247.167     0.999829       991798      5851.43
     248.063     0.999854       991824      6826.67
     249.471     0.999878       991849      8192.00
     250.111     0.999890       991861      9102.22
     250.623     0.999902       991871     10240.00
     251.135     0.999915       991885     11702.86
     251.775     0.999927       991896     13653.33
     252.415     0.999939       991909     16384.00
     252.543     0.999945       991914     18204.44
     252.927     0.999951       991919     20480.00
     253.183     0.999957       991926     23405.71
     253.567     0.999963       991931     27306.67
     253.951     0.999969       991940     32768.00
     253.951     0.999973       991940     36408.89
     254.207     0.999976       991945     40960.00
     254.335     0.999979       991947     46811.43
     254.719     0.999982       991951     54613.33
     254.847     0.999985       991954     65536.00
     254.847     0.999986       991954     72817.78
     254.975     0.999988       991956     81920.00
     255.103     0.999989       991957     93622.86
     255.231     0.999991       991958    109226.67
     255.615     0.999992       991960    131072.00
     255.743     0.999993       991961    145635.56
     255.743     0.999994       991961    163840.00
     255.871     0.999995       991963    187245.71
     255.871     0.999995       991963    218453.33
     255.999     0.999996       991964    262144.00
     255.999     0.999997       991964    291271.11
     255.999     0.999997       991964    327680.00
     256.511     0.999997       991965    374491.43
     256.511     0.999998       991965    436906.67
     256.767     0.999998       991966    524288.00
     256.767     0.999998       991966    582542.22
     256.767     0.999998       991966    655360.00
     256.767     0.999999       991966    748982.86
     256.767     0.999999       991966    873813.33
     257.279     0.999999       991967   1048576.00
     257.279     1.000000       991967          inf
***
    #[Mean    =        1.603, StdDeviation   =       10.720]
    #[Max     =      257.152, Total count    =       991967]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1188019 requests in 1.00m, 75.91MB read

Socket errors: connect 0, read 0, write 0, timeout 9

Requests/sec:  19800.46

Transfer/sec:      1.27MB

> wrk -t 4 -c 64 -R 30000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

4 threads and 64 connections

Thread calibration: mean lat.: 1.417ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.398ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.438ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.403ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency     2.45ms    16.33ms 289.28ms      98.51%
    Req/Sec      7.73k      3.01k  156.22k      97.80%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%  750.00us
    75.000%    1.05ms
    90.000%    1.43ms
    99.000%   44.48ms
    99.900%  240.26ms
    99.990%  282.37ms
    99.999%  287.49ms
    100.000% 289.54ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.018     0.000000            1         1.00
       0.254     0.100000       147534         1.11
       0.395     0.200000       295571         1.25
       0.513     0.300000       441962         1.43
       0.629     0.400000       589359         1.67
       0.750     0.500000       737770         2.00
       0.808     0.550000       810310         2.22
       0.869     0.600000       885170         2.50
       0.932     0.650000       957961         2.86
       0.992     0.700000      1031637         3.33
       1.054     0.750000      1105358         4.00
       1.096     0.775000      1142028         4.44
       1.140     0.800000      1179063         5.00
       1.186     0.825000      1215987         5.71
       1.248     0.850000      1252333         6.67
       1.327     0.875000      1289055         8.00
       1.376     0.887500      1307478         8.89
       1.433     0.900000      1326069        10.00
       1.491     0.912500      1344473        11.43
       1.554     0.925000      1362786        13.33
       1.628     0.937500      1381318        16.00
       1.670     0.943750      1390367        17.78
       1.716     0.950000      1399640        20.00
       1.767     0.956250      1408863        22.86
       1.826     0.962500      1418055        26.67
       1.907     0.968750      1427212        32.00
       1.968     0.971875      1431815        35.56
       2.071     0.975000      1436436        40.00
       2.305     0.978125      1440975        45.71
       5.627     0.981250      1445576        53.33
      15.031     0.984375      1450181        64.00
      23.151     0.985938      1452484        71.11
      31.375     0.987500      1454785        80.00
      39.615     0.989062      1457099        91.43
      48.159     0.990625      1459391       106.67
      81.535     0.992188      1461690       128.00
      99.775     0.992969      1462844       142.22
     117.823     0.993750      1463993       160.00
     135.935     0.994531      1465144       182.86
     153.983     0.995313      1466294       213.33
     171.647     0.996094      1467445       256.00
     180.607     0.996484      1468019       284.44
     189.695     0.996875      1468595       320.00
     198.783     0.997266      1469175       365.71
     207.743     0.997656      1469750       426.67
     216.575     0.998047      1470325       512.00
     221.055     0.998242      1470609       568.89
     225.663     0.998437      1470903       640.00
     230.015     0.998633      1471188       731.43
     234.367     0.998828      1471473       853.33
     241.279     0.999023      1471761      1024.00
     246.015     0.999121      1471909      1137.78
     250.367     0.999219      1472054      1280.00
     254.719     0.999316      1472191      1462.86
     259.327     0.999414      1472339      1706.67
     263.935     0.999512      1472479      2048.00
     266.239     0.999561      1472557      2275.56
     268.543     0.999609      1472626      2560.00
     270.847     0.999658      1472698      2925.71
     273.151     0.999707      1472772      3413.33
     275.455     0.999756      1472847      4096.00
     276.735     0.999780      1472883      4551.11
     277.759     0.999805      1472920      5120.00
     278.783     0.999829      1472949      5851.43
     279.807     0.999854      1472986      6826.67
     281.087     0.999878      1473021      8192.00
     281.599     0.999890      1473037      9102.22
     282.367     0.999902      1473059     10240.00
     282.879     0.999915      1473076     11702.86
     283.391     0.999927      1473093     13653.33
     283.903     0.999939      1473110     16384.00
     284.415     0.999945      1473124     18204.44
     284.671     0.999951      1473132     20480.00
     284.927     0.999957      1473137     23405.71
     285.439     0.999963      1473153     27306.67
     285.695     0.999969      1473161     32768.00
     285.695     0.999973      1473161     36408.89
     285.951     0.999976      1473164     40960.00
     286.207     0.999979      1473168     46811.43
     286.463     0.999982      1473172     54613.33
     286.719     0.999985      1473178     65536.00
     286.719     0.999986      1473178     72817.78
     286.975     0.999988      1473181     81920.00
     287.487     0.999989      1473184     93622.86
     287.743     0.999991      1473188    109226.67
     287.743     0.999992      1473188    131072.00
     287.743     0.999993      1473188    145635.56
     287.999     0.999994      1473190    163840.00
     288.255     0.999995      1473193    187245.71
     288.255     0.999995      1473193    218453.33
     288.255     0.999996      1473193    262144.00
     288.255     0.999997      1473193    291271.11
     288.511     0.999997      1473196    327680.00
     288.511     0.999997      1473196    374491.43
     288.511     0.999998      1473196    436906.67
     288.511     0.999998      1473196    524288.00
     288.511     0.999998      1473196    582542.22
     288.511     0.999998      1473196    655360.00
     289.023     0.999999      1473197    748982.86
     289.023     0.999999      1473197    873813.33
     289.023     0.999999      1473197   1048576.00
     289.023     0.999999      1473197   1165084.44
     289.023     0.999999      1473197   1310720.00
     289.535     0.999999      1473198   1497965.71
     289.535     1.000000      1473198          inf
***
    #[Mean    =        2.448, StdDeviation   =       16.328]
    #[Max     =      289.280, Total count    =      1473198]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1774494 requests in 1.00m, 113.38MB read

Socket errors: connect 0, read 0, write 0, timeout 23

Requests/sec:  29575.38

Transfer/sec:      1.89MB

> wrk -t 4 -c 64 -R 15000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

4 threads and 64 connections

Thread calibration: mean lat.: 1.639ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.645ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.658ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.655ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency   998.73ms      3.96s   28.49s      94.36%
    Req/Sec      1.59k      4.45k  108.33k      97.74%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    1.11ms
    75.000%   75.46ms
    90.000%    1.02s
    99.000%   25.94s
    99.900%   27.97s
    99.990%   28.39s
    99.999%   28.51s
    100.000%   28.51s

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.017     0.000000            1         1.00
       0.374     0.100000        30743         1.11
       0.566     0.200000        61264         1.25
       0.745     0.300000        91810         1.43
       0.921     0.400000       122421         1.67
       1.112     0.500000       153079         2.00
       1.235     0.550000       168337         2.22
       1.373     0.600000       183686         2.50
       1.854     0.650000       198922         2.86
      35.711     0.700000       214237         3.33
      75.455     0.750000       229538         4.00
     123.391     0.775000       237178         4.44
     241.919     0.800000       244828         5.00
     373.247     0.825000       252482         5.71
     525.823     0.850000       260139         6.67
     708.095     0.875000       267793         8.00
     812.543     0.887500       271610         8.89
    1015.295     0.900000       275433        10.00
    1296.383     0.912500       279263        11.43
    1726.463     0.925000       283087        13.33
    2430.975     0.937500       286910        16.00
    4984.831     0.943750       288820        17.78
    6217.727     0.950000       290732        20.00
    7581.695     0.956250       292646        22.86
    10100.735     0.962500       294559        26.67
    11550.719     0.968750       296472        32.00
    12312.575     0.971875       297438        35.56
    12984.319     0.975000       298387        40.00
    15941.631     0.978125       299345        45.71
    18038.783     0.981250       300308        53.33
    24608.767     0.984375       301268        64.00
    25100.287     0.985938       301748        71.11
    25460.735     0.987500       302227        80.00
    25804.799     0.989062       302695        91.43
    26017.791     0.990625       303194       106.67
    26312.703     0.992188       303654       128.00
    26427.391     0.992969       303911       142.22
    26542.079     0.993750       304139       160.00
    26722.303     0.994531       304361       182.86
    26836.991     0.995313       304599       213.33
    26951.679     0.996094       304862       256.00
    27017.215     0.996484       304959       284.44
    27148.287     0.996875       305079       320.00
    27279.359     0.997266       305204       365.71
    27344.895     0.997656       305335       426.67
    27410.431     0.998047       305457       512.00
    27443.199     0.998242       305507       568.89
    27475.967     0.998437       305560       640.00
    27541.503     0.998633       305626       731.43
    27901.951     0.998828       305678       853.33
    27983.871     0.999023       305753      1024.00
    28000.255     0.999121       305771      1137.78
    28033.023     0.999219       305802      1280.00
    28065.791     0.999316       305826      1462.86
    28114.943     0.999414       305858      1706.67
    28164.095     0.999512       305888      2048.00
    28196.863     0.999561       305903      2275.56
    28229.631     0.999609       305925      2560.00
    28246.015     0.999658       305936      2925.71
    28262.399     0.999707       305949      3413.33
    28295.167     0.999756       305960      4096.00
    28327.935     0.999780       305973      4551.11
    28344.319     0.999805       305981      5120.00
    28344.319     0.999829       305981      5851.43
    28360.703     0.999854       305989      6826.67
    28377.087     0.999878       305997      8192.00
    28393.471     0.999890       306002      9102.22
    28409.855     0.999902       306005     10240.00
    28459.007     0.999915       306011     11702.86
    28459.007     0.999927       306011     13653.33
    28475.391     0.999939       306020     16384.00
    28475.391     0.999945       306020     18204.44
    28475.391     0.999951       306020     20480.00
    28475.391     0.999957       306020     23405.71
    28491.775     0.999963       306027     27306.67
    28491.775     0.999969       306027     32768.00
    28491.775     0.999973       306027     36408.89
    28491.775     0.999976       306027     40960.00
    28491.775     0.999979       306027     46811.43
    28508.159     0.999982       306033     54613.33
    28508.159     1.000000       306033          inf
***
    #[Mean    =      998.730, StdDeviation   =     3959.188]
    #[Max     =    28491.776, Total count    =       306033]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
456682 requests in 1.00m, 29.18MB read

Socket errors: connect 0, read 0, write 0, timeout 583

Requests/sec:   7601.03

Transfer/sec:    497.33KB

> wrk -t 4 -c 64 -R 20000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

4 threads and 64 connections

Thread calibration: mean lat.: 4326.304ms, rate sampling interval: 14123ms

Thread calibration: mean lat.: 4246.124ms, rate sampling interval: 14286ms

Thread calibration: mean lat.: 4679.481ms, rate sampling interval: 15368ms

Thread calibration: mean lat.: 4106.762ms, rate sampling interval: 13959ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency      6.47s      1.59s    9.07s      67.85%
    Req/Sec      21.00      53.60   194.00      91.67%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    7.05s
    75.000%    7.48s
    90.000%    8.11s
    99.000%    8.96s
    99.900%    9.06s
    99.990%    9.08s
    99.999%    9.08s
    100.000%    9.08s

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

    2670.591     0.000000            1         1.00
    3815.423     0.100000          361         1.11
    4829.183     0.200000          722         1.25
    5902.335     0.300000         1082         1.43
    6844.415     0.400000         1444         1.67
    7045.119     0.500000         1808         2.00
    7127.039     0.550000         1988         2.22
    7217.151     0.600000         2172         2.50
    7294.975     0.650000         2350         2.86
    7376.895     0.700000         2531         3.33
    7479.295     0.750000         2710         4.00
    7548.927     0.775000         2798         4.44
    7639.039     0.800000         2885         5.00
    7774.207     0.825000         2975         5.71
    7917.567     0.850000         3066         6.67
    8011.775     0.875000         3156         8.00
    8060.927     0.887500         3202         8.89
    8105.983     0.900000         3246        10.00
    8175.615     0.912500         3292        11.43
    8245.247     0.925000         3336        13.33
    8359.935     0.937500         3380        16.00
    8437.759     0.943750         3405        17.78
    8503.295     0.950000         3425        20.00
    8577.023     0.956250         3449        22.86
    8650.751     0.962500         3472        26.67
    8724.479     0.968750         3495        32.00
    8757.247     0.971875         3505        35.56
    8790.015     0.975000         3516        40.00
    8830.975     0.978125         3528        45.71
    8863.743     0.981250         3539        53.33
    8896.511     0.984375         3549        64.00
    8921.087     0.985938         3557        71.11
    8937.471     0.987500         3562        80.00
    8953.855     0.989062         3567        91.43
    8970.239     0.990625         3572       106.67
    8986.623     0.992188         3577       128.00
    8994.815     0.992969         3580       142.22
    9003.007     0.993750         3583       160.00
    9019.391     0.994531         3588       182.86
    9027.583     0.995313         3590       213.33
    9035.775     0.996094         3593       256.00
    9035.775     0.996484         3593       284.44
    9043.967     0.996875         3595       320.00
    9052.159     0.997266         3598       365.71
    9052.159     0.997656         3598       426.67
    9052.159     0.998047         3598       512.00
    9060.351     0.998242         3601       568.89
    9060.351     0.998437         3601       640.00
    9060.351     0.998633         3601       731.43
    9060.351     0.998828         3601       853.33
    9068.543     0.999023         3603      1024.00
    9068.543     0.999121         3603      1137.78
    9068.543     0.999219         3603      1280.00
    9068.543     0.999316         3603      1462.86
    9068.543     0.999414         3603      1706.67
    9076.735     0.999512         3605      2048.00
    9076.735     1.000000         3605          inf
***
    #[Mean    =     6465.620, StdDeviation   =     1588.644]
    #[Max     =     9068.544, Total count    =         3605]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
14681 requests in 1.00m, 0.94MB read

Socket errors: connect 0, read 0, write 0, timeout 1818

Requests/sec:    244.20

Transfer/sec:     15.98KB

Запросы с использованием `ExecutorService` в 20 потока и 64 соединения в асинхронном режиме с использованием стека
-

> wrk -t 20 -c 64 -R 20000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

20 threads and 64 connections

Thread calibration: mean lat.: 0.950ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.940ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.922ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.950ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.888ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.000ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.966ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.038ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.931ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.933ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.884ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.979ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.981ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.951ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.971ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.011ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.939ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.994ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.925ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.945ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency     0.98ms     2.90ms  113.98ms      99.50%
    Req/Sec      1.05k     140.14    10.22k      90.37%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%  844.00us
    75.000%    1.13ms
    90.000%    1.33ms
    99.000%    1.59ms
    99.900%   57.31ms
    99.990%  102.21ms
    99.999%  112.51ms
    100.000%  114.05ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.014     0.000000            1         1.00
       0.368     0.100000       100433         1.11
       0.485     0.200000       200723         1.25
       0.600     0.300000       300691         1.43
       0.725     0.400000       400604         1.67
       0.844     0.500000       500056         2.00
       0.901     0.550000       550534         2.22
       0.956     0.600000       600189         2.50
       1.011     0.650000       649887         2.86
       1.068     0.700000       699813         3.33
       1.127     0.750000       750045         4.00
       1.157     0.775000       775411         4.44
       1.188     0.800000       800419         5.00
       1.220     0.825000       825126         5.71
       1.254     0.850000       849870         6.67
       1.293     0.875000       875276         8.00
       1.312     0.887500       887227         8.89
       1.333     0.900000       899876        10.00
       1.355     0.912500       912294        11.43
       1.379     0.925000       924939        13.33
       1.405     0.937500       937533        16.00
       1.418     0.943750       943719        17.78
       1.432     0.950000       950039        20.00
       1.446     0.956250       956201        22.86
       1.461     0.962500       962404        26.67
       1.478     0.968750       968418        32.00
       1.488     0.971875       971593        35.56
       1.499     0.975000       974783        40.00
       1.511     0.978125       977887        45.71
       1.525     0.981250       981028        53.33
       1.542     0.984375       984131        64.00
       1.551     0.985938       985615        71.11
       1.563     0.987500       987235        80.00
       1.577     0.989062       988746        91.43
       1.595     0.990625       990280       106.67
       1.624     0.992188       991869       128.00
       1.653     0.992969       992622       142.22
       1.887     0.993750       993393       160.00
       3.067     0.994531       994174       182.86
       4.331     0.995313       994957       213.33
       5.951     0.996094       995737       256.00
       7.275     0.996484       996127       284.44
       9.231     0.996875       996518       320.00
      11.711     0.997266       996907       365.71
      16.199     0.997656       997298       426.67
      23.599     0.998047       997689       512.00
      29.023     0.998242       997884       568.89
      34.335     0.998437       998081       640.00
      40.927     0.998633       998274       731.43
      49.759     0.998828       998469       853.33
      58.175     0.999023       998664      1024.00
      62.431     0.999121       998762      1137.78
      66.815     0.999219       998860      1280.00
      71.167     0.999316       998957      1462.86
      74.815     0.999414       999056      1706.67
      79.487     0.999512       999153      2048.00
      81.919     0.999561       999201      2275.56
      84.543     0.999609       999251      2560.00
      86.975     0.999658       999299      2925.71
      89.215     0.999707       999348      3413.33
      92.159     0.999756       999399      4096.00
      93.695     0.999780       999421      4551.11
      95.103     0.999805       999445      5120.00
      96.703     0.999829       999471      5851.43
      98.431     0.999854       999495      6826.67
     100.159     0.999878       999518      8192.00
     101.055     0.999890       999531      9102.22
     102.271     0.999902       999543     10240.00
     103.359     0.999915       999555     11702.86
     104.639     0.999927       999567     13653.33
     105.471     0.999939       999579     16384.00
     106.559     0.999945       999586     18204.44
     106.879     0.999951       999592     20480.00
     107.647     0.999957       999598     23405.71
     108.223     0.999963       999605     27306.67
     109.311     0.999969       999610     32768.00
     109.695     0.999973       999614     36408.89
     110.143     0.999976       999617     40960.00
     110.847     0.999979       999619     46811.43
     111.167     0.999982       999622     54613.33
     111.359     0.999985       999625     65536.00
     111.423     0.999986       999627     72817.78
     112.255     0.999988       999629     81920.00
     112.511     0.999989       999630     93622.86
     112.639     0.999991       999631    109226.67
     113.087     0.999992       999634    131072.00
     113.087     0.999993       999634    145635.56
     113.087     0.999994       999634    163840.00
     113.279     0.999995       999635    187245.71
     113.343     0.999995       999636    218453.33
     113.535     0.999996       999638    262144.00
     113.535     0.999997       999638    291271.11
     113.535     0.999997       999638    327680.00
     113.535     0.999997       999638    374491.43
     113.535     0.999998       999638    436906.67
     113.919     0.999998       999639    524288.00
     113.919     0.999998       999639    582542.22
     113.919     0.999998       999639    655360.00
     113.919     0.999999       999639    748982.86
     113.919     0.999999       999639    873813.33
     114.047     0.999999       999640   1048576.00
     114.047     1.000000       999640          inf
***
    #[Mean    =        0.981, StdDeviation   =        2.901]
    #[Max     =      113.984, Total count    =       999640]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1199863 requests in 1.00m, 76.67MB read

Requests/sec:  19998.99

Transfer/sec:      1.28MB

> wrk -t 20 -c 64 -R 30000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

20 threads and 64 connections

Thread calibration: mean lat.: 3.114ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.114ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.151ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.066ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.085ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.050ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.094ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.067ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 2.887ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.060ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.083ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.103ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.081ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.101ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.105ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.102ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.138ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.022ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.095ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 3.079ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency     0.90ms    13.87ms     4.10s      99.72%
    Req/Sec      1.35k     586.62    21.89k      87.14%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%  620.00us
    75.000%    0.90ms
    90.000%    1.04ms
    99.000%    1.35ms
    99.900%   89.21ms
    99.990%  123.14ms
    99.999%     2.70s
    100.000%    4.10s

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.015     0.000000            1         1.00
       0.174     0.100000       126616         1.11
       0.297     0.200000       252171         1.25
       0.399     0.300000       377470         1.43
       0.501     0.400000       503712         1.67
       0.620     0.500000       629850         2.00
       0.678     0.550000       692222         2.22
       0.738     0.600000       755117         2.50
       0.796     0.650000       817484         2.86
       0.853     0.700000       880480         3.33
       0.896     0.750000       943786         4.00
       0.910     0.775000       975219         4.44
       0.924     0.800000      1006739         5.00
       0.953     0.825000      1038458         5.71
       0.982     0.850000      1069843         6.67
       1.010     0.875000      1100462         8.00
       1.025     0.887500      1116752         8.89
       1.040     0.900000      1132467        10.00
       1.055     0.912500      1147918        11.43
       1.070     0.925000      1163515        13.33
       1.085     0.937500      1179402        16.00
       1.093     0.943750      1187225        17.78
       1.102     0.950000      1195445        20.00
       1.111     0.956250      1203199        22.86
       1.120     0.962500      1210774        26.67
       1.130     0.968750      1219016        32.00
       1.135     0.971875      1223041        35.56
       1.140     0.975000      1227019        40.00
       1.145     0.978125      1230554        45.71
       1.152     0.981250      1234572        53.33
       1.161     0.984375      1238357        64.00
       1.167     0.985938      1240186        71.11
       1.176     0.987500      1241995        80.00
       1.207     0.989062      1243909        91.43
       1.470     0.990625      1245880       106.67
       1.925     0.992188      1247840       128.00
       2.383     0.992969      1248819       142.22
       3.011     0.993750      1249801       160.00
       3.835     0.994531      1250784       182.86
       5.103     0.995313      1251767       213.33
       6.731     0.996094      1252749       256.00
       8.071     0.996484      1253240       284.44
      10.463     0.996875      1253731       320.00
      17.487     0.997266      1254223       365.71
      33.727     0.997656      1254714       426.67
      49.887     0.998047      1255205       512.00
      57.855     0.998242      1255452       568.89
      65.983     0.998437      1255699       640.00
      74.111     0.998633      1255942       731.43
      82.303     0.998828      1256190       853.33
      90.239     0.999023      1256434      1024.00
      94.079     0.999121      1256556      1137.78
      98.111     0.999219      1256679      1280.00
     102.335     0.999316      1256806      1462.86
     106.175     0.999414      1256925      1706.67
     109.951     0.999512      1257047      2048.00
     111.935     0.999561      1257110      2275.56
     113.663     0.999609      1257174      2560.00
     115.391     0.999658      1257234      2925.71
     116.991     0.999707      1257296      3413.33
     118.527     0.999756      1257355      4096.00
     119.295     0.999780      1257388      4551.11
     120.127     0.999805      1257418      5120.00
     120.895     0.999829      1257449      5851.43
     121.471     0.999854      1257477      6826.67
     122.431     0.999878      1257510      8192.00
     122.879     0.999890      1257524      9102.22
     123.199     0.999902      1257540     10240.00
     123.583     0.999915      1257554     11702.86
     124.031     0.999927      1257569     13653.33
     124.735     0.999939      1257588     16384.00
     124.863     0.999945      1257592     18204.44
     125.247     0.999951      1257600     20480.00
     126.399     0.999957      1257608     23405.71
     126.911     0.999963      1257615     27306.67
     301.567     0.999969      1257623     32768.00
     761.343     0.999973      1257627     36408.89
     887.295     0.999976      1257632     40960.00
     977.919     0.999979      1257635     46811.43
    1569.791     0.999982      1257638     54613.33
    2015.231     0.999985      1257642     65536.00
    2285.567     0.999986      1257644     72817.78
    2607.103     0.999988      1257646     81920.00
    2695.167     0.999989      1257649     93622.86
    2811.903     0.999991      1257650    109226.67
    3182.591     0.999992      1257652    131072.00
    3256.319     0.999993      1257653    145635.56
    3336.191     0.999994      1257654    163840.00
    3411.967     0.999995      1257655    187245.71
    3557.375     0.999995      1257656    218453.33
    3643.391     0.999996      1257657    262144.00
    3643.391     0.999997      1257657    291271.11
    3803.135     0.999997      1257658    327680.00
    3803.135     0.999997      1257658    374491.43
    3868.671     0.999998      1257659    436906.67
    3868.671     0.999998      1257659    524288.00
    3868.671     0.999998      1257659    582542.22
    4098.047     0.999998      1257661    655360.00
    4098.047     1.000000      1257661          inf
***
    #[Mean    =        0.897, StdDeviation   =       13.872]
    #[Max     =     4096.000, Total count    =      1257661]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1553421 requests in 1.00m, 99.26MB read

Socket errors: connect 0, read 0, write 0, timeout 198

Requests/sec:  25878.99

Transfer/sec:      1.65MB

> wrk -t 20 -c 64 -R 15000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

20 threads and 64 connections

Thread calibration: mean lat.: 0.858ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.927ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.861ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.878ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.894ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.937ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.945ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.922ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.950ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.032ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.005ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.800ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.908ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.912ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.871ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.934ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.990ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.832ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.932ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.974ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency   634.14ms      2.42s   23.35s      96.58%
    Req/Sec     379.03      1.09k   32.44k      97.91%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    1.00ms
    75.000%  102.40ms
    90.000%     1.57s
    99.000%    15.20s
    99.900%    22.68s
    99.990%    23.13s
    99.999%    23.35s
    100.000%   23.36s

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.015     0.000000            1         1.00
       0.358     0.100000        36401         1.11
       0.552     0.200000        72822         1.25
       0.702     0.300000       109405         1.43
       0.846     0.400000       145601         1.67
       1.003     0.500000       182095         2.00
       1.092     0.550000       200195         2.22
       1.196     0.600000       218387         2.50
       1.490     0.650000       236505         2.86
      45.343     0.700000       254695         3.33
     102.399     0.750000       272890         4.00
     224.127     0.775000       281973         4.44
     427.775     0.800000       291071         5.00
     652.799     0.825000       300182         5.71
     910.847     0.850000       309269         6.67
    1231.871     0.875000       318357         8.00
    1406.975     0.887500       322927         8.89
    1570.815     0.900000       327476        10.00
    1738.751     0.912500       332004        11.43
    1942.527     0.925000       336553        13.33
    2144.255     0.937500       341106        16.00
    2246.655     0.943750       343373        17.78
    2351.103     0.950000       345684        20.00
    2506.751     0.956250       347929        22.86
    2803.711     0.962500       350196        26.67
    3293.183     0.968750       352474        32.00
    3739.647     0.971875       353604        35.56
    5369.855     0.975000       354744        40.00
    6778.879     0.978125       355881        45.71
    7938.047     0.981250       357015        53.33
    12738.559     0.984375       358153        64.00
    13729.791     0.985938       358720        71.11
    14327.807     0.987500       359290        80.00
    14876.671     0.989062       359857        91.43
    16056.319     0.990625       360426       106.67
    17334.271     0.992188       360999       128.00
    17858.559     0.992969       361280       142.22
    19300.351     0.993750       361563       160.00
    19677.183     0.994531       361849       182.86
    20447.231     0.995313       362144       213.33
    21544.959     0.996094       362426       256.00
    21676.031     0.996484       362562       284.44
    21823.487     0.996875       362700       320.00
    22003.711     0.997266       362848       365.71
    22102.015     0.997656       362988       426.67
    22347.775     0.998047       363138       512.00
    22396.927     0.998242       363208       568.89
    22462.463     0.998437       363275       640.00
    22544.383     0.998633       363353       731.43
    22593.535     0.998828       363420       853.33
    22675.455     0.999023       363481      1024.00
    22708.223     0.999121       363530      1137.78
    22724.607     0.999219       363553      1280.00
    22757.375     0.999316       363593      1462.86
    22790.143     0.999414       363629      1706.67
    22839.295     0.999512       363660      2048.00
    22872.063     0.999561       363681      2275.56
    22888.447     0.999609       363694      2560.00
    22937.599     0.999658       363722      2925.71
    22953.983     0.999707       363730      3413.33
    23003.135     0.999756       363753      4096.00
    23019.519     0.999780       363757      4551.11
    23035.903     0.999805       363766      5120.00
    23052.287     0.999829       363774      5851.43
    23085.055     0.999854       363789      6826.67
    23101.439     0.999878       363793      8192.00
    23117.823     0.999890       363797      9102.22
    23134.207     0.999902       363801     10240.00
    23150.591     0.999915       363806     11702.86
    23166.975     0.999927       363810     13653.33
    23248.895     0.999939       363817     16384.00
    23248.895     0.999945       363817     18204.44
    23265.279     0.999951       363822     20480.00
    23265.279     0.999957       363822     23405.71
    23281.663     0.999963       363824     27306.67
    23314.431     0.999969       363826     32768.00
    23330.815     0.999973       363830     36408.89
    23330.815     0.999976       363830     40960.00
    23330.815     0.999979       363830     46811.43
    23330.815     0.999982       363830     54613.33
    23347.199     0.999985       363834     65536.00
    23347.199     0.999986       363834     72817.78
    23347.199     0.999988       363834     81920.00
    23347.199     0.999989       363834     93622.86
    23347.199     0.999991       363834    109226.67
    23347.199     0.999992       363834    131072.00
    23347.199     0.999993       363834    145635.56
    23347.199     0.999994       363834    163840.00
    23363.583     0.999995       363836    187245.71
    23363.583     1.000000       363836          inf
***
    #[Mean    =      634.141, StdDeviation   =     2418.151]
    #[Max     =    23347.200, Total count    =       363836]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
513996 requests in 1.00m, 32.84MB read

Socket errors: connect 0, read 0, write 0, timeout 458

Requests/sec:   8564.14

Transfer/sec:    560.35KB

> wrk -t 20 -c 64 -R 20000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

20 threads and 64 connections

Thread calibration: mean lat.: 1.587ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.603ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.589ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.597ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.637ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.597ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.547ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.538ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.605ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.611ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.535ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.555ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.576ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.598ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.557ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.581ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.609ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.528ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.602ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.635ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.15s     3.73s   30.28s    94.94%
    Req/Sec   337.58      1.27k   34.33k    97.50%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    1.28ms
    75.000%  772.09ms
    90.000%     2.06s
    99.000%    22.76s
    99.900%    29.88s
    99.990%    30.26s
    99.999%    30.28s
    100.000%   30.29s

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.015     0.000000            1         1.00
       0.353     0.100000        32056         1.11
       0.570     0.200000        64001         1.25
       0.785     0.300000        95978         1.43
       1.000     0.400000       128076         1.67
       1.283     0.500000       159947         2.00
      32.895     0.550000       175917         2.22
      75.327     0.600000       191909         2.50
     187.007     0.650000       207912         2.86
     387.583     0.700000       223908         3.33
     772.095     0.750000       239901         4.00
     977.407     0.775000       247887         4.44
    1184.767     0.800000       255907         5.00
    1414.143     0.825000       263901         5.71
    1627.135     0.850000       271901         6.67
    1822.719     0.875000       279885         8.00
    1943.551     0.887500       283875         8.89
    2062.335     0.900000       287889        10.00
    2195.455     0.912500       291887        11.43
    2308.095     0.925000       295922        13.33
    2637.823     0.937500       299862        16.00
    2938.879     0.943750       301867        17.78
    5722.111     0.950000       303860        20.00
    7069.695     0.956250       305855        22.86
    7901.183     0.962500       307862        26.67
    9576.447     0.968750       309855        32.00
    10862.591     0.971875       310856        35.56
    12263.423     0.975000       311853        40.00
    13221.887     0.978125       312862        45.71
    20545.535     0.981250       313851        53.33
    21397.503     0.984375       314856        64.00
    21676.031     0.985938       315351        71.11
    22200.319     0.987500       315868        80.00
    22577.151     0.989062       316363        91.43
    22888.447     0.990625       316865       106.67
    24068.095     0.992188       317367       128.00
    27197.439     0.992969       317608       142.22
    27672.575     0.993750       317850       160.00
    28131.327     0.994531       318105       182.86
    28246.015     0.995313       318396       213.33
    28360.703     0.996094       318605       256.00
    28426.239     0.996484       318733       284.44
    28508.159     0.996875       318872       320.00
    28557.311     0.997266       318979       365.71
    28639.231     0.997656       319099       426.67
    28721.151     0.998047       319236       512.00
    28770.303     0.998242       319293       568.89
    28835.839     0.998437       319351       640.00
    29343.743     0.998633       319419       731.43
    29540.351     0.998828       319479       853.33
    29884.415     0.999023       319542      1024.00
    29900.799     0.999121       319571      1137.78
    29917.183     0.999219       319601      1280.00
    29949.951     0.999316       319640      1462.86
    29982.719     0.999414       319661      1706.67
    30031.871     0.999512       319704      2048.00
    30048.255     0.999561       319723      2275.56
    30064.639     0.999609       319740      2560.00
    30064.639     0.999658       319740      2925.71
    30179.327     0.999707       319760      3413.33
    30195.711     0.999756       319771      4096.00
    30212.095     0.999780       319782      4551.11
    30228.479     0.999805       319798      5120.00
    30228.479     0.999829       319798      5851.43
    30244.863     0.999854       319815      6826.67
    30244.863     0.999878       319815      8192.00
    30244.863     0.999890       319815      9102.22
    30261.247     0.999902       319832     10240.00
    30261.247     0.999915       319832     11702.86
    30261.247     0.999927       319832     13653.33
    30261.247     0.999939       319832     16384.00
    30261.247     0.999945       319832     18204.44
    30277.631     0.999951       319846     20480.00
    30277.631     0.999957       319846     23405.71
    30277.631     0.999963       319846     27306.67
    30277.631     0.999969       319846     32768.00
    30277.631     0.999973       319846     36408.89
    30277.631     0.999976       319846     40960.00
    30277.631     0.999979       319846     46811.43
    30277.631     0.999982       319846     54613.33
    30277.631     0.999985       319846     65536.00
    30277.631     0.999986       319846     72817.78
    30277.631     0.999988       319846     81920.00
    30277.631     0.999989       319846     93622.86
    30277.631     0.999991       319846    109226.67
    30277.631     0.999992       319846    131072.00
    30277.631     0.999993       319846    145635.56
    30294.015     0.999994       319848    163840.00
    30294.015     1.000000       319848          inf
***
    #[Mean    =     1145.537, StdDeviation   =     3733.646]
    #[Max     =    30277.632, Total count    =       319848]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
520052 requests in 1.00m, 33.23MB read

Socket errors: connect 0, read 0, write 0, timeout 676

Requests/sec:   8664.68

Transfer/sec:    566.93KB

Запросы с использованием 'ExecutorService' в 64 потока и 64 соединения в асинхронном режиме с использованием стека
-

> wrk -t 64 -c 64 -R 20000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

64 threads and 64 connections

Thread calibration: mean lat.: 0.816ms, rate sampling interval: 10ms

...

Thread calibration: mean lat.: 0.748ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency   684.62us   329.80us   16.24ms      65.60%
    Req/Sec     331.45      36.69     0.89k      84.04%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%  684.00us
    75.000%    0.93ms
    90.000%    1.09ms
    99.000%    1.20ms
    99.900%    1.65ms
    99.990%   10.01ms
    99.999%   14.04ms
    100.000%  16.25ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.026     0.000000            1         1.00
       0.275     0.100000       100603         1.11
       0.379     0.200000       200764         1.25
       0.482     0.300000       299986         1.43
       0.584     0.400000       399985         1.67
       0.684     0.500000       500780         2.00
       0.732     0.550000       550031         2.22
       0.781     0.600000       600339         2.50
       0.830     0.650000       649912         2.86
       0.881     0.700000       700796         3.33
       0.931     0.750000       750682         4.00
       0.957     0.775000       775678         4.44
       0.982     0.800000       799966         5.00
       1.008     0.825000       824924         5.71
       1.035     0.850000       850599         6.67
       1.061     0.875000       875597         8.00
       1.073     0.887500       887304         8.89
       1.086     0.900000       899930        10.00
       1.099     0.912500       912794        11.43
       1.112     0.925000       925522        13.33
       1.124     0.937500       937378        16.00
       1.131     0.943750       944450        17.78
       1.137     0.950000       950444        20.00
       1.143     0.956250       956219        22.86
       1.150     0.962500       962311        26.67
       1.159     0.968750       968919        32.00
       1.163     0.971875       971620        35.56
       1.169     0.975000       975330        40.00
       1.174     0.978125       978170        45.71
       1.180     0.981250       981206        53.33
       1.187     0.984375       984248        64.00
       1.191     0.985938       985836        71.11
       1.196     0.987500       987591        80.00
       1.200     0.989062       988933        91.43
       1.205     0.990625       990419       106.67
       1.211     0.992188       991967       128.00
       1.215     0.992969       992832       142.22
       1.219     0.993750       993577       160.00
       1.223     0.994531       994285       182.86
       1.229     0.995313       995146       213.33
       1.235     0.996094       995893       256.00
       1.239     0.996484       996289       284.44
       1.243     0.996875       996642       320.00
       1.248     0.997266       997040       365.71
       1.254     0.997656       997424       426.67
       1.262     0.998047       997810       512.00
       1.268     0.998242       997989       568.89
       1.276     0.998437       998180       640.00
       1.292     0.998633       998377       731.43
       1.354     0.998828       998563       853.33
       1.699     0.999023       998758      1024.00
       1.918     0.999121       998857      1137.78
       2.145     0.999219       998953      1280.00
       2.349     0.999316       999051      1462.86
       2.591     0.999414       999150      1706.67
       2.909     0.999512       999246      2048.00
       3.053     0.999561       999295      2275.56
       3.223     0.999609       999344      2560.00
       3.443     0.999658       999394      2925.71
       3.709     0.999707       999442      3413.33
       4.315     0.999756       999490      4096.00
       5.359     0.999780       999516      4551.11
       6.031     0.999805       999539      5120.00
       7.331     0.999829       999565      5851.43
       8.191     0.999854       999588      6826.67
       9.015     0.999878       999612      8192.00
       9.759     0.999890       999625      9102.22
      10.151     0.999902       999637     10240.00
      10.671     0.999915       999649     11702.86
      10.919     0.999927       999661     13653.33
      11.231     0.999939       999673     16384.00
      11.479     0.999945       999680     18204.44
      11.695     0.999951       999686     20480.00
      12.095     0.999957       999692     23405.71
      12.287     0.999963       999698     27306.67
      12.767     0.999969       999705     32768.00
      12.911     0.999973       999707     36408.89
      13.071     0.999976       999710     40960.00
      13.367     0.999979       999713     46811.43
      13.599     0.999982       999716     54613.33
      13.767     0.999985       999719     65536.00
      13.879     0.999986       999721     72817.78
      13.959     0.999988       999722     81920.00
      14.039     0.999989       999724     93622.86
      14.111     0.999991       999725    109226.67
      14.415     0.999992       999727    131072.00
      14.559     0.999993       999728    145635.56
      14.559     0.999994       999728    163840.00
      14.727     0.999995       999729    187245.71
      14.919     0.999995       999730    218453.33
      15.167     0.999996       999731    262144.00
      15.167     0.999997       999731    291271.11
      15.167     0.999997       999731    327680.00
      15.775     0.999997       999732    374491.43
      15.775     0.999998       999732    436906.67
      16.079     0.999998       999733    524288.00
      16.079     0.999998       999733    582542.22
      16.079     0.999998       999733    655360.00
      16.079     0.999999       999733    748982.86
      16.079     0.999999       999733    873813.33
      16.247     0.999999       999734   1048576.00
      16.247     1.000000       999734          inf
***
    #[Mean    =        0.685, StdDeviation   =        0.330]
    #[Max     =       16.240, Total count    =       999734]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1199920 requests in 1.00m, 76.67MB read

Requests/sec:  20003.44

Transfer/sec:      1.28MB

> wrk -t 64 -c 64 -R 15000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

64 threads and 64 connections

Thread calibration: mean lat.: 0.732ms, rate sampling interval: 10ms

...

Thread calibration: mean lat.: 0.748ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency   686.40us   376.01us  21.23ms      74.34%
    Req/Sec     244.63      49.60   800.00      64.11%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%  677.00us
    75.000%    0.93ms
    90.000%    1.08ms
    99.000%    1.24ms
    99.900%    3.01ms
    99.990%   10.87ms
    99.999%   16.94ms
    100.000%  21.25ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.020     0.000000            1         1.00
       0.270     0.100000        75131         1.11
       0.372     0.200000       150055         1.25
       0.474     0.300000       225004         1.43
       0.576     0.400000       300518         1.67
       0.677     0.500000       375403         2.00
       0.727     0.550000       412633         2.22
       0.777     0.600000       449952         2.50
       0.828     0.650000       487482         2.86
       0.879     0.700000       525210         3.33
       0.930     0.750000       562780         4.00
       0.955     0.775000       581143         4.44
       0.981     0.800000       600147         5.00
       1.006     0.825000       618852         5.71
       1.031     0.850000       637398         6.67
       1.057     0.875000       656584         8.00
       1.070     0.887500       666074         8.89
       1.083     0.900000       675263        10.00
       1.097     0.912500       684733        11.43
       1.111     0.925000       693838        13.33
       1.126     0.937500       703486        16.00
       1.133     0.943750       707801        17.78
       1.141     0.950000       712633        20.00
       1.150     0.956250       717529        22.86
       1.159     0.962500       721845        26.67
       1.171     0.968750       726768        32.00
       1.177     0.971875       728989        35.56
       1.184     0.975000       731384        40.00
       1.191     0.978125       733505        45.71
       1.200     0.981250       736017        53.33
       1.210     0.984375       738224        64.00
       1.216     0.985938       739348        71.11
       1.224     0.987500       740596        80.00
       1.233     0.989062       741703        91.43
       1.246     0.990625       742829       106.67
       1.272     0.992188       743991       128.00
       1.312     0.992969       744578       142.22
       1.416     0.993750       745159       160.00
       1.557     0.994531       745743       182.86
       1.713     0.995313       746333       213.33
       1.884     0.996094       746913       256.00
       1.977     0.996484       747207       284.44
       2.071     0.996875       747504       320.00
       2.165     0.997266       747799       365.71
       2.289     0.997656       748087       426.67
       2.417     0.998047       748378       512.00
       2.491     0.998242       748528       568.89
       2.571     0.998437       748674       640.00
       2.673     0.998633       748818       731.43
       2.809     0.998828       748965       853.33
       3.057     0.999023       749111      1024.00
       3.287     0.999121       749183      1137.78
       3.585     0.999219       749258      1280.00
       4.009     0.999316       749330      1462.86
       4.627     0.999414       749403      1706.67
       5.399     0.999512       749476      2048.00
       6.067     0.999561       749514      2275.56
       6.555     0.999609       749550      2560.00
       7.019     0.999658       749586      2925.71
       7.743     0.999707       749623      3413.33
       8.495     0.999756       749659      4096.00
       8.895     0.999780       749678      4551.11
       9.287     0.999805       749696      5120.00
       9.743     0.999829       749714      5851.43
      10.151     0.999854       749733      6826.67
      10.567     0.999878       749751      8192.00
      10.791     0.999890       749761      9102.22
      10.935     0.999902       749769     10240.00
      11.343     0.999915       749778     11702.86
      11.831     0.999927       749788     13653.33
      12.815     0.999939       749797     16384.00
      12.943     0.999945       749801     18204.44
      13.655     0.999951       749806     20480.00
      14.031     0.999957       749810     23405.71
      14.559     0.999963       749815     27306.67
      14.887     0.999969       749820     32768.00
      15.039     0.999973       749822     36408.89
      15.191     0.999976       749824     40960.00
      15.367     0.999979       749827     46811.43
      15.599     0.999982       749829     54613.33
      15.783     0.999985       749831     65536.00
      15.863     0.999986       749832     72817.78
      16.015     0.999988       749833     81920.00
      16.623     0.999989       749834     93622.86
      17.119     0.999991       749836    109226.67
      17.199     0.999992       749837    131072.00
      17.199     0.999993       749837    145635.56
      17.567     0.999994       749838    163840.00
      17.567     0.999995       749838    187245.71
      17.695     0.999995       749839    218453.33
      18.719     0.999996       749840    262144.00
      18.719     0.999997       749840    291271.11
      18.719     0.999997       749840    327680.00
      18.719     0.999997       749840    374491.43
      18.751     0.999998       749841    436906.67
      18.751     0.999998       749841    524288.00
      18.751     0.999998       749841    582542.22
      18.751     0.999998       749841    655360.00
      18.751     0.999999       749841    748982.86
      21.247     0.999999       749842    873813.33
      21.247     1.000000       749842          inf
***
    #[Mean    =        0.686, StdDeviation   =        0.376]
    #[Max     =       21.232, Total count    =       749842]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
899986 requests in 1.00m, 58.27MB read

Requests/sec:  15000.97

Transfer/sec:      0.97MB

Запросы с использованием `ExecutorService` в 20 потоков и 64 соединения в асинхронном режиме с использованием очереди
-

> wrk -t 20 -c 64 -R 20000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

20 threads and 64 connections

Thread calibration: mean lat.: 0.913ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.005ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.996ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.915ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.932ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.055ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.966ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.049ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.039ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.902ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.933ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.877ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.955ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.917ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.976ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.991ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.937ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.008ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.064ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 0.994ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency     0.92ms     1.11ms   40.99ms      99.36%
    Req/Sec      1.05k     114.92     5.00k      88.98%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    0.86ms
    75.000%    1.14ms
    90.000%    1.34ms
    99.000%    1.60ms
    99.900%   19.77ms
    99.990%   35.10ms
    99.999%   38.17ms
    100.000%  41.02ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.022     0.000000            1         1.00
       0.383     0.100000        99991         1.11
       0.498     0.200000       200548         1.25
       0.618     0.300000       300558         1.43
       0.747     0.400000       400623         1.67
       0.862     0.500000       499879         2.00
       0.918     0.550000       549920         2.22
       0.973     0.600000       600191         2.50
       1.028     0.650000       650373         2.86
       1.084     0.700000       700008         3.33
       1.142     0.750000       750356         4.00
       1.170     0.775000       775327         4.44
       1.199     0.800000       800139         5.00
       1.230     0.825000       825337         5.71
       1.263     0.850000       850242         6.67
       1.299     0.875000       875168         8.00
       1.318     0.887500       887407         8.89
       1.338     0.900000       899811        10.00
       1.360     0.912500       912472        11.43
       1.383     0.925000       924920        13.33
       1.407     0.937500       937346        16.00
       1.420     0.943750       943726        17.78
       1.433     0.950000       949790        20.00
       1.447     0.956250       956058        22.86
       1.463     0.962500       962319        26.67
       1.481     0.968750       968479        32.00
       1.492     0.971875       971794        35.56
       1.503     0.975000       974725        40.00
       1.517     0.978125       977843        45.71
       1.532     0.981250       981032        53.33
       1.550     0.984375       984188        64.00
       1.560     0.985938       985686        71.11
       1.572     0.987500       987219        80.00
       1.587     0.989062       988739        91.43
       1.607     0.990625       990289       106.67
       1.641     0.992188       991860       128.00
       1.683     0.992969       992632       142.22
       2.195     0.993750       993416       160.00
       3.159     0.994531       994192       182.86
       4.271     0.995313       994975       213.33
       5.627     0.996094       995754       256.00
       6.835     0.996484       996143       284.44
       8.319     0.996875       996535       320.00
      10.047     0.997266       996924       365.71
      11.959     0.997656       997315       426.67
      14.031     0.998047       997705       512.00
      15.175     0.998242       997900       568.89
      16.215     0.998437       998097       640.00
      17.311     0.998633       998291       731.43
      18.575     0.998828       998487       853.33
      19.967     0.999023       998681      1024.00
      20.607     0.999121       998780      1137.78
      21.455     0.999219       998880      1280.00
      22.575     0.999316       998974      1462.86
      23.903     0.999414       999072      1706.67
      25.391     0.999512       999169      2048.00
      26.159     0.999561       999219      2275.56
      26.991     0.999609       999267      2560.00
      27.951     0.999658       999316      2925.71
      28.895     0.999707       999365      3413.33
      30.367     0.999756       999414      4096.00
      31.055     0.999780       999438      4551.11
      31.919     0.999805       999462      5120.00
      32.991     0.999829       999488      5851.43
      33.535     0.999854       999511      6826.67
      34.367     0.999878       999535      8192.00
      34.783     0.999890       999548      9102.22
      35.231     0.999902       999560     10240.00
      35.711     0.999915       999572     11702.86
      36.159     0.999927       999584     13653.33
      36.447     0.999939       999597     16384.00
      36.607     0.999945       999603     18204.44
      36.895     0.999951       999609     20480.00
      37.055     0.999957       999615     23405.71
      37.279     0.999963       999622     27306.67
      37.343     0.999969       999627     32768.00
      37.439     0.999973       999630     36408.89
      37.535     0.999976       999634     40960.00
      37.599     0.999979       999637     46811.43
      37.631     0.999982       999639     54613.33
      37.791     0.999985       999642     65536.00
      37.951     0.999986       999644     72817.78
      38.015     0.999988       999646     81920.00
      38.175     0.999989       999648     93622.86
      38.175     0.999991       999648    109226.67
      39.263     0.999992       999650    131072.00
      39.327     0.999993       999651    145635.56
      39.327     0.999994       999651    163840.00
      39.903     0.999995       999652    187245.71
      40.127     0.999995       999653    218453.33
      40.479     0.999996       999654    262144.00
      40.479     0.999997       999654    291271.11
      40.479     0.999997       999654    327680.00
      40.703     0.999997       999655    374491.43
      40.703     0.999998       999655    436906.67
      40.863     0.999998       999656    524288.00
      40.863     0.999998       999656    582542.22
      40.863     0.999998       999656    655360.00
      40.863     0.999999       999656    748982.86
      40.863     0.999999       999656    873813.33
      41.023     0.999999       999657   1048576.00
      41.023     1.000000       999657          inf
***
    #[Mean    =        0.918, StdDeviation   =        1.107]
    #[Max     =       40.992, Total count    =       999657]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1199881 requests in 1.00m, 76.67MB read

Requests/sec:  19998.76

Transfer/sec:      1.28MB

> wrk -t 20 -c 64 -R 30000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

20 threads and 64 connections

Thread calibration: mean lat.: 1.514ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.523ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.444ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.437ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.526ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.447ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.481ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.509ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.484ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.396ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.433ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.435ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.479ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.532ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.470ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.536ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.476ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.476ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.473ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.525ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev       Max   +/- Stdev
    Latency     1.12ms     5.42ms  160.13ms      99.25%
    Req/Sec      1.60k     343.33    25.67k      98.24%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%  787.00us
    75.000%    1.08ms
    90.000%    1.25ms
    99.000%    4.06ms
    99.900%  112.64ms
    99.990%  154.11ms
    99.999%  158.34ms
    100.000% 160.26ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.015     0.000000            1         1.00
       0.296     0.100000       150802         1.11
       0.410     0.200000       301033         1.25
       0.536     0.300000       450337         1.43
       0.668     0.400000       600369         1.67
       0.787     0.500000       750576         2.00
       0.845     0.550000       825375         2.22
       0.904     0.600000       900090         2.50
       0.962     0.650000       975583         2.86
       1.020     0.700000      1050371         3.33
       1.079     0.750000      1125713         4.00
       1.107     0.775000      1162400         4.44
       1.135     0.800000      1200106         5.00
       1.163     0.825000      1237716         5.71
       1.192     0.850000      1275556         6.67
       1.222     0.875000      1312287         8.00
       1.238     0.887500      1330837         8.89
       1.255     0.900000      1349934        10.00
       1.273     0.912500      1368924        11.43
       1.292     0.925000      1387539        13.33
       1.313     0.937500      1406519        16.00
       1.324     0.943750      1415670        17.78
       1.336     0.950000      1424906        20.00
       1.350     0.956250      1434412        22.86
       1.365     0.962500      1443280        26.67
       1.385     0.968750      1452721        32.00
       1.398     0.971875      1457627        35.56
       1.412     0.975000      1462043        40.00
       1.431     0.978125      1466742        45.71
       1.457     0.981250      1471352        53.33
       1.513     0.984375      1476044        64.00
       1.618     0.985938      1478368        71.11
       2.313     0.987500      1480709        80.00
       3.389     0.989062      1483050        91.43
       4.523     0.990625      1485394       106.67
       6.123     0.992188      1487738       128.00
       7.603     0.992969      1488908       142.22
       9.743     0.993750      1490081       160.00
      12.311     0.994531      1491252       182.86
      15.319     0.995313      1492422       213.33
      18.943     0.996094      1493594       256.00
      21.743     0.996484      1494180       284.44
      25.775     0.996875      1494765       320.00
      33.503     0.997266      1495351       365.71
      49.311     0.997656      1495938       426.67
      67.647     0.998047      1496522       512.00
      76.863     0.998242      1496817       568.89
      86.079     0.998437      1497109       640.00
      95.359     0.998633      1497401       731.43
     104.383     0.998828      1497694       853.33
     113.727     0.999023      1497987      1024.00
     118.463     0.999121      1498136      1137.78
     123.007     0.999219      1498281      1280.00
     127.423     0.999316      1498425      1462.86
     132.223     0.999414      1498574      1706.67
     136.575     0.999512      1498719      2048.00
     138.879     0.999561      1498794      2275.56
     141.311     0.999609      1498871      2560.00
     143.359     0.999658      1498939      2925.71
     145.535     0.999707      1499013      3413.33
     147.455     0.999756      1499085      4096.00
     148.607     0.999780      1499127      4551.11
     149.887     0.999805      1499160      5120.00
     151.039     0.999829      1499196      5851.43
     152.191     0.999854      1499238      6826.67
     153.087     0.999878      1499267      8192.00
     153.727     0.999890      1499286      9102.22
     154.239     0.999902      1499307     10240.00
     154.879     0.999915      1499322     11702.86
     155.263     0.999927      1499341     13653.33
     156.031     0.999939      1499363     16384.00
     156.159     0.999945      1499369     18204.44
     156.543     0.999951      1499379     20480.00
     156.799     0.999957      1499386     23405.71
     157.055     0.999963      1499396     27306.67
     157.311     0.999969      1499408     32768.00
     157.439     0.999973      1499413     36408.89
     157.567     0.999976      1499415     40960.00
     157.695     0.999979      1499420     46811.43
     157.951     0.999982      1499426     54613.33
     158.079     0.999985      1499431     65536.00
     158.079     0.999986      1499431     72817.78
     158.207     0.999988      1499433     81920.00
     158.335     0.999989      1499436     93622.86
     158.463     0.999991      1499437    109226.67
     158.591     0.999992      1499439    131072.00
     158.719     0.999993      1499441    145635.56
     158.719     0.999994      1499441    163840.00
     158.847     0.999995      1499444    187245.71
     158.847     0.999995      1499444    218453.33
     158.975     0.999996      1499447    262144.00
     158.975     0.999997      1499447    291271.11
     158.975     0.999997      1499447    327680.00
     158.975     0.999997      1499447    374491.43
     158.975     0.999998      1499447    436906.67
     159.231     0.999998      1499449    524288.00
     159.231     0.999998      1499449    582542.22
     159.231     0.999998      1499449    655360.00
     159.231     0.999999      1499449    748982.86
     159.231     0.999999      1499449    873813.33
     159.231     0.999999      1499449   1048576.00
     159.231     0.999999      1499449   1165084.44
     159.231     0.999999      1499449   1310720.00
     159.231     0.999999      1499449   1497965.71
     160.255     0.999999      1499450   1747626.67
     160.255     1.000000      1499450          inf
***
    #[Mean    =        1.116, StdDeviation   =        5.418]
    #[Max     =      160.128, Total count    =      1499450]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1799763 requests in 1.00m, 115.00MB read

Requests/sec:  29998.60

Transfer/sec:      1.92MB

> wrk -t 20 -c 64 -R 15000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

20 threads and 64 connections

Thread calibration: mean lat.: 1.440ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.486ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.473ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.561ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.575ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.446ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.483ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.500ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.374ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.403ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.417ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.384ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.521ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.502ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.493ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.464ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.452ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.431ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.449ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.481ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency   604.66ms      2.52s   22.28s      95.68%
    Req/Sec     410.67      1.01k   32.78k      97.63%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    1.03ms
    75.000%   42.40ms
    90.000%  796.16ms
    99.000%   16.91s
    99.900%   18.51s
    99.990%   20.35s
    99.999%   20.48s
    100.000%  22.30s

Detailed Percentile spectrum:
    
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.014     0.000000            1         1.00
       0.391     0.100000        39288         1.11
       0.557     0.200000        78561         1.25
       0.717     0.300000       117652         1.43
       0.874     0.400000       156846         1.67
       1.033     0.500000       196152         2.00
       1.113     0.550000       215564         2.22
       1.204     0.600000       235103         2.50
       1.348     0.650000       254721         2.86
       3.435     0.700000       274274         3.33
      42.431     0.750000       293885         4.00
      62.527     0.775000       303663         4.44
      82.815     0.800000       313466         5.00
     208.383     0.825000       323252         5.71
     391.935     0.850000       333047         6.67
     583.167     0.875000       342861         8.00
     669.183     0.887500       347748         8.89
     796.159     0.900000       352641        10.00
     934.399     0.912500       357537        11.43
    1072.127     0.925000       362448        13.33
    1279.999     0.937500       367339        16.00
    1473.535     0.943750       369783        17.78
    1689.599     0.950000       372231        20.00
    2291.711     0.956250       374681        22.86
    5914.623     0.962500       377126        26.67
    7172.095     0.968750       379577        32.00
    7577.599     0.971875       380814        35.56
    7802.879     0.975000       382040        40.00
    10600.447     0.978125       383262        45.71
    12328.959     0.981250       384476        53.33
    13639.679     0.984375       385708        64.00
    15253.503     0.985938       386310        71.11
    16531.455     0.987500       386939        80.00
    16736.255     0.989062       387552        91.43
    17006.591     0.990625       388184       106.67
    17301.503     0.992188       388797       128.00
    17416.191     0.992969       389070       142.22
    17547.263     0.993750       389400       160.00
    17678.335     0.994531       389697       182.86
    17956.863     0.995313       389999       213.33
    18071.551     0.996094       390327       256.00
    18120.703     0.996484       390468       284.44
    18219.007     0.996875       390625       320.00
    18284.543     0.997266       390792       365.71
    18317.311     0.997656       390905       426.67
    18366.463     0.998047       391059       512.00
    18399.231     0.998242       391159       568.89
    18415.615     0.998437       391209       640.00
    18448.383     0.998633       391300       731.43
    18481.151     0.998828       391381       853.33
    18513.919     0.999023       391454      1024.00
    18530.303     0.999121       391476      1137.78
    18563.071     0.999219       391525      1280.00
    18612.223     0.999316       391559      1462.86
    18743.295     0.999414       391592      1706.67
    19415.039     0.999512       391630      2048.00
    19808.255     0.999561       391650      2275.56
    19873.791     0.999609       391669      2560.00
    19939.327     0.999658       391686      2925.71
    20021.247     0.999707       391707      3413.33
    20185.087     0.999756       391726      4096.00
    20201.471     0.999780       391739      4551.11
    20217.855     0.999805       391750      5120.00
    20234.239     0.999829       391757      5851.43
    20267.007     0.999854       391763      6826.67
    20332.543     0.999878       391772      8192.00
    20348.927     0.999890       391780      9102.22
    20365.311     0.999902       391788     10240.00
    20365.311     0.999915       391788     11702.86
    20381.695     0.999927       391796     13653.33
    20381.695     0.999939       391796     16384.00
    20398.079     0.999945       391800     18204.44
    20398.079     0.999951       391800     20480.00
    20430.847     0.999957       391806     23405.71
    20430.847     0.999963       391806     27306.67
    20447.231     0.999969       391810     32768.00
    20447.231     0.999973       391810     36408.89
    20447.231     0.999976       391810     40960.00
    20463.615     0.999979       391814     46811.43
    20463.615     0.999982       391814     54613.33
    20463.615     0.999985       391814     65536.00
    20463.615     0.999986       391814     72817.78
    20479.999     0.999988       391815     81920.00
    20479.999     0.999989       391815     93622.86
    20987.903     0.999991       391816    109226.67
    21741.567     0.999992       391817    131072.00
    21741.567     0.999993       391817    145635.56
    21741.567     0.999994       391817    163840.00
    21741.567     0.999995       391817    187245.71
    22020.095     0.999995       391818    218453.33
    22020.095     0.999996       391818    262144.00
    22020.095     0.999997       391818    291271.11
    22020.095     0.999997       391818    327680.00
    22020.095     0.999997       391818    374491.43
    22298.623     0.999998       391819    436906.67
    22298.623     1.000000       391819          inf
***
    #[Mean    =      604.658, StdDeviation   =     2520.437]
    #[Max     =    22282.240, Total count    =       391819]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
541985 requests in 1.00m, 35.09MB read

Socket errors: connect 0, read 0, write 0, timeout 409

Requests/sec:   9030.50

Transfer/sec:    598.69KB

> wrk -t 20 -c 64 -R 20000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

20 threads and 64 connections

Thread calibration: mean lat.: 1.694ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.752ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.725ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.636ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.660ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.578ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.628ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.579ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.663ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.721ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.634ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.717ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.623ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.629ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.654ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.623ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.562ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.669ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.601ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 1.620ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.05s     4.45s   31.90s    95.86%
    Req/Sec   357.68      1.02k   30.78k    97.56%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    0.99ms
    75.000%  108.93ms
    90.000%    1.14s
    99.000%   28.16s
    99.900%   30.15s
    99.990%   31.70s
    99.999%   31.90s
    100.000%  31.92s

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.014     0.000000            1         1.00
       0.316     0.100000        33940         1.11
       0.486     0.200000        67870         1.25
       0.659     0.300000       101528         1.43
       0.824     0.400000       135375         1.67
       0.993     0.500000       169335         2.00
       1.070     0.550000       186127         2.22
       1.163     0.600000       203014         2.50
       1.505     0.650000       219926         2.86
      39.231     0.700000       236823         3.33
     108.927     0.750000       253740         4.00
     186.111     0.775000       262197         4.44
     271.871     0.800000       270671         5.00
     378.623     0.825000       279120         5.71
     551.935     0.850000       287574         6.67
     756.223     0.875000       296053         8.00
     898.047     0.887500       300258         8.89
    1135.615     0.900000       304487        10.00
    1392.639     0.912500       308729        11.43
    1724.415     0.925000       312948        13.33
    2078.719     0.937500       317173        16.00
    2299.903     0.943750       319296        17.78
    2559.999     0.950000       321409        20.00
    3276.799     0.956250       323518        22.86
    6655.999     0.962500       325632        26.67
    10428.415     0.968750       327746        32.00
    19070.975     0.971875       328808        35.56
    21512.191     0.975000       329864        40.00
    22429.695     0.978125       330935        45.71
    23445.503     0.981250       331976        53.33
    24444.927     0.984375       333049        64.00
    25444.351     0.985938       333577        71.11
    27443.199     0.987500       334093        80.00
    28016.639     0.989062       334617        91.43
    28262.399     0.990625       335150       106.67
    28655.615     0.992188       335680       128.00
    28835.839     0.992969       335950       142.22
    29048.831     0.993750       336212       160.00
    29196.287     0.994531       336472       182.86
    29442.047     0.995313       336740       213.33
    29687.807     0.996094       337004       256.00
    29769.727     0.996484       337152       284.44
    29818.879     0.996875       337268       320.00
    29868.031     0.997266       337410       365.71
    29917.183     0.997656       337552       426.67
    29966.335     0.998047       337679       512.00
    29999.103     0.998242       337741       568.89
    30031.871     0.998437       337796       640.00
    30081.023     0.998633       337883       731.43
    30113.791     0.998828       337942       853.33
    30162.943     0.999023       338005      1024.00
    30179.327     0.999121       338023      1137.78
    30212.095     0.999219       338056      1280.00
    30244.863     0.999316       338088      1462.86
    30294.015     0.999414       338119      1706.67
    31424.511     0.999512       338154      2048.00
    31473.663     0.999561       338173      2275.56
    31506.431     0.999609       338195      2560.00
    31522.815     0.999658       338206      2925.71
    31539.199     0.999707       338218      3413.33
    31571.967     0.999756       338240      4096.00
    31588.351     0.999780       338252      4551.11
    31588.351     0.999805       338252      5120.00
    31604.735     0.999829       338263      5851.43
    31621.119     0.999854       338270      6826.67
    31686.655     0.999878       338280      8192.00
    31686.655     0.999890       338280      9102.22
    31703.039     0.999902       338286     10240.00
    31719.423     0.999915       338292     11702.86
    31735.807     0.999927       338293     13653.33
    31768.575     0.999939       338301     16384.00
    31768.575     0.999945       338301     18204.44
    31768.575     0.999951       338301     20480.00
    31784.959     0.999957       338305     23405.71
    31784.959     0.999963       338305     27306.67
    31883.263     0.999969       338309     32768.00
    31883.263     0.999973       338309     36408.89
    31883.263     0.999976       338309     40960.00
    31899.647     0.999979       338315     46811.43
    31899.647     0.999982       338315     54613.33
    31899.647     0.999985       338315     65536.00
    31899.647     0.999986       338315     72817.78
    31899.647     0.999988       338315     81920.00
    31899.647     0.999989       338315     93622.86
    31899.647     0.999991       338315    109226.67
    31899.647     0.999992       338315    131072.00
    31899.647     0.999993       338315    145635.56
    31899.647     0.999994       338315    163840.00
    31916.031     0.999995       338317    187245.71
    31916.031     1.000000       338317          inf
***
    #[Mean    =     1046.679, StdDeviation   =     4445.161]
    #[Max     =    31899.648, Total count    =       338317]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
538530 requests in 1.00m, 34.87MB read

Socket errors: connect 0, read 0, write 0, timeout 674

Requests/sec:   8971.13

Transfer/sec:    594.80KB

Выводы
-

В синхронном режиме на 4 потоках и 64 соединениях сервер выполнял запросы в среднем за ~1ms (GET и PUT). При увеличении

числа потоков до 20 среднее время выполнения запроса сократилось до ~800us для GET и PUT запросов. При увеличении числа 

потоков до 64 среднее время осталось в районе ~950us, что в пределах погрешности работы wrk. В асинхронном режиме

на `ExecutorService` на стеке на 4 потоках и 64 соединениях сервер выполнял PUT запросы за ~1.5s-2.5s в зависимости от

рейта (20000r/s - 30000r/s). При увеличении потоков до 20 время сократилось значительно - до ~1s-1.5s в зависимости от

рейта. PUT запросы на 4 потоках показали результат в ~1s-6s в зависимости от рейта. При увеличении потоков до 20 время

сократилось значительно - до ~630ms-1.15s в зависимости от рейта для GET запросов. При увеличении числа потоков до 64

GET и PUT запросы стали обрабатываться ~680us. Можно сделать вывод, что асинхронный сервис на `ExecutorService` не

очень хорошо себя показывает на небольшом количестве одновременно работающих потоках, но ситуация улучшается при

увеличении числа потоков (680us против 950us на 64 потоках). Это объясняется распараллеливанием выполнения запросов в

разных потоках, чем активно пользуется `ExecutorService`. В синхронном же режиме увеличение числа потоков практически

никак не влияет на время выполнения запроса, так как запросы выполняются в синхронном режиме по очереди. Также стоит

отметить, что замена стека на очередь ухудшила среднее latency на ~20%. Ошибки с таймаутом в сокете объясняются тем, что

при высокой нагрузке на стек, он переполняется и часть запросов не обрабатывается, не получив response от сервиса, тем

самым возникает timeout.

PUT:

При профилировании оказалось, что селекторы стали значительно меньше загружены (с 76% до 23.5% времени CPU). Теперь

~40% времени их работы приходится на добавление в блокирующую очередь, ~60% - на системные вызовы. Помимо селекторов

~20% времени отводится на получение задачи (ThreadPoolExecutor.getTask) и извлечение ее из очереди

(CustomLinkedBlockingDeque.take). Поскольку в обработке запросов участвуют несколько потоков, то увеличиваются

накладные расходы на чтение запроса (header, body). Также увеличиваются аллокации String в byte[] и наоборот, аллокации

из HTTPBuffer в String. Lock: CustomLinkedBlockingQueue.take - 72%, LinkedBlockingDeque.offer - 26.5%,

HTTPSession.sendResponse - 1.5%.

К улучшениям стоит отнести собственный вариант очереди/стека с более быстрыми операциями добавления и получения элемента.

GET:

Селекторы стали значительно менее загружены (с 17.5% до 1.5% времени CPU). В остальном картина очень схожа с синхронным

сервером. Память аллоцирована на PriorityQueue, что объясняется тем, что данная структура представляет собой

приоритетную очередь из итераторов по таблицам в БД. То есть память выделяется на получение Entry из таблиц и их 

индексов и сравнение Entry между собой по ключам. Также память выделяется на переводы String в byte[] и наоборот.

Lock: CustomLinkedBlockingQueue.take - 63%, LinkedBlockingDeque.offer - 37%.

К улучшениям стоит отнести автоматический compact для более ускоренного мерджа таблиц при поиске записей и удаления

могил. Также стоит добавить блум фильтр для того, чтобы пропускать таблицы, в которых гарантированно не содержится

искомый ключ, что опять же сократит количество системных обращений.
