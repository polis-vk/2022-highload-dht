Нагрузочное тестирование проводилось на 3 нодах. Для GET запросов предварительно была сгенерирована БД с 100_000
записей. PUT запросы проходили с рейтом 20000 на 64 соединениях и 64 потоках, GET запросы - 5000 с тем же количеством
соединений и потоков.

По PUT нагрузке видно, что с увеличением требуемых подтверждений ack время ответов от сервера несколько увеличивается 
(с 7.38ms до 8.26ms на 100% персентиле). Также увеличивается время ответа по сравнению с решением без репликации 
(с 5.16ms до 8.26ms на 100% персентиле).

По GET нагрузке видно, что с увеличением требуемых подтверждений ack время ответов от сервера несколько увеличивается
(с 4.58ms до 5.55ms на 100% персентиле). Также увеличивается время ответа по сравнению с решением без репликации
(с 4.43ms до 5.55ms на 100% персентиле).

Репликация снижает производительность системы, поскольку реплицированные данные рассылаются по нескольким нодам, но при
этом увеличивается надежность системы, так как при условии падении ноды и наличия реплицированных данных на других
нодах, можно восстановить данные после того, как упавшая нода поднимется.

PUT профилирование (3 ноды):

По времени CPU видно, что 22.12% времени уходит на координирование ответов от нод при запросе с них данных (метод
coordinateRequest). SequentialScheduler (29.84% времени), который отвечает за управление HTTP запросами между нодами. 
Кроме того, SocketTube.InternalWriteSubscriber (14.42% времени), который отвечает за запись в сокет 
(SocketDispatcher.writev). HttpClientImpl.SelectorManager (21.41% времени) отвечает за формирование синхронной очереди,
которая используется для обработки событий, приходящих на клиент. Из аллокаций стоит выделить 
HttpClientImpl.SelectorManager (0.9%), SequentialScheduler (12.16%) и SocketTube.InternalWriteSubscriber (2.96%). Также
аллоцируется память на методе coordinateRequest (15.14%). Память необходима для создания списка ответов responses и
формирования новых ответов (new Response). Локи происходят во время обмена HTTP пакетами между нодами (56%) и во время
координирования ответа от нод (coordinateRequest - 35.2%).

GET профилирование (3 ноды):

По времени CPU видно, что 22.67% времени уходит на координирование ответов от нод при запросе с них данных (метод
coordinateRequest). SequentialScheduler (27.59% времени), который отвечает за управление HTTP запросами между нодами.
Кроме того, SocketTube.InternalWriteSubscriber (11.35% времени), который отвечает за запись в сокет
(SocketDispatcher.writev). HttpClientImpl.SelectorManager (23.46% времени) отвечает за формирование синхронной очереди,
которая используется для обработки событий, приходящих на клиент. Из аллокаций стоит выделить
HttpClientImpl.SelectorManager (0.84%), SequentialScheduler (6.28%) и SocketTube.InternalWriteSubscriber (0.81%). Также
аллоцируется память на методе coordinateRequest (14.44%). Память необходима для создания списка ответов responses и
формирования новых ответов (new Response). Локи происходят во время обмена HTTP пакетами между нодами (53.57%) и во время
координирования ответа от нод (coordinateRequest - 34.03%).

Наибольшее время в PUT и GET запросах уходит на передачу HTTP запросов между нодами, а также координирование ответов.

PUT запросы с 3 нодами (from = 3, ack = 1)
-

> wrk -t 64 -c 64 -R 20000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

64 threads and 64 connections

Thread calibration: mean lat.: 6.748ms, rate sampling interval: 50ms

...

Thread calibration: mean lat.: 6.492ms, rate sampling interval: 34ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency     1.18ms   331.06us   7.38ms      64.97%
    Req/Sec      37.01     104.86   555.00      88.73%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    1.18ms
    75.000%    1.43ms
    90.000%    1.59ms
    99.000%    1.79ms
    99.900%    3.12ms
    99.990%    5.76ms
    99.999%    7.26ms
    100.000%   7.38ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.166     0.000000            1         1.00
       0.761     0.100000         9845         1.11
       0.872     0.200000        19679         1.25
       0.974     0.300000        29410         1.43
       1.075     0.400000        39226         1.67
       1.177     0.500000        49055         2.00
       1.227     0.550000        53964         2.22
       1.279     0.600000        58834         2.50
       1.330     0.650000        63783         2.86
       1.381     0.700000        68665         3.33
       1.432     0.750000        73522         4.00
       1.458     0.775000        76009         4.44
       1.484     0.800000        78408         5.00
       1.510     0.825000        80849         5.71
       1.537     0.850000        83386         6.67
       1.563     0.875000        85750         8.00
       1.578     0.887500        87035         8.89
       1.593     0.900000        88248        10.00
       1.608     0.912500        89466        11.43
       1.624     0.925000        90681        13.33
       1.643     0.937500        91909        16.00
       1.653     0.943750        92511        17.78
       1.664     0.950000        93104        20.00
       1.676     0.956250        93715        22.86
       1.690     0.962500        94345        26.67
       1.704     0.968750        94934        32.00
       1.713     0.971875        95268        35.56
       1.721     0.975000        95563        40.00
       1.731     0.978125        95861        45.71
       1.743     0.981250        96165        53.33
       1.757     0.984375        96477        64.00
       1.765     0.985938        96625        71.11
       1.775     0.987500        96784        80.00
       1.783     0.989062        96933        91.43
       1.795     0.990625        97086       106.67
       1.811     0.992188        97236       128.00
       1.819     0.992969        97307       142.22
       1.828     0.993750        97383       160.00
       1.840     0.994531        97460       182.86
       1.856     0.995313        97537       213.33
       1.880     0.996094        97614       256.00
       1.890     0.996484        97654       284.44
       1.904     0.996875        97689       320.00
       1.928     0.997266        97727       365.71
       1.970     0.997656        97766       426.67
       2.034     0.998047        97804       512.00
       2.149     0.998242        97823       568.89
       2.313     0.998437        97841       640.00
       2.547     0.998633        97861       731.43
       2.853     0.998828        97880       853.33
       3.161     0.999023        97899      1024.00
       3.379     0.999121        97908      1137.78
       3.577     0.999219        97918      1280.00
       3.923     0.999316        97928      1462.86
       4.103     0.999414        97937      1706.67
       4.363     0.999512        97947      2048.00
       4.491     0.999561        97951      2275.56
       4.719     0.999609        97956      2560.00
       4.799     0.999658        97961      2925.71
       5.011     0.999707        97966      3413.33
       5.123     0.999756        97971      4096.00
       5.203     0.999780        97973      4551.11
       5.243     0.999805        97975      5120.00
       5.407     0.999829        97978      5851.43
       5.483     0.999854        97980      6826.67
       5.671     0.999878        97983      8192.00
       5.755     0.999890        97984      9102.22
       5.767     0.999902        97985     10240.00
       5.835     0.999915        97986     11702.86
       5.967     0.999927        97987     13653.33
       6.419     0.999939        97989     16384.00
       6.419     0.999945        97989     18204.44
       6.591     0.999951        97990     20480.00
       6.591     0.999957        97990     23405.71
       6.767     0.999963        97991     27306.67
       6.991     0.999969        97992     32768.00
       6.991     0.999973        97992     36408.89
       6.991     0.999976        97992     40960.00
       6.991     0.999979        97992     46811.43
       7.255     0.999982        97993     54613.33
       7.255     0.999985        97993     65536.00
       7.255     0.999986        97993     72817.78
       7.255     0.999988        97993     81920.00
       7.255     0.999989        97993     93622.86
       7.379     0.999991        97994    109226.67
       7.379     1.000000        97994          inf
***
    #[Mean    =        1.181, StdDeviation   =        0.331]
    #[Max     =        7.376, Total count    =        97994]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
198809 requests in 1.00m, 13.27MB read

Socket errors: connect 0, read 0, write 0, timeout 1573

Non-2xx or 3xx responses: 73705

Requests/sec:   3312.76

Transfer/sec:    226.35KB

PUT запросы с 3 нодами (from = 3, ack = 3)
-

> wrk -t 64 -c 64 -R 20000 -d 1m -s put.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

64 threads and 64 connections

Thread calibration: mean lat.: 5.611ms, rate sampling interval: 10ms

Thread calibration: mean lat.: 5.043ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency     1.15ms   341.58us   8.26ms      66.28%
    Req/Sec     234.02     154.88   555.00      60.28%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    1.14ms
    75.000%    1.40ms
    90.000%    1.56ms
    99.000%    1.84ms
    99.900%    2.64ms
    99.990%    6.64ms
    99.999%    8.26ms
    100.000%   8.26ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.157     0.000000            1         1.00
       0.719     0.100000         4693         1.11
       0.833     0.200000         9393         1.25
       0.940     0.300000        14088         1.43
       1.043     0.400000        18783         1.67
       1.141     0.500000        23435         2.00
       1.190     0.550000        25797         2.22
       1.240     0.600000        28127         2.50
       1.294     0.650000        30504         2.86
       1.346     0.700000        32834         3.33
       1.398     0.750000        35187         4.00
       1.425     0.775000        36329         4.44
       1.451     0.800000        37527         5.00
       1.477     0.825000        38670         5.71
       1.503     0.850000        39843         6.67
       1.531     0.875000        41033         8.00
       1.545     0.887500        41595         8.89
       1.561     0.900000        42199        10.00
       1.577     0.912500        42792        11.43
       1.595     0.925000        43349        13.33
       1.617     0.937500        43951        16.00
       1.629     0.943750        44236        17.78
       1.641     0.950000        44528        20.00
       1.657     0.956250        44814        22.86
       1.673     0.962500        45106        26.67
       1.692     0.968750        45406        32.00
       1.705     0.971875        45556        35.56
       1.716     0.975000        45692        40.00
       1.733     0.978125        45844        45.71
       1.754     0.981250        45986        53.33
       1.775     0.984375        46136        64.00
       1.788     0.985938        46206        71.11
       1.803     0.987500        46279        80.00
       1.825     0.989062        46351        91.43
       1.845     0.990625        46424       106.67
       1.872     0.992188        46495       128.00
       1.890     0.992969        46533       142.22
       1.906     0.993750        46570       160.00
       1.926     0.994531        46606       182.86
       1.945     0.995313        46643       213.33
       1.973     0.996094        46679       256.00
       1.984     0.996484        46697       284.44
       2.007     0.996875        46716       320.00
       2.027     0.997266        46733       365.71
       2.055     0.997656        46752       426.67
       2.091     0.998047        46770       512.00
       2.109     0.998242        46779       568.89
       2.151     0.998437        46788       640.00
       2.205     0.998633        46797       731.43
       2.263     0.998828        46807       853.33
       2.823     0.999023        46816      1024.00
       2.909     0.999121        46820      1137.78
       3.367     0.999219        46825      1280.00
       3.729     0.999316        46829      1462.86
       4.215     0.999414        46834      1706.67
       4.727     0.999512        46839      2048.00
       5.199     0.999561        46841      2275.56
       5.343     0.999609        46843      2560.00
       5.495     0.999658        46845      2925.71
       5.823     0.999707        46848      3413.33
       5.991     0.999756        46850      4096.00
       6.095     0.999780        46851      4551.11
       6.179     0.999805        46852      5120.00
       6.307     0.999829        46853      5851.43
       6.459     0.999854        46855      6826.67
       6.635     0.999878        46856      8192.00
       6.635     0.999890        46856      9102.22
       7.151     0.999902        46857     10240.00
       7.151     0.999915        46857     11702.86
       7.231     0.999927        46858     13653.33
       7.479     0.999939        46859     16384.00
       7.479     0.999945        46859     18204.44
       7.479     0.999951        46859     20480.00
       7.479     0.999957        46859     23405.71
       7.963     0.999963        46860     27306.67
       7.963     0.999969        46860     32768.00
       7.963     0.999973        46860     36408.89
       7.963     0.999976        46860     40960.00
       7.963     0.999979        46860     46811.43
       8.263     0.999982        46861     54613.33
       8.263     1.000000        46861          inf
***
    #[Mean    =        1.148, StdDeviation   =        0.342]
    #[Max     =        8.256, Total count    =        46861]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------

61298 requests in 1.00m, 3.97MB read

Socket errors: connect 0, read 0, write 0, timeout 1769

Non-2xx or 3xx responses: 7134

Requests/sec:   1021.22

Transfer/sec:     67.75KB

GET запросы с 3 нодами (from = 3, ack = 3)
-

> wrk -t 64 -c 64 -R 5000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

64 threads and 64 connections

Thread calibration: mean lat.: 1.241ms, rate sampling interval: 10ms

...

Thread calibration: mean lat.: 1.532ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency     1.29ms   323.78us   5.54ms      63.26%
    Req/Sec       8.35      28.79   200.00      92.23%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    1.28ms
    75.000%    1.54ms
    90.000%    1.70ms
    99.000%    1.93ms
    99.900%    2.38ms
    99.990%    4.89ms
    99.999%    5.55ms
    100.000%   5.55ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.291     0.000000            1         1.00
       0.865     0.100000         2483         1.11
       0.976     0.200000         4946         1.25
       1.077     0.300000         7415         1.43
       1.179     0.400000         9893         1.67
       1.281     0.500000        12365         2.00
       1.335     0.550000        13614         2.22
       1.386     0.600000        14834         2.50
       1.438     0.650000        16078         2.86
       1.489     0.700000        17302         3.33
       1.539     0.750000        18545         4.00
       1.565     0.775000        19154         4.44
       1.591     0.800000        19779         5.00
       1.617     0.825000        20389         5.71
       1.645     0.850000        21010         6.67
       1.673     0.875000        21626         8.00
       1.689     0.887500        21935         8.89
       1.704     0.900000        22260        10.00
       1.719     0.912500        22561        11.43
       1.736     0.925000        22866        13.33
       1.759     0.937500        23173        16.00
       1.772     0.943750        23336        17.78
       1.784     0.950000        23477        20.00
       1.799     0.956250        23638        22.86
       1.814     0.962500        23788        26.67
       1.832     0.968750        23939        32.00
       1.841     0.971875        24019        35.56
       1.851     0.975000        24096        40.00
       1.862     0.978125        24172        45.71
       1.875     0.981250        24248        53.33
       1.891     0.984375        24326        64.00
       1.901     0.985938        24366        71.11
       1.912     0.987500        24404        80.00
       1.926     0.989062        24442        91.43
       1.940     0.990625        24481       106.67
       1.955     0.992188        24518       128.00
       1.970     0.992969        24539       142.22
       1.984     0.993750        24557       160.00
       2.001     0.994531        24576       182.86
       2.023     0.995313        24596       213.33
       2.047     0.996094        24615       256.00
       2.059     0.996484        24625       284.44
       2.071     0.996875        24634       320.00
       2.091     0.997266        24644       365.71
       2.107     0.997656        24655       426.67
       2.123     0.998047        24663       512.00
       2.153     0.998242        24668       568.89
       2.181     0.998437        24673       640.00
       2.275     0.998633        24678       731.43
       2.327     0.998828        24683       853.33
       2.387     0.999023        24687      1024.00
       2.469     0.999121        24690      1137.78
       2.511     0.999219        24692      1280.00
       2.779     0.999316        24695      1462.86
       2.837     0.999414        24697      1706.67
       2.925     0.999512        24699      2048.00
       3.179     0.999561        24701      2275.56
       3.191     0.999609        24702      2560.00
       3.315     0.999658        24703      2925.71
       3.519     0.999707        24704      3413.33
       3.537     0.999756        24705      4096.00
       3.789     0.999780        24706      4551.11
       3.795     0.999805        24707      5120.00
       3.795     0.999829        24707      5851.43
       4.053     0.999854        24708      6826.67
       4.053     0.999878        24708      8192.00
       4.887     0.999890        24709      9102.22
       4.887     0.999902        24709     10240.00
       4.887     0.999915        24709     11702.86
       5.447     0.999927        24710     13653.33
       5.447     0.999939        24710     16384.00
       5.447     0.999945        24710     18204.44
       5.447     0.999951        24710     20480.00
       5.447     0.999957        24710     23405.71
       5.547     0.999963        24711     27306.67
       5.547     1.000000        24711          inf
***
    #[Mean    =        1.286, StdDeviation   =        0.324]
    #[Max     =        5.544, Total count    =        24711]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
42903 requests in 1.00m, 2.67MB read

Socket errors: connect 0, read 0, write 0, timeout 1610

Non-2xx or 3xx responses: 1285

Requests/sec:    714.87

Transfer/sec:     45.51KB

GET запросы с 3 нодами (from = 3, ack = 1)
-

> wrk -t 64 -c 64 -R 5000 -d 1m -s get.lua -L http://localhost:19234

Running 1m test @ http://localhost:19234

64 threads and 64 connections

Thread calibration: mean lat.: 1.922ms, rate sampling interval: 10ms

...

Thread calibration: mean lat.: 1.472ms, rate sampling interval: 10ms

    Thread Stats   Avg      Stdev      Max   +/- Stdev
    Latency     1.27ms   317.64us   4.58ms      62.33%
    Req/Sec       8.68      29.32   111.00      91.92%
***
    Latency Distribution (HdrHistogram - Recorded Latency)
    50.000%    1.27ms
    75.000%    1.52ms
    90.000%    1.69ms
    99.000%    1.91ms
    99.900%    2.20ms
    99.990%    3.14ms
    99.999%    4.58ms
    100.000%   4.58ms

Detailed Percentile spectrum:

       Value   Percentile   TotalCount 1/(1-Percentile)

       0.149     0.000000            1         1.00
       0.853     0.100000         2586         1.11
       0.962     0.200000         5157         1.25
       1.064     0.300000         7722         1.43
       1.165     0.400000        10287         1.67
       1.269     0.500000        12872         2.00
       1.318     0.550000        14148         2.22
       1.370     0.600000        15452         2.50
       1.421     0.650000        16721         2.86
       1.473     0.700000        18024         3.33
       1.523     0.750000        19281         4.00
       1.550     0.775000        19931         4.44
       1.577     0.800000        20592         5.00
       1.602     0.825000        21228         5.71
       1.628     0.850000        21859         6.67
       1.660     0.875000        22506         8.00
       1.675     0.887500        22825         8.89
       1.690     0.900000        23142        10.00
       1.707     0.912500        23465        11.43
       1.725     0.925000        23785        13.33
       1.745     0.937500        24105        16.00
       1.756     0.943750        24266        17.78
       1.770     0.950000        24429        20.00
       1.782     0.956250        24588        22.86
       1.796     0.962500        24752        26.67
       1.813     0.968750        24909        32.00
       1.821     0.971875        24984        35.56
       1.834     0.975000        25067        40.00
       1.847     0.978125        25145        45.71
       1.860     0.981250        25227        53.33
       1.875     0.984375        25315        64.00
       1.884     0.985938        25353        71.11
       1.891     0.987500        25386        80.00
       1.903     0.989062        25430        91.43
       1.914     0.990625        25466       106.67
       1.933     0.992188        25508       128.00
       1.942     0.992969        25530       142.22
       1.949     0.993750        25547       160.00
       1.965     0.994531        25567       182.86
       1.976     0.995313        25587       213.33
       1.999     0.996094        25610       256.00
       2.010     0.996484        25617       284.44
       2.020     0.996875        25627       320.00
       2.031     0.997266        25637       365.71
       2.057     0.997656        25647       426.67
       2.083     0.998047        25658       512.00
       2.095     0.998242        25662       568.89
       2.121     0.998437        25668       640.00
       2.139     0.998633        25672       731.43
       2.161     0.998828        25677       853.33
       2.213     0.999023        25682      1024.00
       2.227     0.999121        25685      1137.78
       2.303     0.999219        25687      1280.00
       2.349     0.999316        25690      1462.86
       2.371     0.999414        25692      1706.67
       2.653     0.999512        25695      2048.00
       2.663     0.999561        25696      2275.56
       2.789     0.999609        25697      2560.00
       2.845     0.999658        25699      2925.71
       2.949     0.999707        25700      3413.33
       3.039     0.999756        25701      4096.00
       3.121     0.999780        25702      4551.11
       3.121     0.999805        25702      5120.00
       3.129     0.999829        25703      5851.43
       3.139     0.999854        25704      6826.67
       3.139     0.999878        25704      8192.00
       3.619     0.999890        25705      9102.22
       3.619     0.999902        25705     10240.00
       3.619     0.999915        25705     11702.86
       3.935     0.999927        25706     13653.33
       3.935     0.999939        25706     16384.00
       3.935     0.999945        25706     18204.44
       3.935     0.999951        25706     20480.00
       3.935     0.999957        25706     23405.71
       4.583     0.999963        25707     27306.67
       4.583     1.000000        25707          inf
***
    #[Mean    =        1.271, StdDeviation   =        0.318]
    #[Max     =        4.580, Total count    =        25707]
    #[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
44084 requests in 1.00m, 2.80MB read

Socket errors: connect 0, read 0, write 0, timeout 1604

Non-2xx or 3xx responses: 7687

Requests/sec:    734.55

Transfer/sec:     47.81KB
