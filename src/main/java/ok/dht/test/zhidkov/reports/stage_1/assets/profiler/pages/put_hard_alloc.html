<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<style>
	body {margin: 0; padding: 4px 8px 24px; background-color: #ffffff; overflow-y: scroll}
    h1 {margin: 5px 0 0 0; font-size: 18px; font-weight: normal; text-align: center}
	header {margin: -24px 0 5px 0; line-height: 24px}
	button {font: 12px sans-serif; cursor: pointer}
	p {margin: 5px 0 5px 0}
	a {color: #0366d6}
	#hl {position: absolute; display: none; overflow: hidden; white-space: nowrap; pointer-events: none; background-color: #ffffe0; outline: 1px solid #ffc000; height: 15px}
	#hl span {padding: 0 3px 0 3px}
	#status {overflow: hidden; white-space: nowrap}
	#match {overflow: hidden; white-space: nowrap; display: none; float: right; text-align: right}
	#reset {cursor: pointer}
	#canvas {width: 100%; height: 300px}

    .selectionPart {position: absolute; display: none; pointer-events: none; box-sizing: border-box;}
    .sel {background-color: #dada0040}
    .act {background-color: #00da0040}
    .dif {background-color: #00dada40}
    .top {border-top: .1px solid #000}
    .left {border-left: .1px solid #000}
    .bottom {border-bottom: .1px solid #000}
    .right {border-right: .1px solid #000}

    #info-tooltip {display: none; position: absolute; top: 100px; right: 32px; width: 204px; border: 1px solid #666666; background: #ffffe0; border-radius: 8px; padding: 4px}
    #heatmap-height-line, #heatmap-info { text-decoration: #0366d6 dashed underline; cursor: pointer; font-family: monospace}
    #heatmap-info {cursor: help}
    #heatmap-info:hover + #info-tooltip {display: block}

    .colortip {width: 100px; box-sizing: border-box; padding: 4px; background: linear-gradient(var(--c1), var(--c2))}


</style>
</head>
<body style='font: 12px Verdana, sans-serif'>


<div style="display: flex">
    <div style="width: 20px; margin-right: 2px; float: left; writing-mode: vertical-rl; transform: scale(-1); text-align: center; user-select: none"><pre id="heatmap-height-line"> 1 sec : 20 ms </pre></div>

    <div id='heatmap-canvas-container' style="width: 100%; position: relative" autofocus>
        <div id='heatmap-canvas-wrapper' style='overflow: hidden; width: 100%'>
            <canvas id='heatmap-canvas' style='height: 314px'></canvas>
        </div>

        <div id='middleActive' class='selectionPart top bottom act'><span></span></div>
        <div id='leftActive' class='selectionPart top left bottom act'><span></span></div>
        <div id='rightActive' class='selectionPart top right bottom act'><span></span></div>
        <div id='leftMiddleActive' class='selectionPart right'><span></span></div>
        <div id='rightMiddleActive' class='selectionPart left'><span></span></div>

        <div id='middleSelection' class='selectionPart top bottom sel'><span></span></div>
        <div id='leftSelection' class='selectionPart top left bottom sel'><span></span></div>
        <div id='rightSelection' class='selectionPart top right bottom sel'><span></span></div>
        <div id='leftMiddleSelection' class='selectionPart right'><span></span></div>
        <div id='rightMiddleSelection' class='selectionPart left'><span></span></div>

        <div id='middleDiff' class='selectionPart top bottom dif'><span></span></div>
        <div id='leftDiff' class='selectionPart top left bottom dif'><span></span></div>
        <div id='rightDiff' class='selectionPart top right bottom dif'><span></span></div>
        <div id='leftMiddleDiff' class='selectionPart right'><span></span></div>
        <div id='rightMiddleDiff' class='selectionPart left'><span></span></div>
    </div>

    <div id="heatmap-info" style="width: 20px; margin-right: 2px; writing-mode: vertical-rl; text-align: center; user-select: none">
        <pre> Info </pre>
    </div>
    <div id="info-tooltip">
        <div style="float:left">
            <div style="padding: 4px;">Frame types:</div>
            <div class="colortip" style="--c1:#b2e1b2;--c2:#c6f5c6">Interpreted</div>
            <div class="colortip" style="--c1:#50e150;--c2:#6eff6e">JIT-Compiled</div>
            <div class="colortip" style="--c1:#50cccc;--c2:#6eeaea">Inlined</div>
            <div class="colortip" style="--c1:#e15a5a;--c2:#ff8282">Native</div>
            <div class="colortip" style="--c1:#c8c83c;--c2:#e6e646">C++</div>
            <div class="colortip" style="--c1:#e17d00;--c2:#ff9b00">Kernel</div>
            <div class="colortip" style="--c1:#cce880;--c2:#e0fc94">C1-Compiled</div>
        </div>
        <div style="float:left; margin-left: 4px">
            <div style="padding: 4px;">Special colors:</div>
            <div class="colortip" style="--c1:#ee00ee;--c2:#ee00ee">Matches regexp</div>
            <div class="colortip" style="--c1:#baa551;--c2:#baa551">New frames</div>
            <div class="colortip" style="--c1:#f0f0c0;--c2:#f0f0c0">Same frames</div>
            <div class="colortip" style="--c1:#99aaff;--c2:#99aaff">Less frames</div>
            <div class="colortip" style="--c1:#ffaa99;--c2:#ffaa99">More frames</div>
        </div>
        <div style="float:left; margin-top: 4px; width: 100%; border: 1px solid #666666; border-radius: 2px; padding: 2px; box-sizing: border-box;">
            Shift + Click - Select range<br>
            Ctrl + Click - Compare<br>
            Ctrl + F - Search<br>
        </div>
    </div>
</div>
<div id="executionsHeatmap" style="display:none">BEvHADr@~ArH_{C???????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????GDSTU[L``pybxxabhaiajhaqqpyxjxhyx`i[PbM^NOz`q\Qhxa`iWsLMPyhjCXi`qVQbNMLRyUQ[PbKXbNPqj`iqEWq]T[MNUKLSTHkLMObpyCYy]TNHjNOiUQi[KVMLUWyxxDZi`apxDXbKYqLXbDWbNRqVQbLUMObii^S[LVRyUSMLLWsLLTLWjCXihqVQbMKTSNQyURpaxhq]RTZxjFVKVNQjERa]QyUSMNNOkLLTLXbDWbVQXW`xXzK^KOj\VMhD\KVRq``xbK`FTNQy[`hixyahyi[SYjypxyD[L`RipMPZypGX\Xj@`ZbLPYZHX`ha`hJKMWqJQhyKHUUKLHZNWaBhqNO[ZpBMYXX[VNOJJy`x`YrTP`WXJhQNSJaxXF\PX`KQjhFIySHaipXLHaP\^KMSGKIIj`AzCIVKP`DKG^Q`R@aAzDHSVHhPrCHLIyhKIIj`ArHhTMPhAzDHULPhRhaaPW`B`BjMIML\JJIrKPKMW`XrCP`I`I[XaCJCHXRH`RGhOcGhA`I`yYKID`Jj`xJzCO^LRpRG`KMSKLIzEKIhBU[G\MPxKKUKHUXaJUWiCNSKH]WiWz@aYjLQ[X`PPX[GK`iXJy]HZIJUZJ[XiRbKP]SKNGXXYZMYXbbCG`hqKMRCLYXKY`@zXXyO`MQIjRj`D[H`aUMP`O`[QJzIMMIpyULTHiWNYUWijBNVHWyXqQj[L\Jh[G\YXNQK`XrFGayQ`JRPixNGhPZIjQTJFHW[HUWxJQ[YxH]I`ZXhJyRXZWj`Op`NH`PpiZCJCH`P`yZJjFH`I`I`JX`W\\KH`K[G`W\\KH`I`i`hJE[H[G`jFH[G`bLHYSNQhKHR`FWaXYSHUXxBhCJJjDHhO`jDHxG`YPq`KUKR^RLZYbIMYRixMKRZqZYSLR`KSR`ha`VSGjO`i``paP[[HFY^RYb`DXRy[HixNKP`IzCUXxOkLGXi]RBrDOx`NILNPa^HxI\TKQaXxW`jEKNQKQC`RbLUNJqXx`FJI`JESHxP`bKRxMKHxI`XPx`CQCJXCK]HrXSNMLMIPp@^HYa@pKQCLWx[YKIJp`NJNJBjDOa`\JxI]SNJiXiWiP\^KJqKMHaPaP\[GMQFXhPrhZBKSPxyZPhy[I`j`XYJO`bSNTHqpLSO`PWcHFXDLZO`jJjXb`K[HypCIZIK[HbiPrCJxi[IJEZC`hSGzGcGM[JWXpqLHbYXR\NPSNLPpiNNLKIJRyhJS\OXhVTHaa[IJC`GrxUNTILHhqLGjpMKTJXh@]MPpqMLPh`ihMVG`PhBMUHipNSHhHrI\]HVSKIJPZjIrhUTQ]UHiqBXhK\HbhCIZBK\IKVMHqpMTHhGhjZE\HhBXh@]UHaiPhihKSPaaTVIrKKHhhapMUP\XpNLRZLGZLGLHhD\H`qh`PY^Q`X]KTLMSM\IXT^G`PhCIJC`I`PPrxSLZ``bKK\JZbKK\J[NP\\IbaJSIJS\H`RGcIC``XS[IqqRyhMTOhr`X\^JLZLZSKTKIJRX\XaCIJhyX\Wa@hMTHhKKYINTJpLZ[HhVUHhyUMTKICLZLZXyh\Iyi`PaaLH`yJU]HpbTHxaKVHhxaXbiRrhhBrEGZLHyhKSQixSIhy[ICIZJjCOZLIyhMUIZC`TKZ`O`RW`RW`\VHabLMZ`EZRjDIZJWzI\^IJjCIbpKI`Opj[GcHC`hUNVJKNPxKLPhpa`K\Q`Pix]HhK]L^HC`h]MSQKNRXYM[P[[JLVIpLHDK]HC`OcMKGV^HhjhGcLIxqxXhyUHYjpKNQ`C]G]WxHhJU^IJPyh`R`P\[INTJhLKLUHjQcKHhKZLLUJM[O`RXYMLLR`jPYZLKY`\ZJjLHjPppx`RzLH^PhS[HjhCLWyAkJ`D]GZLKYyiTNSPjpLUI`A`SINWMNTJLVHpLIb`E\G]WiIcLKIK`hZb\H`b]HpDZM[Ph@hxyI`PhL[Q][MG]WaB`y\HhBXpE\HNXpPppahKKXxPcHh@pq`\SQKUSJxqPY]ZXrY[^KHbqCILJb`TVKMNLQK`OkGZMIC`p`T\H`ySLG`RW[NMQJjpD^IKK]GL`OcJ[GcIF\MIypMTIj`LHSLZ\\HSLZ\^Hpb[LLTKKZSI^XpH`yhXia``PhKZV[KIjhIrVNPpD]G`bDOZiaPaq\HpqNIC`]Gjh^LRxApqpPzOkG`Y`PhjhGcMJ`E\G`jLHyh]HpqSINW[I`WcICIaiMLLTHV\KHbXhXhrxJzpMIJjaNVIZEHUGZ???????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????A?S\\`kMK`qkNNL`ahxhcNU`y\`p|LKNhpsJdMLS]M`]M`ph`lMMVUK`ippkLMMMLh[KU[T`acLM`plKMM`p\`qahrpcKUL`pijpkKUL`a^\V`]L`acKUM``pkK[`ipsLMM`a`hplNJrrphkML[SUNVT`i`|LNM`ayz`sLVMM`apzxpsNLK`ap`bbdHadTuTn]dTxa@n`@{Zeb@r_@_`@t_@o`@~_@`^l`@rb@w`@id@~Zf_@y`@de@`]z`@``@`b@mc@fb@ae@be@wa@vb@|a@ue@ch@xf@{d@q^~e@kb@hd@~c@sUjb@hh@gTyg@je@zg@e`@jf@e_@mg@xc@ve@lg@kf@uW|Zc^fg@m]z]kh@qT{Xx`@|g@jh@jWzXaZkZic@_g@_WgWkWvX`YaY|Yu[o\u\_^k^`c@cc@ke@lh@mTzTtU_VcVcWnWrW}WaXbXiXcYfYsY`ZbZfZhZh[o[e\q\c]q]v]m^{_@p`@dc@uc@ed@ud@qe@re@we@}e@cg@kg@rg@eThTjTkTlTnTpTsTtTvTyT{T|T}T~TvUzU{UaVdVfVhVxVzV{V|V}V`WbWdWeWfWhWiWmWoWpWqWsWtWxWyW{W|W_XdXeXfXgXhXjXlXmXnXpXqXrXuXwXxXyX}X~X_YbYdYeYgYhYjYlYmYnYoYpYqYrYtYuYvYxYyY{Y~Y_ZdZiZlZnZpZrZtZuZvZwZxZyZzZ_[`[a[b[c[d[e[f[j[k[l[n[q[r[s[t[v[w[x[y[z[{[|[}[~[_\`\a\b\d\k\m\n\p\s\t\w\x\z\{\|\}\~\_]a]b]e]g]i]k]l]o]p]s]t]u]w]x]y]~]a^b^e^f^h^i^j^l^o^p^r^t^u^w^x^z^|^__@b_@c_@d_@g_@h_@l_@m_@n_@p_@s_@u_@w_@x_@y_@z_@}_@a`@c`@d`@f`@g`@k`@m`@r`@t`@u`@v`@{`@|`@~`@`a@aa@ba@da@ea@ga@ia@ka@la@ra@sa@ta@va@ya@{a@}a@_b@ab@cb@gb@ib@lb@nb@ob@pb@sb@ub@wb@yb@zb@{b@|b@~b@_c@bc@fc@gc@hc@jc@lc@nc@pc@qc@sc@vc@wc@yc@{c@|c@}c@_d@bd@cd@dd@fd@jd@kd@md@nd@od@pd@qd@td@vd@wd@xd@zd@|d@}d@_e@ce@ee@ge@he@ie@me@oe@pe@te@ze@{e@|e@_f@`f@af@cf@df@ff@gf@hf@if@lf@nf@pf@rf@tf@yf@`g@gg@hg@ig@ng@pg@qg@sg@tg@ug@{g@ah@bh@gh@mh@rh@th@xh@zh@`i@bi@fTiToTrTwTxT_U`UaUbUcUdUeUfUgUhUiUjUkUlUmUnUoUpUqUrUuUwUxUyU|U}U~U`VbVeVgViVjVkVlVmVnVoVpVqVrVsVtVuVvVwVyV~VaWlWvWwWzW~W`XcXkXoXsXtX|XiYkYwYzY}YcZeZgZjZmZoZqZsZ}Zg[i[m[p[c\f\g\h\i\j\l\r\v\y\d]f]h]j]r]{]|]}]d^g^n^s^v^y^{^}^~^`_@a_@i_@j_@k_@o_@q_@v_@|_@b`@h`@i`@j`@q`@s`@}`@_a@ca@fa@ha@ja@ma@na@oa@pa@qa@ua@za@~a@bb@db@hb@mb@qb@tb@xb@}b@ac@ec@kc@oc@rc@tc@zc@`d@ad@gd@ld@rd@sd@yd@~d@`e@fe@le@ne@se@xe@ye@bf@ef@mf@of@qf@sf@uf@vf@wf@zf@{f@|f@}f@~f@ag@bg@dg@eg@jg@og@vg@wg@xg@}g@~g@_h@`h@dh@eh@fh@ih@nh@oh@ph@qh@sh@uh@vh@wh@yh@{h@|h@}h@~h@_i@ai@ci@di@ei@fi@gi@hi@qwNAAAyAgCyAA??????????k@??A????AA}A???AAAA?k@?A???????????????A?A???A??????????????AAAcA????????????????????A?A??bB????????????????dBAAfBAA????????????????AAA?dA??????????????????iAAAA??????????????????h@cADcA????????????????????AmA?h@?k@???????????????????AhD?AA????????????????AsEdAA????????fA}A???A????A???k@?????????h@`G???????????A?A?????????????????????A????????????????????kDiAAmAA????????????????A??????????@D??????????@??xF????????@?????????uFA?????????????????????k@????????????A????????????????h@??????????@???????????AA???????????{@?k@??????????h@?A??????????A???????????kBA???????????h@?A??????????A?h@??????????A????????????@?????????AiA???????????gG?dA??????????A?A??????????A???????????AhE?????????????????fB?????????????????Tk@??????????????????AA???@??????????mAD???????????????????????A??????????{F??????????????????A????????@???????????bBA???????????????????????D?????????????zDA??????????????????ADHAD???????????{@?cA??????????A????????{@???o@???????????xDc@?????????????@D??????????@??????????@??A????????@?????????HV???????????tA?A??????????h@???A??????????????????????????A????????????????gB?????????????@h@??????????@????????A??@??????????AA?????????????@A???????????@?????N??????@??????????`AR?????????????@T???????????@???dB????????@??????????HV?????????????@P???????????@D???????????@??????????AsA?????????????@pAI??????????A??????????????????????F????????????????????KFCpAHVD????????????????@?C????????????@?????F??????@??????????h@AA????????????DD??????????????????????GDHVDHV????????????????@?J????????????@A???????????@??????????AA?????????????@B???????????@I???????????@??????????lFI????????????AI?????????????@^???????????@???????U????@??????????CA?????????????@U???????????@D???????????@??????????gBI?????????????@AK????????????C??B????????????????????JD??????????????@??A????????????@??????T?????@??????????BA??????????@c@???????????@I???????????@??????????HVT????????????BB??????????????????????JBEIA^???????????????h@QN?????????????@B???????????@????K???????@??????????BRF????????????DF??@AEA??????????G???@J????????????????????`A???G???????????????A??????????????@VN?????????????????????LQCDJBRUgHV???????????????????NT??????????????F???????????@??????????CDI????????????Bh@?????????????????????c@B?@??????????????E??hB???????????DJ??????????????????????GALQCADJ??????????????R??????????????????F???I??????????????????HB??????????????????FMG??????????????????????k@V??????????????????????QJ???????????LA??????????????????????AQCDJ{IBRUR??h@?@K???????????????TIFCDJBRU???@A??????????????F^BA?@AEe@???@M??????????????A??T??????????BR?h@??@I???????????????CDJBRU]VM???@NAA?@fABR??A\???@e@E?????????????h@?WdA??????JB???@^B???????????????Ee@AGM???????@N@?@D??C????????????????J??@LL??????????????h@?QC???????@Bq@?@^B??????????????????EC????@I???????????????LQCTIFCDJM???@N??????????????CT?HB???@E??????????????GJh@?@AQC`A???@C??????????????{@??I???B????BR???@LK???????????????TIFCD???????@MM??????????????Le@k@??????????@BDo@?@tAHB??ADJA????\HO??pAP??????????????@]\??????????????GO??????C??B????????????????AGM????B?A????????Dk@?????????????A?@X?????????DA????????????s@pJvA?ODJ?s@???????????????????A`AN??AP??????????JXO??PBI????????????????????Jk@????????????YO?@o@?@HBA??HB?????????????Ee@`AA?@???????B????????Ee@s@A??@?C??????????????FCD??????UVA??DJ?????????????[?LH?@i@CD??QC\?????@?E??????????????Z\LK??@I???????????????s@GMhB??@J???????????????\LQ????M?c@?@???M???A??????????@TCh@??QC?????????????DJZA?@?B??????????????GMLN??@T???????????????BRU\??@D???????????????GMLK??@I???????????????s@f@GMBO??CD?????????????b@P???B???@ANK??vAGm@??@EKi@??FC??????????????????BL[??YBB????????????????????e@[?@g@RUG??@\???????????????HBRU]VM?fA?@I]??????????????C?@NA?@P???????????????s@GMLQCD??\LAC?@AFC]??@T???????????????DJBRU]V??_@?FK?@o@NKV??@I@?@k@JB??ZEPf@?@i@GM??Z\_@V?@??s@???D??????????IF?A?@iKWs@U??@J??????????????VBk@?@uHBR?J?@??s@???????????B?s@??@qAIXG????????????????H??????@GM???????????????PB???????@DC???????????????FNH??????@fAXC??b@FOA?@SV???????????????^IP??????@?C?????????????O?????HG?S?@cGY{@?qA??@UN??????????????CGD???@???A????????????BESBES???@c@U??????????????FO?D??@T???????????????KFARIBE???@CC??????????????{@MH????????@MJ??????????????B[?b@h@?@J???????????????CKFNWYEJ??@??????S?????????FNWYESB?[?@]???????????????DPCKHGDF??@??????????G?????GDF??@vAXC???@Dg@?@FEk@??CK?Q?????????????????????O]C???@D??????????????Fb@[??F??@Xi@?@AZD???@EE??????????????NCKOO?@H???????????????CKFNWYEJ??@???????S????????FNWYESB???@F???????????????PCI???????[c@Q??VD???@FADP???@B??????????????DBD[?_@JZ??\???????????????????[IB???@DF??????????????Hf@JZO??????????IO??GDP??????????????@q@BE??FN???????????@BHq@??^I??\????????????@p@IB????????????I?@i@MHP??????????B_@??TL??????????????@S^??????????????Z?@Xh@?????????????E\J????????????B?@???M??G??????????A~H?G?@AUFD??????????BA??e@BH??????????????@gABE?????F????????@Tq@\J??????????????@B??????????????O?UFN??????????Da@??QR??????????????@JH???????????????MHb@??????????????????Z[?[AC??????J????????@xJES????????????XDP?????M????????@CY???????????????QR???c@???????????????[XC??????gA?LBO??CKN?????????????@ADP???^??????????@kB???????FH???????a@?@T???????????????PCKFQ??@A?F?P?????????????@Jv@?????BE????CCO??RIX??????????????HGDPCK????LJ?@@IBD[@?OMH?????????????t@?B???CQ[?E???Nd@??????DP????CId@??MHR??????????????CKFNWY????GC_@??DPH??????????????JZDPCK????L??????TID[?P??@Jh@?????QRE?t@??NW?????????????_@?Xm@???BEB?q@?_@BE?????????????dLUp@Wm@?W?c@Q??????]????????BET?g@??^I?????????????O?F[???\JV?i@?M[???RII?A??c@Q?????????????qK?VG[??GDD??????????????MHGDPC????BD?@p@CKB?A?T_@???f@CKDc@Q[[A?H?A??LB??????????????X????CBE?OCnGk@}K????????????ZIBa@?h@?BOp@?a@^I??????????????????DDRI[a@A?D?A?_@UFX?????????????LB_@?@g@?@F??????????????WDBEd@?A?K?p@??RIe@??????????????DPCKFN??uL?ENO??NWU?????????????A??MH??aA?]]a@??XCC?????????????[??BE??A?MM?@g@XCL??@??K?????????????CKFN???ISB?OtA?F?n@?Bd@gA??KA?G?????????????TLB`@XC??n@?Td@l@?E?aA?C?n@??^II?????????????O??DP??n@?FX_@??XCC?????????????[??BE??{K?BDMH??i@?Ih@r@?]?n@???N????c@????????HGDPCf@KF_@????????????RFN??????????????Bb@F???????T??????????[BEY?????????????T[??GD??????B???????_@?KF??????????????WCK[???????????T??????JZI????????????OVD????@?CH[??`@ZB????????????m@?KF??????????C????CK????@?Bd@????????????H\JOa@????????????c@GDd@????????????Y?@A]CC?????????????LWYOd@????????????MO??FGV????????????[?UF??????????I???CK?????????B??????????\JJ?????????????CBE??????????????PO??CKK??????????????BES??????????????BBE?[???G???I????????@?G??@B???????????????NWF??J????????????????c@Q??????@HF?J??????????????????C[??LB??????I?Y@gA?????????H[??HGb@??????????????TLBE`@XE????????KNW????????M[??MHL??????????????UFNWYES????????]c@Q_@d@??????H[??XCB??????????????FNWYESB???@??????RDP_@???????Id@??`@RG?????????????O???BE??????????????KGD????????E?@?????F???c@???????@M?????????????????X?B??BE??????????????@GA?????????XDPO???????BLB????????F?@g@FNCA?@p@?@Bp@?????????RMHO_@??????e@aA??FNF??????????????JZDPCKF?d@??????WXCO???????BBEO???????C?@g@CKD??@g@TL????????FWY_@???????X?@j@PCC??@g@BE???@z@QR???????????????@^??????????????J?@BbA??LBI?????????????STCKOaA??????U?@j@UFB??@i@VDa@?@?????F?@Wi@?K[???????HG?RCK?n@?????U?u@??YET?????????????[??MH???????????????C??@j@IBJ??@l@HG??@?????DRIm@a@??????BLBO?@?????V[??JZc@?????????????SBESBE??????????c@TL_@d@??????JPC??@?????N[??`@UL??????????????HGDPCK????????????HBEO?@??????JFNO?@??????^f@??ZDT??????????????\JZDPC??????????????K`@XO?@?????GBE??@?????TMH??@????X?g@??CKU?????????????W\a@??FN????S?Y@?@???T????????????DS???LB?????\??????????????m@TLQ?@n@MH??????????????DKF?????????G?????BE??????@H@??DPL?????????????ORI?????@FCK??????????????????B?@n@K`@]?@l@?@TbA?C?@B??????????????CIB??????????????JJZO?????????????DXCd@???????c@??????????`@BB?@j@DP??????????????^c@Q?????V??????G????DP?`@X??????????????@Eo@??`@BC?????????????LBE??????????????JVD_@?????????????]CKa@?????????????Q^I?????B????????????OGDD?@l@BEV?@AIB??????????????JJZd@??????????]???RI??????@B??????????????yBf@GDBE[?????????`@??????????VDE?@o@FNO?????????????QBEa@???????^??????KF??????@^UFr@????????????ECK??????????????YES??V?????????????????FNS?@u@CK?????????]????J?@l@IB?]C???????????????I?@xAAQI?@i@b@F?ES?????????????VD??r@?GJZ[?????????????U]Cm@????????????IDP???????R?????????????HBH?@bAIB\_@??FN????????????????Qd@?T?@QCK??????????????????Y?@j@IB?]C???????????????IFN_@?????????S??????????TLC?@g@JZ??????????????BHG???????K???????ES??????@DES??????????????????Ga@??f@BEGDm@?????C?????W????BE?JZ???????????????qAUCK???????Y?????????????CKM?@n@QRB?@n@DP??????????????DKF[?????????????GIB????F????G???????e@B?]C???????????????W]C?????????U?????????FNG?@p@JZF?@p@MH??????????????Ve@`@}@????????????`@CK????B?????H???????@LCKt@?????E??????J?@AUF?\J?????????????CK??ESr@??????V???????????PCS?@g@RIM?@p@YE??????????????IGD??????????I????SB??????@HIB?????????????????DCK??????????????BESO???????????C????????TLJ?@l@IB?\J?????????????f@CKMHO??????C???????????FNJ?@u@ESD?@u@BE??????????????BBEVO??IB????????????????LVDO?????????????EES????????\????F???ESU?@xAb@F?ES???????????????c@XCO??????????B?????????JZB?@o@TLV?@l@VDI?@p@CK??????????????ILBa@?????????????HCKEd@??RI??????????????ZHGO?????????????NES??????G????T???J??@?????C?????C?????@??e@?????????????CK??B???GD?YE????????????????`@CK?????????M?????CK??????@\??????????????EO?UDP???????I????????????}@MHS?@j@FNJa@??VDF?@xAz@sAX?@t@LB]?@l@NW?BE???????????????CMH???????I?????????????WFL?@g@K`@La@??BEJ?????????????JZF????XC??????????????BESODP?????????????`@X??ZD??????????????FN???}@?BO?Y?@??N???G?????????????MO?C?@j@UFE?@l@ESD?@q@MHO?????????????JBEV?@v@VDI?@i@CK????????????B??CK??????@IWY?????????????????Cb@Ff@?????????????GGD[???????????C??BE??????@c@DP@????????????ZIB?????????????J?e@B??????@NGDq@????????????JRId@???????????J??CK??????@PLB?????????????????Nf@c@QO?QA?X?@v@XCB?@????Q????B????????OXCM?@j@YE????????B????B??]?@??C????T????????????NO?M?@????T??????????D?@]JZ??????????????????TGD??????????????JJZa@??????????N??HG?????@NCK??????????????????J_@?e@?@FXC??????????????????DNWO?????????????FFNO????????????FBEVa@??VDI?????????????CO?K?@r@FNS?@i@LBHO??HGQ?????????????[FND??????BEU?@l@VD??????????????VLBH[?OHGQ??????????????`@X?Z?????@QIBj@MH???B???????????@FWYq@????\????????f@IBd@?b@_@??WYL??????????????NW????XC?TR???G???????????XC?L?@j@MH?^I????????????????\NW????????T????C??U?@D????C???????????????e@?@^u@?OIBH?????????????HBE??????????????DKFGa@??SBC??????????????LB??????@AGD??????????????????Mb@F[??SB????C???????????@URIj@BE??????U????????@FGD???????????????T??GD???????????T???GD?????@TWYv@????????????]LB??C?????S????????GR?b@F???????????????TBE????????H??????BE??????@HDP??????????????????RFNDa@??BEU??????????????VDL?@aAz@sAX?@i@YNyBBE?????????????RIDP?????H?????D??M???@????E???M?????????OLB\?@???H????B??????????d@CKB?@g@RIG?@i@MHRd@??UF\??????????????LBD?????JZW?@r@b@F[HG??????????????Q?PC???????B????]???H?@r@CKE?@?????E????]??????@GBE?????????????????D?@Fj@?G_@?V?@o@DP`@?@i@VDB?@l@JZG?@g@CDNe@B[?????????????MHGO???????????M??XC??????@DES?????????????????Y^IO?????????????DBEb@[??VDN????????????m@NW\????\Jb@?@p@f@KFHG_@????M?????X?????LB?BE?????????????yI}G??TLYv@??DPB?????????????b@k@?F?@?C????W????????????OMHI?@bANWX[??FNBES????????????????VRIa@?????????????BES????????]??????TL??????@QFN??????????????????GESQO??DPB?????????????UF???`@XOES??D?????????JZ?b@F???????????????GBE????????G??????BE??????@UKFGq@??SBC??????????????LBC??????HG?ES?????????????CK??ES???????????????c@??\J????????B??????\J??????@QFN??????????????????B^IFO??MH???B??????????QRB?@o@BEV_@??z@AX?????C?????????????e@^IO?????????????KFNDf@??BEU??????????????VDL?????RIM?@bAMH?UF???????????????GBE?????D?????Y??M???@F????`@????????????????JO?P?@J???B?????????????????QBE_@UF???????????????TWY???????C???????WY??????@GZD??????????????????LWYCd@??LBC?????????????OHGQ?????QR?BE?????????????c@Q??TLq@??D????????E??C?@G\Ji@????????????Bb@FGm@??SBC??????????????HGQ?????ESV?@n@?@MTL???????????????J??DPB?@@b@FGO??JZF??????????????NWB?@u@z@dMX?@Ci@?GMH??????????????Ne@BCO??LBC??????????????HGQ?????ES?VD?????????????IB??DPj@?E?????U???U????@??B???G?????????????E_@?CWY?????\???I???????LB?\J???????????????QFN?????C?????????BEU??????VDL?@n@RIM?@l@HGU?@r@FNHGD??????????????FNWO?????????????MQRD?@o@MHC?@j@DPEa@?d@\JKFN??????????????LMHf@?????????????IIBCa@??LBC?????????????Hm@?GDP???????N?????D??a@FN?GDH?????????????EO?S?@WQR?W??????????????f@WYESO??C????B???????BE?XCM?????????????YES??????????????FBEV[??DPC??????????????b@FMHG??????@URI?????????????????GXCO?????????????BDPB?@r@QRLd@??e@B????]??????G????@e@??????]?????????????G\J_@BE?????????????JZ??TL???????????????C??BE??????c@?????B??F?@X@?ZO?DO?B?@Qo@?RIB??????D?????N????FN?BEU?????????????GMHV[??IB?C?????????????CKE????e@B?DPG?????????????SBEO?????????????GIBC[??GDF??????????????CKBES?????@V??X?????????????????Lf@YEJZO?????K????????HG??????@e@]C???????????????TESB}@??b@FG?????????????OJZF??????CKBMH??????????????CKF????????????M??IBC?????f@HGE?@i@RI?BE?????????????XCM??H?@@JZF?@j@C`@EJZ??????????K????HG??????@e@]C??????????????????T^IFd@??MHB??????????????QRL?????b@F?QRK?????????????GMHV?@t@IBC?@t@GDF?@n@CKB?@E??????????????NBEIO??CKH??????????????JZ?b@????YC?CKH?????????????TIB^a@??XCM??????????????TL?V?Y@?@G?Z?????M?????????IBH?@t@BE?PCD?????????????BESO?????????????LBEVf@??DP`@CK????????????????BLB[?????????????CNW]?@p@XCWd@??JZPCK??????????????BCK_@?????????????H]CBO??RIG??U????????????????BI`@_@???????????B??DPG??????SBC?@n@GD?FN?????????????BET??L?@I????F??????????????GYE_@UF???????????????Je@Bd@??X?????J???C????@B????]?????C??????HGQ?@g@UFGO?D?@B????C????????????????BCKOHG???????????????e@]C???F?????Q???M???@R?L@VDH?@q@ESQ?@l@b@FS?@l@ESFNW??????????????Z\JBa@??UF`@?????????????GCKOHG?????????????`@R??LB^o@?[XCM?????????????TTLYO???QR???L????Y??????@???\??????B????????Cd@?WBE????P????W???G????@U????R??????????????G\Ja@BE?????????????JZ??TL@???D?????Y???Y??@?D????C?????D?????BEV?@g@DP?`@XG?????????????U]C?DP?????????????^IM???ES?UFC?????????????HBE?IB?????????????MH???BE?ZDY\J????????????????CQRO?????????????ZWY?CK?????????????ESCf@WY[?Um@?]?@TLB????^??????????a@V`@N?@Sl@?d@UFG?????????????ZZDLO??IB?\????R????????????L?@Eu@?C?@GFNt@????J???b@????B??@MGD????????????????CWYORI???????????????G\J????B???D????D????@??E????????V???M?@g@NWVKF_@?????????????TIB^[??FND????????????OYECWY???O?DTL_@?????????????QBEV_@??DPESB???????????????DLB^_@??XC?M?????????????XCW???B?@???\????B??????????QIBOCK??????????????\?PCD?@???B???I???????????]O?Ef@SBO?QDP?GD???????????????FWY???J?????C???L???@U????M????J???????FNB?@Mu@?Ea@?S?@Lr@I?YE???????????????QCK??????K????????MHB??????BEJGD??????????????BESBa@??IBC?????????????P?@EUFj@JZ?G???Y???????????Qm@?RLB?????c@??????`@???J?@ND@PTLj@GD????L?????????GDE?@Jg@?PO?LGD???????B?????C??G?@Gv@?X?@D???]????G???????a@NWVKF??????????????D`@XG_@??`@XI??????c@????????????G`@Xa@??????????B\JQ[??f@BEQRKO??IB\PC??????????????????JYE??????????C?????CKH???????]CWBE?i@?QNW????????????????UUFSV`@???????????????\CK]?@?`@XZ?@?BEXCK?g@?b@BEI?@?^IF?@Af@f@QUFf@GD?????????????MH??CK]??????????????KTLm@BE????????????QRB??K?@M??????????G??????????IFN?DP?????????????LB??DPGr@?XO?J?@R????????C??????MH??????S@CK]?@?c@QJ?@G?@GXC_@??????????G????IB??????CK?b@F??E??????I???????????NFN?UFi@DP?????B?????M????@z@QR?KF??????????????HG????IB^?@B?@CYE????????F???????GD??????LB?CKH??????????????]ES?QRu@PC??B?????????E?????^?@IMH?\J??????????b@????K?@FHG?DPr@MH????U??????X????@D?@LWY?\J??????B?????]????@^O?B?@WQR[WY@QR??L??????????B?????c@?@Jb@F?DP???????B???????C?@KHG?DPv@MH?B????????????U??????BBE?o@?UFN?DPg@LB????D?????????J?@TESQ?@?BEJ?@G?@CMHa@VD??????????????BE??U??e@?@b@a@?N?@z@a@?Q^I?GD???????????E???HJZ????K?????????H??C?@NDP?NW???????B???????GCK?GD????????N??????T?@Ib@Fd@CK??????????????GD??N??W?@S?@QXC?e@B????C???????G?????U?@R?@ESB_@CK??????????????BE??C??b@?@FXC?DPg@??H??????C?????C?@FXC[DP@HGU???????????B???????c@CK?]Cg@HG?????Q???????I??@Nd@?DBE??J???????????B??\?@DLB[^Ig@NW??P??????????]???????^\J?HGq@UF??????G???????B?@CMHCO??LBC??????????????B?@Z}@BEJZ?LB???????H??????M??@BCK?]C@HG???????????`@??E?@Je@BO^I??????????????NW\????`@?@XO?ZIB?MH???????B???????C?@FHG?DP@MHU???????????`@????????DKF?CK??????????????GD???`@?@H?@J[?BKF?ES???Q?????????D?????F?@BDP?NW???????]???????C?@MIB^?@?BEV?IB?@b@NWOIB??????????????MH?B????HGT?LB?@BQRa@WY??????????????`@R????LB^?@\?@RBE???Q???????J?????C?@KFNd@UFv@HG??????I???????PWY?\JB?Y@?@D?H@VD?TL??????????C????Cc@Q?TLY??????????????Db@F?SB^@??BEVIB????????????????????MZDF?@OMHBVD???????????F????GD???????@CTL?YE???????????U???BLBM?@?BEVIB????????????M???SB????B???MHB?@V?@BLBOBE??????????????JZT????D?@RBE?TLt@GD??????L?????c@????@B?@LCK?BE???U????????B??????M?@c@ZD?FN??????????D????B?@ECK]?@?YEJ?@G?@UMH?VD???????B???????ZCK?HG???????????T???TJZ?}@c@QX?CJZAAABACADAEAFAGAHAIbCEcCGeCIfCFdCH~@GhCHiCI~@JAKALAMANAO~@PAQARASATAUAVAWAXAYAZA[A\A]A^A_@A`@Aa@Ab@Ac@Ad@Ae@Af@Ag@jCKAh@Ai@Aj@Ak@Al@Am@An@Ao@Ap@Aq@Ar@As@At@Au@Av@|As@sCw@Ax@Ay@Az@A{@A|@A}@A~@A_AA`AAaAAbAAcAAdAAeAAfAAgAAhAAiAtCt@Aw@uCjAAkAAlAAmAAnAAoAwCw@xCkAzCmAApAAqAArAAsAAtAAuAAvAAwA|Cx@AjAyClA{CpA~CrA`DtAAxAAyAAzAA{AkAjAcDmA~AqA_DsAjAxA`B|AA}AA~Aw@kA}C_BA`BAaBAbBaBcBAdBAeBAfBAgBAhBAiBAjBaBlA_BkBAlBAmBAnBAoBApBAqBcBdBnDfBpDhBrDjBw@rBAsBAtBAuBAvBsDmA~AkBtDmBvDwBAxBAyB_ApAdDsAjDyAAzBA{BA|BnAqAiDtAaDvAnAkB~DnBAwB`EyBdErAeD}BA~BA_CA`CAaC_A_BmDaByDeBoDgBqDiBiEsAeBzBcE|BnE`BAbCAcCAdCAeCrEtAfDyAbE{B_AfCAgCeAxA`BhCAiC{ALkCNlCCeAuAbDwAjBjCAkClAlCAmCkAy@vCnCAoCApCAqCArCAsCAtCAuCyEkCjByAgD{AvEgCeAvCAwCAxCAyCAzCA{CxEvAoA|CA}CeA}BkE~CA_DA`DfElBuDnBgExBcFwCeFyCgF{CwEMzAOx@aDAbDx@zAcBcDAdDnAeDAfDAgDx@hDAiDAjDx@zBlAsB|DuB_AkDAlDAmDpFN|AnDAoDApDAqDArDkAsDAtDAuDAvDlDCnBO}FtBAwDAxD_GlD{Ah@pCyDAzDw@{DA|DA}DA~DA_EA`EAaEAbEiFwAx@|A_AnApEfBAcEAdEAeEAfEAgEmFmB_ExBmBxCfFzChFg@dGCvFfDw@hEsGnBnFyBw@iEAjEAkEAlEAmEoBwDeGg@{Ez@AnEAoEApElBqEArEoG}AnBsEmBtErAi@AuEAvEqBoBwDqBy@wEAxEAyEAzEx@hCxGjEzGlE{GC_H{CrFbDrA{EA|EA}EA~EqFC|GxDy@uEaHg@|@_F|EpC~ErC`FtCbFoAnHoC}EqC_FsCaFuCy@yDoBuBhHg@sHvBcHxEeHzEpBcEqGeErGgEqBwB|F{BsBkErBmEtGyCoFg@lHg@vHxBpGoAyFiD|@`FAaFAbFAcFoAaBpBgBqEjBtBhB_IbBvGgDfGmDiH|EjH~EzAsEjF}CrHzDyHzCbHpBpHpCoHsCqHoAtHyEcIwAmHvEzHyB{HjDlB~BlE`CsBdFAeFrBfFAgFAhFeIqBwGdD~GrEwH|B`IiBaGtDbGvD|@iF_BqAeE}BAqE|@jFAkFAlFAmFeBaDuB~CkF`Dx@nFAoFApFqIkFrImFjAvCdFxCuG{Cw@qF{DtB}DvBhIeFiIgFkIg@`HClIjBuB_CmEaCtI_D}I`DuIoFvIbD|I`CfHiChG|DiG~DkG`EmGbE_JaCtFdDzIlEAfFjIhFgIg@sF{AbJfFcJg@xHlEdI{CoAbCtEdCfJg@aCBArFeJmEiJCgJcCuEeCdJgFmCQoCsFtBtFAuFAvFAwF~@xFAyFAzFA{Fy@j@A|FA}FA~FA_GA`GuAaGAbGkJhFvJg@vB|FrJ~FtJ`GaI}EkHNnJuFoJwFlJRAsFzEmC|JvB~@cGAdGAeGbI{CwBsFfIzE}JdG~JNAsEwBSAfGAgGAhGy@iGdHyEhJrF`Kg@~IpFuAyFqJ{FaKeG_Kg@bKfGdKhGnImAA_BoEbBjKgGxBCzJvFgKzFuAjGnCR{Jg@fKbDmKhGy@kGAlGpKQmJg@nKwFrKCjJdCuKeCrAmGAnGAoGApGAqGuJbGvBk@ArGyGsGxBtGAuGlAvGhKNvKnGwKpGyKg@oK{FsKlGy@wGAxG|K{FyJ~EzBOeKxE~KN_LCmIuD}BsE`J}DjG_ElGbEcL~DaJbEzBsEfL{C|ByG}BOhL{FiLC{BoGxKqG|@zGA{GA|G~FvB|@}G|HbFwA~GA_HA`HAaHgLg@wJ}FsJ_GwIlFsItAiBhDzFjDoL~FhAbHnLcHAdHlKpAaEtAiBhCaLvDbL{CeL_EhAeHAfHtKRsLfHqLg@{BgHAhHAiHrL`E|BxGjLpGwLqGwAl@qCjHAkHAlH`Cg@xLg@tLhHzLiHyLm@rCmHAnHAoH`LyEhA_GvLbEwArGzKhGAtG_CsF{LzEhApH|L`G}Lg@`CC_CScKgGmLaF}HcFpL`G~BqAoIqE~LfGkKC~BeDwFgD_MrAjEqE`MgGkL{GlLtBw@qHxIwDbMhGaMsAjA}BpIrEcMtAA}BArHAsHAtHAuH?vH</div>
<div id="globalStacks" style="display:none"></div>
<div id="methods" style="display:none">@??A??B?????B??C??@M?KC?D??E??@D?_G?F??A??A?????B??C??pS?WC?G??H??@U?wL?I??J??PJ?sC?I??K??Px?GK?I??L??pL?_G?M??A??B?????I??K??@A@sK?I??N??PD??H?O??P??pB?wB?Q??R??@C?SF?F??S??PI?_hAT??U??p@?Co?I??K??@o?oJ?V??W??@A?SG?V??W??`C?gG?V??X??`E??K?Y??Z??`B????[??\??pC?Of?[??]??P??gf?^??]??pD?Kk@^??_??PA?sk@^??`??`D?Km@a??b??P@?sk@a??b??P@?{k@c??_??PL?w\?c??d??PP?Wt?e??f??pE??n?e??g??`@?gp?e??h??P??_q?e??i??`D?{T?j??k??pC?O]?l??m??PN?[f?n??o??PO?Sq?p??q??pI?cP?p??r??PE?OW?M??A??A?????O??P??PG?GC?s??P??@B????t??u??PJ?OD?v??w??pR?cD?v??x??p[?{E?y??z??P@?Cn?{??z??@D?CH?|??}??`G?cS@|??~??@Z?_x??@?A??A?????@@?C??pA?Cs?A@?C??P@?kf?|??B@?@V??F@C@?C??pB??O?D@?A??A?????C@?C??pH?_O?E@?F@?@@????v??G@?`D?OF?H@?I@?@I??C?J@?I@?pn?sB?K@?L@?`@?WP?K@?L@?`F?Ka?M@?N@?P[?wA@O@?P@?pG?WF?Q@?b??@C????R@?S@?P@?[]?T@?U@?`k?k[DT@?V@?`C?S]DW@?X@?P??WH?Y@?Z@?PB?KG?[@?\@?`@?OF?[@?\@?`a?wG?]@?^@?P@?_j?]@?_@?PM?_Z?v??G@?PF?SF?H@?`@?pR?GB?J@?a@?@B?cE?b@?c@?@C?gp?d@?e@?@b?{F?d@?A??A?????d@?e@?@W?_F?f@?g@?pF?SU?f@?g@?`B?gQ?h@?i@?PD?KJ?j@?i@?P@?GH?j@?i@?@Y?SG?j@?g@?Pl@GQ?k@?A??A?????j@?i@?p_?WG?l@?g@?@B?gH?l@?m??P_?CH?m@?A??A?????l@?m??P@?cD?n@?A??A?????A??o@?B?????d@?e@?`Z?cF?l@?p@?@G??A@l@?p@?`FAgF@q@?A??A?????J@?a@?P??[E?r@?s@?@A?OYAr@?t@?p@?kr@u@?t@?pF?KE?h@?t@?PM?OH?v@?t@?pB?OB?w@?x@?@??OC?w@?A??A?????f@?g@?`D?KU?y@?z@?@F?_^D{@?|@?@A?sL?}@?~@?PA?Ge?}@??A?@M?Sf?}@?@A?@??su@AA?A??A?????H@?`@?`V?KB?BA?CA?pB?K_?DA?CA?`??kA?DA?CA?pG?{V?DA?A??A?????}@??A?@D?Kf?}@?EA?P`?wj?FA?A??A?????l@?m??`A?cD?n@?m??pA?[A?GA?A??A?????j@?i@?P??OF?HA?IA?PA?[C?{@?JA?p@?wI?KA?JA?@??[|?LA?A??A?????l@?p@?@V?OB@l@?MA?@A?[I?NA?OA?@A?gH?PA?A??A?????d@?e@?Ph?CG?QA?A??A?????l@?m??PN?OG?RA?A??A?????l@?g@?@??gH?l@?A??A?????BA?CA?@B?K_?SA?R??@X?[P?J@?I@?`s?{B?J@?TA?pH?GE?d@?UA?p??GB?d@?UA?p??sC?VA?UA?PA?cE?VA?WA?pA?KF?d@?XA?p@?GB?d@?XA?@??SC?j@?i@?@[?WG?DA?YA?@C?Sn?ZA?YA?@A?{B?F??m??`@?cU@F??m??pP?C`?[A?\A?PI?wmBl@?p@?Po@?F@RA?]A?@??WF?{@?JA?@@?wI?}@?^A?PA?gw?KA?A??A?????l@?m??PC?oD?_A?A??A?????r@?s@?P@?OYA`A?A??A?????f@?g@?@C?GU?{@?m??P@?kE?}@?A??A?????l@?m??Pa?CH?aA?bA?`B?oL?cA?A??A?????d@?e@?PV?_F?d@?dA?pB?CH?eA?A??A?????fA?C??PM?wG?gA?hA?@B?SG?cA?iA?@@?GJ?jA?C??P???Q?kA?lA?@@?gH?v??G@?pC?OF?mA?nA?@@?{@?oA?nA?@B?{e@pA?A??A?????DA?CA?pF?wV?DA?CA?PP?CV?t??u??@E?OD?qA?A??A?????H@?`@?`S?GB?rA?|@?@D?K\?rA?|@?p@?W[?rA?sA?p@?ON?rA?sA?PH?sM?[A?tA?`@?cXB[A?tA?p@?_ZBuA?A??A?????h@?t@?pK?OH?u@?vA?@K?OC?h@?vA?`D?gF?wA?xA?@??[X?v@?A??A?????H@?`@?PO?CB?H@?`@?PU?KB?yA?zA?P@????{A?|A?pP????}A?~A?PB?????B?U??`@?KW?J@?I@?`??{@?DA?@B?P??kA?DA?@B?@N?sO?HA?IA?@??WC?HA?A??A?????T??U??@C?Co?ZA?YA?@??{B?t??u??PF?OD?V??AB?@@?[K?t??u??@G?OD?b@?BB?P??kd?CB?DB?`B?SE?CB?A??A?????s??P??PA????Q??EB?`???J?Q??FB?`N?GG?F??S??`@?_fAJ@?I@?@y??C?J@?I@?pK?_A?GB?JA?@@????pA?JA?`A?{KAHB?A??A?????{A?|A?pF????IB?|A?pD?????B?JB?p@?k\??B?KB?pC?w]?LB?MB?pK?{T@J@?I@?p`?GB?J@?I@?PG?GA?r@?NB?P@?Gh?r@?OB?p@?oV?h@?OB?@D?_L?l@?m??P??sF?f@?m??P??GI?NA?m??P@?_D?H@?`@?@L??B?PB?A??A?????V??X??P??sJ?v@?t@?@D?SB?w@?QB?P??kN?RB?SB?@??GP?RB?A??A?????I??K??Pf?cJ?I??TB?@T?wL?Q??m??@O?[D?UB?A??A?????v??w??PG?KD?mA?~@?pE?WA?oA?~@?@C?KS@oA?VB?Pe@oh?WB?A??A?????I??TB?pM?wL?Q??A??A?????I??K??pr??K?Q??XB?pH?gN?Q??YB?@L?CT?Y??Z??@D????ZB?[B?@A????W@?\B?@B?__?t??u??pH?OD?I??TB?`L?sL?t??u??`K?SD?]B?A??A?????s??P??pB????I??^B?@W?GN?I??_B?`??cO?]B?AB?`N?CJ?`B?m??`@?GA?v??x??`Z?{E?}A?[B?P?????LB?\B?@?????aB?A??A?????BA?CA?PA?K_?t??u??pM?SD?]B?m??PF?_D?]B?m??pA?WD?J@?I@?PC?{@?BA?bB?pB?wb?BA?bB?PF?Sa?J@?I@?@d?oB?v??x??@N?cE?cB?dB?@I?gA?mA?m??pE?C@?oA?A??A?????oA?VB?`v@Oi?cB?dB?PF?_A?mA?A??A?????oA?VB?`R@og?eB?A??A?????I??_B?pA?gO?G??fB?P??WH?gB?A??A?????{??z??`B??H?{??hB?@??CF?C@?A??A?????|??}??PN?sS@iB?jB?`F?cX?kB?A??A?????oA?VB?@z@Si?H@?`@?pA?_A?lB?C??PY?CF?O??mB?`??w@?O??mB?@??_B?I??A??A?????</div>
<span style="position:fixed; bottom: 0; right:0; padding: 2px 4px; background-color: #ffffe0; border-top: 1px solid #ffc000; border-left: 1px solid #ffc000; border-top-left-radius: 4px;"><span id="produced">Produced by <a href='https://github.com/jvm-profiling-tools/async-profiler'>async-profiler</a>&nbsp;</span><span id='match' style="display: none">Matched: <span id='matchval'></span>&nbsp;<span id='reset' title='Clear'>&#x274c;</span></span></span>

<h1 id="title">Heatmap, CPU</h1>

<canvas id='canvas'></canvas>
<div id='hl'><span></span></div>

<span id='status' style="position:fixed; bottom: 0; left:0; padding: 2px 4px; background-color: #ffffe0; border-top: 1px solid #ffc000; border-right: 1px solid #ffc000; border-top-right-radius: 4px; display: none">&nbsp;</span>
<script>
	// Copyright 2020 Andrei Pangin
	// Licensed under the Apache License, Version 2.0.
	'use strict';
	let root, rootLevel, px, pattern;
	let reverse = true;
	const levels = Array(0);
	for (let h = 0; h < levels.length; h++) {
		levels[h] = [];
	}

	const canvas = document.getElementById('canvas');
	let c = canvas.getContext('2d');
	const hl = document.getElementById('hl');
	const status = document.getElementById('status');

	const canvasWidth = canvas.offsetWidth;
	let canvasHeight = canvas.offsetHeight;
	canvas.style.width = canvasWidth + 'px';
	canvas.width = canvasWidth * (devicePixelRatio || 1);
	canvas.height = canvasHeight * (devicePixelRatio || 1);
	if (devicePixelRatio) c.scale(devicePixelRatio, devicePixelRatio);
	c.font = document.body.style.font;

    const search = typeof searchIterative === 'function' ? searchIterative : searchSimple;
    const init = typeof renderHeatmap === 'function' ? renderHeatmap : render;

	const palette = [
		[0xb2e1b2, 20, 20, 20],
		[0x50e150, 30, 30, 30],
		[0x50cccc, 30, 30, 30],
		[0xe15a5a, 30, 40, 40],
		[0xc8c83c, 30, 30, 10],
		[0xe17d00, 30, 30,  0],
		[0xcce880, 20, 20, 20],
	];

	function getColor(p) {
		const v = Math.random();
		return '#' + (p[0] + ((p[1] * v) << 16 | (p[2] * v) << 8 | (p[3] * v))).toString(16);
	}

	function f(level, left, width, type, title, inln, c1, int) {
		levels[level].push({left: left, width: width, color: getColor(palette[type]), title: title,
			details: (int ? ', int=' + int : '') + (c1 ? ', c1=' + c1 : '') + (inln ? ', inln=' + inln : '')
		});
	}

	function samples(n) {
		return n === 1 ? '1 sample' : n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ' samples';
	}

	function pct(a, b) {
		return a >= b ? '100' : (100 * a / b).toFixed(2);
	}

	function findFrame(frames, x) {
		let left = 0;
		let right = frames.length - 1;

		while (left <= right) {
			const mid = (left + right) >>> 1;
			const f = frames[mid];

			if (f.left > x) {
				right = mid - 1;
			} else if (f.left + f.width <= x) {
				left = mid + 1;
			} else {
				return f;
			}
		}

		if (frames[left] && (frames[left].left - x) * px < 0.5) return frames[left];
		if (frames[right] && (x - (frames[right].left + frames[right].width)) * px < 0.5) return frames[right];

		return null;
	}

    const marked = [];

    function render(newRoot, newLevel, minLevel) {
        minLevel = minLevel || 0;
        if (root && minLevel === 0) {
			c.fillStyle = '#ffffff';
			c.fillRect(0, 0, canvasWidth, canvasHeight);
		}

		root = newRoot || levels[0][0];
		rootLevel = newLevel || 0;
		px = canvasWidth / root.width;

		const x0 = root.left;
		const x1 = x0 + root.width;

		if (minLevel === 0) {
		    marked.length = 0;
        }

		function mark(f) {
			return marked[f.left] >= f.width || (marked[f.left] = f.width);
		}

		function totalMarked() {
			let total = 0;
			let left = 0;
			Object.keys(marked).sort(function(a, b) { return a - b; }).forEach(function(x) {
				if (+x >= left) {
					total += marked[x];
					left = +x + marked[x];
				}
			});
			return total;
		}

		function drawFrame(f, y, alpha) {
			if (f.left < x1 && f.left + f.width > x0) {
                let match = pattern && pattern.test(f.title) && mark(f);
                const fw = f.width * px;
                if (fw < 0.1) {
                    return;
                }
                c.fillStyle = match ? '#ee00ee' : f.color;
				c.fillRect((f.left - x0) * px, y, fw, 15);

				if (fw >= 21) {
					const chars = Math.floor(fw / 7);
					const title = f.title.length <= chars ? f.title : f.title.substring(0, chars - 2) + '..';
					c.fillStyle = '#000000';
					c.fillText(title, Math.max(f.left - x0, 0) * px + 3, y + 12, fw - 6);
				}

				if (alpha) {
					c.fillStyle = 'rgba(255, 255, 255, 0.5)';
					c.fillRect((f.left - x0) * px, y, fw, 15);
				}
			}
		}

		for (let h = minLevel; h < levels.length; h++) {
			const y = reverse ? h * 16 : canvasHeight - (h + 1) * 16;
			const frames = levels[h];
			for (let i = 0; i < frames.length; i++) {
				drawFrame(frames[i], y, h < rootLevel);
			}
		}

		return totalMarked();
	}

	canvas.onmousemove = function() {
		const h = Math.floor((reverse ? event.offsetY : (canvasHeight - event.offsetY)) / 16);
		if (h >= 0 && h < levels.length) {
			const f = findFrame(levels[h], event.offsetX / px + root.left);
			if (f) {
				hl.style.left = (Math.max(f.left - root.left, 0) * px + canvas.offsetLeft) + 'px';
				hl.style.width = (Math.min(f.width, root.width) * px) + 'px';
				hl.style.top = ((reverse ? h * 16 : canvasHeight - (h + 1) * 16) + canvas.offsetTop) + 'px';
				hl.firstChild.textContent = f.title;
				hl.style.display = 'block';
				let details = f.details || '';
				canvas.title = f.title + '\n(' + samples(f.width) + details + ', ' + pct(f.width, levels[0][0].width) + '%)';
				canvas.style.cursor = 'pointer';
				canvas.onclick = function() {
					if (f !== root) {
						render(f, h);
						canvas.onmousemove();
					}
				};
				status.textContent = 'Function: ' + canvas.title;
                status.style.display = 'inline';
				return;
			}
		}
		canvas.onmouseout();
	}

	canvas.onmouseout = function() {
		hl.style.display = 'none';
		status.textContent = '\xa0';
        status.style.display = 'none';
		canvas.title = '';
		canvas.style.cursor = '';
		canvas.onclick = '';
	}

    window.onkeydown = function() {
        if (event.ctrlKey && event.keyCode === 70) {
            event.preventDefault();
            search(true);
        } else if (event.keyCode === 27) {
            search(false);
        }
    }

    document.getElementById('reset').onclick = function() {
        search(false);
    }



    class DataBuffer {
        data;
        pos = 0;
        constructor(encodedData) {
            this.data = encodedData;
        }

        nextVarInt() {
            let res = 0;
            let shift = 0;
            let b;
            do {
                b = this.byteAt(this.pos++);
                res |= (b & 0x1F) << shift
                shift += 5;
            } while (b >= 0x20)
            return res;
        }

        byteAt(pos) {
            return this.data.charCodeAt(pos) - 63;
        }

        int30(pos) {
            return (this.byteAt(pos++) << 0)
                | (this.byteAt(pos++) << 6)
                | (this.byteAt(pos++) << 12)
                | (this.byteAt(pos++) << 18)
                | (this.byteAt(pos) << 24);
        }

        int36(pos) {
            return (this.byteAt(pos++) << 0)
                | (this.byteAt(pos++) << 6)
                | (this.byteAt(pos++) << 12)
                | (this.byteAt(pos++) << 18)
                | (this.byteAt(pos++) << 24)
                | (this.byteAt(pos++) << 30);
        }

        varInt(pos) {
            let res = 0;
            let shift = 0;
            let b;
            do {
                b = this.byteAt(pos++);
                res |= (b & 0x1F) << shift
                shift += 5;
            } while (b >= 0x20)
            return res;
        }

    }

    class HeatmapCollection extends DataBuffer {

        maxZoom;
        blocks;
        zoomToCounts;
        zoomToMaxes;
        zoom;

        constructor(encodedData) {
            super(encodedData);

            this.maxZoom = this.nextVarInt();   // fixme
            this.maxZoom = 3;

            const startMethodsCount = this.nextVarInt();
            const starts = new Set();
            for (let i = 0; i < startMethodsCount; i++) {
                starts.add(this.nextVarInt());
            }

            const lz = new Lz78Data(this, starts);

            let max = 1;

            let prevByte = -1;
            const blocksCount = this.nextVarInt();
            let counts = new Uint32Array(blocksCount);
            for (let i = 0; i < blocksCount; i++) {
                let v = 0;
                let p = 0;
                let hasMore = false;
                do {
                    if (prevByte === -1) {
                        prevByte = this.byteAt(this.pos++);
                        hasMore = (prevByte >>> 5) === 1;
                        v |= ((prevByte >>> 3) & 3) << p;
                        prevByte &= 7;
                    } else {
                        hasMore = (prevByte >>> 2) === 1;
                        v |= (prevByte & 3) << p;
                        prevByte = -1;
                    }
                    p += 2;
                } while (hasMore);
                counts[i] = v;
                max = Math.max(max, v);
            }

            this.blocks = lz.decode(counts);

            this.zoomToCounts = new Array(this.maxZoom);
            this.zoomToMaxes = new Array(this.maxZoom);

            this.zoomToCounts[0] = counts;
            this.zoomToMaxes[0] = max;

            for (let z = 1; z < zoomToGroupSize.length; z++) {
                const size = zoomToGroupSize[z] / zoomToGroupSize[z - 1];
                const nextCounts = new Uint32Array(Math.ceil(counts.length / size));
                for (let i = 0; i < counts.length; i++) {
                    const index = (i / size) | 0;
                    nextCounts[index] += counts[i];
                    max = Math.max(max, nextCounts[index]);
                }
                this.zoomToCounts[z] = counts = nextCounts;
                this.zoomToMaxes[z] = max;
            }

            this.data = null;
        }

        setZoom(zoom) {
            this.zoom = zoom;
        }

        heatmap() {
            return this.zoomToCounts[this.zoom];
        }

        max() {
            return this.zoomToMaxes[this.zoom];
        }

        currentTimeBlock() {
            // FIXME 20 is hardcoded
            return 20 * zoomToGroupSize[this.zoom];
        }

        startBlock() {
            const blockMs = this.currentTimeBlock();
            const timeBlockMs = blockMs * heatHeight * 20;
            return Math.floor(startMs % timeBlockMs / blockMs);
        }

        count() {
            return Math.ceil((this.heatmap().length + this.startBlock()) / 20 / heatHeight) * 20 * heatHeight;
        }

    }

    class LzChunk extends Uint32Array {
        constructor(size) {
            super(size);
        }

        copyWithNext(element) {
            let result = new LzChunk(this.length + 1);
            result.set(this);
            result[this.length] = element;
            return result;
        }
    }

    class Lz78Data {
        data;
        starts;
        lz78;

        tmp = [];
        prevSubTreeId = -1;

        constructor(data, starts) {
            this.data = data;
            this.starts = starts;

            this.lz78 = [new LzChunk(0)];
        }

        decode(counts) {
            const synonymsCount = this.data.nextVarInt();
            const synonyms = new Uint32Array(synonymsCount);
            for (let i = 0; i < synonymsCount; i++) {
                synonyms[i] = this.data.nextVarInt();
            }

            const tailsCount = this.data.nextVarInt();
            const tails = new Uint32Array(tailsCount);
            for (let i = 0; i < tailsCount; i++) {
                const tail = this.data.nextVarInt();
                tails[i] = (tail < synonyms.length ? synonyms[tail] : tail) - synonymsCount;
            }

            const result = new Array(counts.length);
            for (let i = 0; i < counts.length; i++) {
                result[i] = new Array(counts[i]);
            }

            let thisChunk = null;
            let currentTail = 0;
            const tmp = [];
            let t = -1;
            for (let block of result) {
                for (let i = 0; i < block.length; i++, currentTail++) {
                    t++;
                    const tailId = tails[currentTail];
                    if (tailId < this.lz78.length) {
                        const tail = this.lz78[tailId];
                        if (tail.length !== 0 && this.starts.has(tail[0])) {
                            console.log(t, 'only', tailId);
                            block[i] = tail;
                            continue;
                        }
                    }

                    if (thisChunk === null) {
                        const chunkId = this.data.nextVarInt();
                        const prevChunk = this.lz78[(chunkId < synonyms.length ? synonyms[chunkId] : chunkId) - synonymsCount];
                        const addMethodId = this.data.nextVarInt();
                        console.log(t, 'chunk', chunkId, addMethodId);
                        thisChunk = prevChunk.copyWithNext(addMethodId);
                        this.lz78.push(thisChunk);
                    }

                    tmp.length = 0;
                    tmp.push(...thisChunk); // FIXME it is ok to push as is, or even as lz78 index

                    while (true) {
                        const chunkId = this.data.nextVarInt();
                        const prevChunk = this.lz78[(chunkId < synonyms.length ? synonyms[chunkId] : chunkId) - synonymsCount];
                        const addMethodId = this.data.nextVarInt();
                        thisChunk = prevChunk.copyWithNext(addMethodId);
                        this.lz78.push(thisChunk);
                        console.log(t, 'chunk', chunkId, addMethodId);

                        if (this.starts.has(thisChunk[0])) {
                            console.log(t, 'starts', thisChunk[0]);
                            console.log(t, 'ends', tailId);
                            const tail = this.lz78[tailId];
                            tmp.push(...tail);
                            block[i] = new Uint32Array(tmp);
                            break;
                        } else {
                            tmp.push(...thisChunk);
                        }
                    }
                }
            }

            return result;
        }
    }

    class Queue {
        data = new Array(1024);
        first = 0;
        afterLast = 0;

        push(e) {
            let a = this.afterLast;
            let d = this.data;
            d[a++] = e;
            if (a >= this.data.length) {
                a = 0;
            }
            if (a === this.first) {
                let d2 = new Array(d.length * 2);
                let i = 0;
                for (let p = a; p < d.length; p++) {
                    d2[i++] = d[p];
                }
                for (let p = 0; p < a; p++) {
                    d2[i++] = d[p];
                }
                this.data = d2;
                this.first = 0;
                this.afterLast = i;
            } else {
                this.afterLast = a;
            }
        }

        shift() {
            let i = this.first;
            let r = this.data[i++];
            if (i >= this.data.length) {
                this.first = 0;
            } else {
                this.first = i;
            }
            return r;
        }

        size() {
            let r = this.afterLast - this.first;
            if (r < 0) {
                return r + this.data.length;
            }
            return r;
        }

        reset() {
            this.first = this.afterLast = 0;
        }
    }

    function claimHtml(id) {
        let e = document.getElementById(id);
        let r = e.innerHTML;
        e.remove();
        return r;
    }

    let sq = 5;
    let sqPx = sq;
    let sqScale = 1;
    const canvasScrollPadding = 200;
    let canvasTimeHeight = 12;
    let canvasTimeHeightPx = 12;
    let ticksPerSecond = 2594003733;
    let startMs = 1664896697197;

    const zoomToGroupSize = [
        1,              // 20 ms
        50,             // 1 s
        50 * 5,         // 5 s
        50 * 60         // 1 m
    ];
    const zoomToHeight = [50, 60, 60, 60]

    let methods = new DataBuffer(claimHtml("methods"));
    let executionsHeatmap = new HeatmapCollection(claimHtml("executionsHeatmap"));
    let cpool = ["all","","one.nio.server.SelectorThread","run","one.nio.net.NativeSelector","select","java.lang.String","one.nio.net.Session","process","one.nio.http.HttpSession","processRead","processHttpBuffer","startParsingRequestBody","byte[]","handleParsedRequest","one.nio.http.HttpServer","handleRequest","one.nio.http.Request","getPath","substring","java.lang.StringLatin1","newString","one.nio.util.Utf8","read","toAsciiString","java.lang.invoke.LambdaForm$MH.0x0000000800cccc00","invokeExact_MT","java.lang.invoke.Invokers","checkCustomized","maybeCustomize","java.lang.invoke.MethodHandle","customize","updateForm","java.lang.invoke.MethodHandle$1","apply","java.lang.invoke.LambdaForm","compileToBytecode","java.lang.invoke.InvokerBytecodeGenerator","generateCustomizedCode","generateCustomizedCodeBytes","addMethod","methodPrologue","jdk.internal.org.objectweb.asm.ClassWriter","visitMethod","jdk.internal.org.objectweb.asm.MethodWriter","<init>","jdk.internal.org.objectweb.asm.SymbolTable","addConstantUtf8","jdk.internal.org.objectweb.asm.ByteVector","putUTF8","enlarge","RequestHandler1_handelPut","ok.dht.test.zhidkov.ZhidkovService","handelPut","ok.dht.test.zhidkov.model.storage.MemorySegmentDao","upsert","flushInBg","java.util.concurrent.Executors$DelegatedExecutorService","submit","java.util.concurrent.AbstractExecutorService","java.util.concurrent.ThreadPoolExecutor","execute","addWorker","java.lang.Class","java.lang.Thread","java.util.concurrent.ThreadPoolExecutor$Worker","runWorker","java.util.concurrent.FutureTask","java.lang.Class[]","ok.dht.test.zhidkov.model.storage.MemorySegmentDao$$Lambda$85.0x0000000800ccd240","call","lambda$flushInBg$1","ok.dht.test.zhidkov.model.storage.Storage","save","ok.dht.test.zhidkov.model.storage.Utils","jdk.incubator.foreign.MemoryAccess","setLongAtOffset","java.lang.invoke.VarHandleGuards","guard_LJJ_V","java.lang.invoke.IndirectVarHandle","getMethodHandle","java.lang.invoke.VarHandles$$Lambda$32.0x0000000800c747c8","java.lang.invoke.VarHandles","lambda$filterCoordinates$1","java.lang.invoke.MethodHandles","filterArguments","filterArgument","java.lang.invoke.DirectMethodHandle","rebind","java.lang.invoke.BoundMethodHandle","makeReinvoker","java.lang.invoke.DelegatingMethodHandle","makeReinvokerForm","java.lang.invoke.MethodType","invokerType","insertParameterTypes","load","mapForRead","jdk.incubator.foreign.MemorySegment","mapFile","jdk.internal.foreign.MappedMemorySegmentImpl","makeMappedSegment","java.nio.channels.FileChannel","open","sun.nio.fs.UnixFileSystemProvider","newFileChannel","sun.nio.fs.UnixChannelFactory","java.io.FileDescriptor","sun.nio.ch.FileChannelImpl","sun.nio.ch.FileChannelImpl$Closer","sun.nio.ch.NativeThreadSet","no_Java_frame","mapInternal","sun.nio.ch.FileChannelImpl$DefaultUnmapper","java.nio.file.Files","size","readAttributes","sun.nio.fs.LinuxFileSystemProvider","sun.nio.fs.UnixFileAttributeViews$Basic","sun.nio.fs.UnixFileAttributes","get","java.util.Collections","addAll","java.util.HashSet","add","java.util.HashMap","put","putVal","newNode","java.util.HashMap$Node","java.nio.file.Path","resolve","sun.nio.fs.UnixPath","resize","java.util.HashMap$Node[]","long[]","sun.nio.fs.UnixChannelFactory$Flags","toFlags","iterator","java.util.HashMap$KeySet","java.util.HashMap$KeyIterator","beginBlocking","java.nio.channels.spi.AbstractInterruptibleChannel","begin","java.nio.channels.spi.AbstractInterruptibleChannel$1","jdk.internal.foreign.MappedMemorySegmentImpl$1","sun.nio.ch.FileDispatcherImpl","sun.nio.fs.UnixFileSystem","writeRecord","asSlice","jdk.internal.foreign.AbstractMemorySegmentImpl","asSliceNoCheck","dup","toString","sun.nio.fs.Util","java.util.Arrays","copyOfRange","duplicateForMapping","keySet","java.lang.Object","java.nio.file.LinkOption[]","java.lang.ref.Cleaner","register","jdk.internal.ref.CleanerImpl$PhantomCleanableRef","openOptions","java.nio.file.OpenOption[]","jdk.internal.ref.CleanerImpl","jdk.internal.ref.PhantomCleanable","clean","performCleanup","jdk.internal.foreign.ResourceScopeImpl$ResourceList","jdk.internal.foreign.SharedScope$SharedResourceList","cleanup","ok.dht.test.zhidkov.model.storage.Memory","values","java.util.concurrent.ConcurrentSkipListMap","java.util.concurrent.ConcurrentSkipListMap$Values","ok.dht.test.zhidkov.model.storage.BaseEntry","java.util.ArrayList","grow","copyOf","java.lang.Object[]","getFileAttributeView","sun.nio.fs.UnixFileAttributeViews","createBasicView","java.lang.invoke.Invokers$Holder","linkToTargetMethod","java.lang.invoke.LambdaForm$MH.0x0000000800c15400","invoke","java.lang.invoke.DirectMethodHandle$Holder","invokeStatic","java.lang.StringConcatHelper","getFileName","toBytes","ofArray","jdk.internal.foreign.HeapMemorySegmentImpl$OfByte","fromArray","getRequiredParameter","getParameter","ok.dht.test.zhidkov.model.storage.Storage$$Lambda$86.0x0000000800ccd668","java.util.concurrent.ConcurrentSkipListMap$ValueIterator","java.lang.invoke.LambdaForm$MH.0x0000000800c09000","newArrayWithSuffix","newArray","jdk.internal.misc.Unsafe","allocateUninitializedArray","createFile","newByteChannel","one.nio.net.NativeSelector$2","asBasicFileAttributes","sun.nio.fs.UnixFileAttributes$UnixAsBasicFileAttributes","wrap","parseRequest","java.lang.String[]","doPut","java.util.concurrent.ConcurrentSkipListMap$Index","getHeader","trim","java.lang.invoke.LambdaForm$DMH.0x0000000800cd1000","newInvokeSpecial","allocateInstance","one.nio.http.Response","sendResponse","writeResponse","one.nio.util.ByteArrayBuilder","ok.dht.test.zhidkov.model.storage.MemorySegmentDao$$Lambda$85+0x0000000800ccd240","resolveSibling","ok.dht.test.zhidkov.model.storage.State","prepareForFlush","java.util.concurrent.ConcurrentSkipListMap$Node","write","one.nio.net.Session$ArrayQueueItem","newTaskFor","java.util.concurrent.LinkedBlockingQueue","offer","java.util.concurrent.LinkedBlockingQueue$Node","one.nio.server.AcceptorThread","createSession",];

    let currentHeatmap = executionsHeatmap;
    let currentHeatmapType = 'executions';

    let heatHeight = 60;

    let heatLastSample = -1;
    let heatActiveSample1 = -1;
    let heatActiveSample2 = -1;
    let heatDiffStart = -1;
    let heatDiffEnd = -1;
    let highlightStart = -1;
    let highlightEnd = -1;

    const titleText = document.getElementById("title").textContent;
    document.getElementById("title").style.display = 'none';
    document.title = titleText;

    const heatCanvas = document.getElementById('heatmap-canvas');
    const heatStatus = document.getElementById('status');
    const heatCanvasWrapper = document.getElementById('heatmap-canvas-wrapper');
    const heatCanvasContainer = document.getElementById('heatmap-canvas-container');

    let heatC;
    let prevDx = -1000000000;

    let searchExecutedCount = 0;
    let searchMax = 0;

    const timeOptions = {
        year: '2-digit',
        month: '2-digit',
        day: '2-digit',
        timeZoneName: 'short',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        fractionalSecondDigits: 2
    };

    const timeOptionsShort = {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        fractionalSecondDigits: 2
    };

    const timeOptionsTiny = {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hourCycle: 'h23',
        //hour12: false
    };

    function methodInfo(methodIndex, out) {
        if (methodIndex === -1) {
            out.className = '';
            out.methodName = 'all';
            out.location = 0;
            out.type = 3;
            return;
        }

        methodIndex--;

        let methodAndClass = methods.int36(methodIndex * 12);
        let locationAndType = methods.int36(methodIndex * 12 + 6)
        let className = (methodAndClass & 0x3FFFF) - 1;
        let methodName = (methodAndClass >>> 18) - 1;

        out.className = cpool[className];
        out.methodName = cpool[methodName];
        out.location = locationAndType >>> 4;
        out.type = locationAndType & 15;
    }

    function title(methodIndex, out) {
        methodInfo(methodIndex, out);
        const codeLine = (out.location & 0xffff);
        let locationSuffix = codeLine === 0 ? "" : (":" + codeLine);

        if (out.methodName === '') {
            return out.className + locationSuffix;
        }
        if (out.className === '') {
            return out.methodName + locationSuffix;
        }
        if (out.type >= 3 && out.type <= 5) {
            return out.methodName + locationSuffix;
        }

        return out.className + "." + out.methodName + locationSuffix;
    }

    let bgInterval = null;
    let bgTasks = [];
    let cooldownTime = 0;
    let nextTask = 0;

    function addTask(id, iteration, afterFrame) {
        for (let t of bgTasks) {
            if (t.id === id) {
                t.f = iteration;
                t.a = afterFrame;
                return;
            }
        }

        bgTasks.push({id: id, f: iteration, a: afterFrame});
        if (bgTasks.length === 1) {
            bgInterval = setInterval(function() {
                let start = performance.now();
                if (start <= cooldownTime) {
                    return;
                }
                let overflow = false;
                do {
                    let task = bgTasks[nextTask];
                    if (task.f()) {
                        nextTask++;
                    } else {
                        bgTasks.splice(nextTask, 1);
                        if (bgTasks.length === 0) {
                            clearInterval(bgInterval);
                            nextTask = 0;
                            return;
                        }
                    }

                    if (nextTask >= bgTasks.length) {
                        nextTask = 0;
                        overflow = true;
                    }
                } while(performance.now() - start < 8);

                for (let q = 0; q < overflow ? bgTasks.length : nextTask; q++) {
                    bgTasks[q].a();
                }
            })
        }
    }

    function prepareFrames(from, to) {
        let mul = zoomToGroupSize[currentHeatmap.zoom];
        from *= mul;
        to = (to + 1) * mul - 1;
        if (to >= currentHeatmap.blocks.length) {
            to = currentHeatmap.blocks.length - 1;
        }

        const frames = new Queue();
        const root = new Map();
        root.c = 0;
        root.m = -1;
        root.x = 0;
        const roots = [root];
        let levelsCount = 1;

        for (let pos = from; pos <= to; pos++) {
            const block = currentHeatmap.blocks[pos];

            root.c += block.length;

            for (let stack of block) {
                levelsCount = Math.max(stack.length + 1, levelsCount);

                frames.push(root);
                frames.push(stack);
            }
        }

        return [frames, roots, levelsCount]
    }

    function nextFrames(frames, level) {
        frames.push(null);  // end stacks marker

        let nowFrame = null;

        while (true) {
            const frame = frames.shift();
            if (frame === null) {   // end stack marker
                break;
            }

            const stack = frames.shift();
            if (level >= stack.length) {
                continue;
            }

            const methodId = stack[level];
            nowFrame = frame.get(methodId);
            if (nowFrame === undefined) {
                nowFrame = new Map();
                nowFrame.m = methodId;
                nowFrame.c = 0;
                frame.set(methodId, nowFrame);
            }
            nowFrame.c++;

            frames.push(nowFrame);
            frames.push(stack);
        }
    }

    function renderTraces(from, to) {
        let [frames, roots, levelsCount] = prepareFrames(from, to);
        levels.length = 0;
        for (let i = 0; i < levelsCount; i++) {
            levels.push([]);
        }

        let currentLevel = 0;
        let levelToRedraw = 0;
        let methodInfoOut = {};

        addTask('flame', function () {
                nextFrames(frames, currentLevel);

                let level = levels[currentLevel];
                let nextRoots = [];
                for (let root of roots) {
                    let x = root.x;
                    const t = title(root.m, methodInfoOut);
                    let color = getColor(palette[methodInfoOut.type]);
                    level.push({left: x, width: root.c, color: color, title: t});

                    let nextFrames = [...root.values()];

                    nextFrames.sort((k1, k2) => k2.c - k1.c);
                    for (let frame of nextFrames) {
                        frame.x = x;
                        x += frame.c;
                        nextRoots.push(frame);
                    }
                }
                level.sort((k1, k2) => k1.left - k2.left);

                roots = nextRoots;
                currentLevel++;
                if (currentLevel < levelsCount) {
                    return true;
                }
                renderWithMatch(levelsCount * 16, levels[0][0], 0);
                return false;
            },
            function () {
                renderWithMatch(4096, levels[0][0], 0, levelToRedraw);
                levelToRedraw = currentLevel;
            });
    }

    function renderWithMatch(newCanvasHeight, root, level, minLevel) {
        newCanvasHeight = Math.min(32767, newCanvasHeight);
        if (canvasHeight !== newCanvasHeight) {
            canvasHeight = newCanvasHeight;
            canvas.style.height = canvasHeight + 'px';
            canvas.height = canvasHeight * (devicePixelRatio || 1);
            c = canvas.getContext('2d');
            if (devicePixelRatio) c.scale(devicePixelRatio, devicePixelRatio);
            c.font = document.body.style.font;
        }
        const matched = render(root, level, minLevel);
        if (pattern === undefined) {
            document.getElementById('match').style.display = 'none';
            document.getElementById('produced').style.display = 'inherit';
        } else {
            document.getElementById('matchval').textContent = pct(matched, root.width) + '%';
            document.getElementById('match').style.display = 'inline-block';
            document.getElementById('produced').style.display = 'none';
        }
    }

    function renderDiff(from, to, baseFrom, baseTo) {
        let [frames, roots, levelsCount] = prepareFrames(from, to);
        let [baseFrames, baseRoots, ] = prepareFrames(baseFrom, baseTo);
        roots[0].b = baseRoots[0];

        levels.length = 0;
        for (let i = 0; i < levelsCount; i++) {
            levels.push([]);
        }
        let currentLevel = 0;
        let levelToRedraw = 0;
        let methodInfoOut = {};

        let minDiff = 0;
        let maxDiff = 0;

        addTask('flame', function () {
                nextFrames(frames, currentLevel);
                nextFrames(baseFrames, currentLevel);
                let level = levels[currentLevel];

                for (let root of roots) {
                    let wasCount = root.b === undefined ? 0 : root.b.c;
                    if (wasCount !== 0) {
                        maxDiff = Math.max(maxDiff, root.c - wasCount);
                        minDiff = Math.min(minDiff, root.c - wasCount)
                    }
                }

                let nextRoots = [];
                for (let root of roots) {
                    let x = root.x;

                    let wasCount = root.b === undefined ? 0 : root.b.c;
                    const t = title(root.m, methodInfoOut) + " (" + root.c + "/" + wasCount +")";
                    let color;
                    if (wasCount === 0) {
                        color = "#dac571";
                    } else if (wasCount >= root.c) {
                        const ratio = (root.c - wasCount) / minDiff;
                        color = 'rgb(' + (245 - 90 * ratio) + ',' + (250 - 90 * ratio) + ',' + 255 +')';
                    } else {
                        const ratio = (root.c - wasCount) / maxDiff;
                        color = 'rgb(' + 255 + ',' + (245 - 180 * ratio) + ',' + (240 - 200 * ratio) +')';
                    }
                    level.push({left: x, width: root.c, color: color, title: t});

                    let nextFrames = [];
                    for (let [methodId, frame] of root) {
                        frame.b = root.b && root.b.get(methodId);
                        nextFrames.push(frame);
                    }
                    nextFrames.sort((k1, k2) => k2.c - k1.c);
                    for (let frame of nextFrames) {
                        frame.x = x;
                        x += frame.c;
                        nextRoots.push(frame);
                    }
                }
                level.sort((k1, k2) => k1.left - k2.left);

                roots = nextRoots;
                currentLevel++;
                if (currentLevel < levelsCount) {
                    return true;
                }
                renderWithMatch(levelsCount * 16, levels[0][0], 0);
                return false;
            },
            function () {
                renderWithMatch(4096, levels[0][0], 0, levelToRedraw);
                levelToRedraw = currentLevel;
            });
    }

    function redrawHeatSamplesImpl(from, to, dx) {
        const patternDraw = !!pattern;
        const startBlock = currentHeatmap.startBlock();

        const max = currentHeatmap.max();
        const heatmap = currentHeatmap.heatmap();

        for (let index = from; index <= to; index++) {
            let color;
            let i = index - startBlock;
            if (i < 0 || i >= heatmap.length) {
                color = '#ddd';
            } else {
                let count = heatmap[i];

                let useFound = patternDraw && searchExecutedCount > i;
                let maxValue = useFound ? searchMax : max;
                let value = useFound ? found[i] : count;
                let ratio = value / (maxValue || 1);

                if (useFound) {
                    if (ratio < 0.8) {
                        let value = Math.round(255 - ratio * 255 / 0.8);
                        color = 'rgb(' + value + ',' + value + ',255)';
                    } else {
                        let value = Math.round(255 - (ratio - 0.8) * 100 / 0.2);
                        color = 'rgb(0,0,' + value + ')';
                    }
                } else {
                    if (ratio < 0.8) {
                        let value = Math.round(255 - ratio * 255 / 0.8);
                        color = 'rgb(255,' + value + ',' + value + ')';
                    } else {
                        let value = Math.round(255 - (ratio - 0.8) * 100 / 0.2);
                        color = 'rgb('+ value + ',0,0)';
                    }
                }

            }
            heatC.fillStyle = color;

            let x = Math.floor(index / heatHeight);
            let y = index % heatHeight;
            heatC.fillRect(x * sq - dx, y * sq + canvasTimeHeight, sq, sq);
        }

        let blocksBetweenMarks = 20;

        let fromBlock = Math.floor(from / blocksBetweenMarks / heatHeight) - 1;
        let toBlock = Math.ceil(to / blocksBetweenMarks / heatHeight);

        let markPixels = blocksBetweenMarks * sq;

        heatC.fillStyle = '#fff';
        heatC.fillRect(
            fromBlock * markPixels - dx,
            0,
            (toBlock - fromBlock + 1) * markPixels,
            canvasTimeHeight
        );

        heatC.beginPath();
        heatC.moveTo(fromBlock * markPixels - dx + 0.5, canvasTimeHeight + 0.5);
        heatC.lineTo(toBlock * markPixels - dx + 0.5, canvasTimeHeight + 0.5);
        heatC.stroke();

        heatC.fillStyle = '#000';

        let groupSize = heatHeight;
        let oneBlockMs = currentHeatmap.currentTimeBlock();
        let oneGroupMs = oneBlockMs * groupSize;
        let oneMarkMs = oneGroupMs * blocksBetweenMarks;
        for (let markIndex = fromBlock; markIndex <= toBlock; markIndex++) {
            let origin = Math.floor(startMs / oneMarkMs) * oneMarkMs;
            let ms = origin + markIndex * oneMarkMs;
            let markOffset = markIndex * markPixels - dx;

            let title = new Date(ms).toLocaleTimeString(undefined, timeOptionsTiny);

            let w = heatC.measureText(title).width;
            let x = markOffset + (markPixels - w) / 2;
            heatC.fillText(title, x, canvasTimeHeight - 1, markPixels);

            heatC.beginPath();
            heatC.moveTo(markOffset + 0.5, canvasTimeHeight - 2 * sqScale + 0.5);
            heatC.lineTo(markOffset + 0.5, canvasTimeHeight + 2 * sqScale + 0.5);
            heatC.stroke();
        }
    }

    function redrawHeatSamples(from, to) {
        let dx = Math.floor((heatCanvasContainer.scrollLeft - canvasScrollPadding) * sqScale);

        from = Math.max(from, heatHeight * Math.floor(dx / sq));
        to = Math.min(to, heatHeight * Math.ceil((dx + heatCanvas.width) / sq));
        redrawHeatSamplesImpl(from, to, dx);
    }

    function redrawHeatMap() {
        redrawHeatSamples(0, (1 + currentHeatmap.count() / heatHeight | 0) * heatHeight);
    }

    function fillCanvasWithEvents(zoom) {
        searchExecutedCount = 0;
        searchMax = 0;

        addTask('search', function () {
            return false;
        }, function (){});

        currentHeatmap.setZoom(zoom);
        heatHeight = zoomToHeight[zoom];

        const m = devicePixelRatio || 1;
        sqScale = m;
        sqPx = 5;
        sq = Math.floor(sqPx * m);
        sqPx = sq / m;
        canvasTimeHeight = sq * 2 + 2;
        canvasTimeHeightPx = canvasTimeHeight / m;

        const widthPx = canvasScrollPadding + heatCanvasContainer.offsetWidth + canvasScrollPadding;
        const heightPx = sqPx * heatHeight + canvasTimeHeightPx;

        const heatWidthPx = Math.max(20, Math.ceil(currentHeatmap.count() / heatHeight)) * sqPx;
        heatCanvasWrapper.style.width = heatWidthPx + 'px';
        if (heatCanvasContainer.offsetWidth > heatWidthPx) {
            heatCanvasContainer.style.overflowX = 'hidden';
        } else {
            heatCanvasContainer.style.overflowX = 'scroll';
        }

        heatCanvas.width = Math.ceil(widthPx * m);
        heatCanvas.height = Math.ceil(heightPx * m);
        heatCanvas.style.width = widthPx + 'px';
        heatCanvas.style.height = heightPx + 'px';

        heatC = heatCanvas.getContext('2d');
        heatC.font = sq * 2 + 'px Verdana, sans-serif';
        heatC.lineWidth = 1;
        heatC.strokeStyle = '#000';

        document.getElementById('heatmap-height-line').textContent = [' 1 sec : 20 ms ',' 1 min : 1 sec ',' 5 min : 5 sec ',' 1 hr  : 1 min '][currentHeatmap.zoom];
        redrawHeatMap();
    }

    let found = new Uint32Array(0);

    function searchIterative(r) {
        if (r && (r = prompt('Enter regexp to search:', '')) === null) {
            return;
        }
        searchExecutedCount = 0;
        searchMax = 0;
        if (!r) {
            pattern = undefined;
            redrawHeatMap();
            addTask('search', function () {
                return false;
            }, function (){});
            return;
        }
        let renderFrom = 0;
        let heatmap = currentHeatmap.heatmap();
        let count = heatmap.length;
        found = new Uint32Array(count);
        let start = currentHeatmap.startBlock();
        function renderFunc() {
            redrawHeatSamples(start + renderFrom, start + searchExecutedCount - 1);
            renderFrom = searchExecutedCount;
        }
        pattern = r ? RegExp(r) : undefined;
        const matchedMethods = new Set();
        const methodOut = {};
        for (let index = methods.data.length / 12; index >= 0; index--) {
            if (pattern.test(title(index, methodOut))) {
                matchedMethods.add(index);
            }
        }

        let mul = zoomToGroupSize[currentHeatmap.zoom];

        addTask('search', function () {
            let amount = 0;
            const from = searchExecutedCount * mul;
            const to = (searchExecutedCount + 1) * mul;
            for (let i = from; i < to; i++) {
                const stacks = currentHeatmap.blocks[i];
                if (stacks === undefined) {
                    continue;
                }

                for (let stack of stacks) {
                    for (let methodIndex of stack) {
                        if (matchedMethods.has(methodIndex)) {
                            amount++;
                            break;
                        }
                    }
                }
            }

            if (searchMax < amount) {
                renderFrom = 0;
                searchMax = amount;
            }

            found[searchExecutedCount] = amount;
            searchExecutedCount++;
            if (searchExecutedCount >= count) {
                renderFunc();

                const matched = render(root, rootLevel);
                document.getElementById('matchval').textContent = pct(matched, root.width) + '%';
                document.getElementById('match').style.display = r ? 'inherit' : 'none';
                document.getElementById('produced').style.display = r ? 'none' : 'inherit';

                return false;
            }
            return true;
        }, renderFunc);

    }

    function renderHeatmap() {
        let dx = heatCanvasContainer.scrollLeft - canvasScrollPadding;
        heatCanvas.style.transform = 'translate(' + dx + 'px, 0px)';

        const width = Math.floor(heatCanvasContainer.offsetWidth / sq / (devicePixelRatio || 1));

        let z = 0;
        for (; z < zoomToGroupSize.length; z++) {
            if (currentHeatmap.blocks.length / (zoomToGroupSize[z] * zoomToHeight[z]) < width) {
                break;
            }
        }

        fillCanvasWithEvents(Math.min(z, currentHeatmap.maxZoom - 1));

        renderTraces(0, currentHeatmap.heatmap().length - 1);
    }

    heatCanvasContainer.addEventListener('scroll', function() {
        let dx = Math.floor((heatCanvasContainer.scrollLeft - canvasScrollPadding) * sqScale);
        let dxPx = dx / sqScale;
        heatCanvas.style.transform = 'translate(' + dxPx + 'px, 0px)';
        let delta = Math.abs(dx - prevDx);
        if (delta >= heatCanvas.width || searchExecutedCount !== 0) {
            redrawHeatMap();
        } else {
            heatC.drawImage(heatCanvas, prevDx - dx, 0);
            if (prevDx < dx) {
                let from = heatHeight * Math.floor((prevDx + heatCanvas.width) / sq);
                let to = heatHeight * Math.ceil((dx + heatCanvas.width) / sq);
                redrawHeatSamplesImpl(from, to, dx);
            } else {
                let from = heatHeight * Math.floor(dx / sq);
                let to = heatHeight * Math.ceil(prevDx / sq);
                redrawHeatSamplesImpl(from, to, dx);
            }
        }
        prevDx = dx;
        cooldownTime = performance.now() + 500;
    });

    document.getElementById('heatmap-height-line').onclick = function() {
        fillCanvasWithEvents((currentHeatmap.maxZoom + currentHeatmap.zoom - 1) % (currentHeatmap.maxZoom));
        highlightStart = highlightEnd = heatDiffStart = heatDiffEnd = heatActiveSample1 = heatActiveSample2 = -1;
        for (let suffix of ['Selection', 'Diff', 'Active']) {
            for (let prefix of ['left', 'leftMiddle', 'middle', 'rightMiddle', 'right']) {
                document.getElementById(prefix + suffix).style.display = 'none';
            }
        }
    }

    function callHighlightRedraw(start, end, suffix) {
        let left = document.getElementById('left' + suffix);
        let leftMiddle = document.getElementById('leftMiddle' + suffix);
        let middle = document.getElementById('middle' + suffix);
        let rightMiddle = document.getElementById('rightMiddle' + suffix);
        let right = document.getElementById('right' + suffix);

        let x1 = Math.floor(start / heatHeight);
        let y1 = start % heatHeight;
        let x2 = Math.floor(end / heatHeight);
        let y2 = end % heatHeight;

        let veryStartX = x1 * sqPx;
        let veryStartY = y1 * sqPx;
        let veryEndX = x2 * sqPx;
        let px = 1 / sqScale;
        let singleElementWidth = sqPx + px;

        let topPadding = canvasTimeHeightPx;

        if (x1 === x2) {
            left.style.display = 'none';
            right.style.display = 'none';

            for (let b of [middle, leftMiddle, rightMiddle]) {
                b.style.left = veryStartX + 'px';
                b.style.top = topPadding + veryStartY + 'px';
                b.style.width = singleElementWidth + 'px';
                b.style.height = (y2 - y1 + 1) * sqPx + px + 'px';
                b.style.display = 'block';
            }
        } else {
            left.style.left = veryStartX + 'px';
            left.style.top = topPadding + veryStartY + 'px';
            left.style.width = singleElementWidth + 'px';
            left.style.height = (heatHeight - y1) * sqPx + px + 'px';
            left.style.display = 'block';

            leftMiddle.style.left = veryStartX + 'px';
            leftMiddle.style.top = topPadding + 'px';
            leftMiddle.style.width = singleElementWidth + 'px';
            leftMiddle.style.height = y1 * sqPx + px + 'px';
            leftMiddle.style.display = 'block';

            rightMiddle.style.left = veryEndX + 'px';
            rightMiddle.style.top = topPadding + (y2 + 1) * sqPx + 'px';
            rightMiddle.style.width = sqPx + px + 'px';
            rightMiddle.style.height = (heatHeight - y2 - 1) * sqPx + px + 'px';
            rightMiddle.style.display = 'block';

            right.style.left = veryEndX + 'px';
            right.style.top = topPadding + 'px';
            right.style.width = sqPx + px + 'px';
            right.style.height = (y2 + 1) * sqPx + px + 'px';
            right.style.display = 'block';

            if (x2 - x1 === 1) {
                middle.style.display = 'none';
            } else {
                middle.style.left = veryStartX + sqPx + px + 'px';
                middle.style.top = topPadding + 'px';
                middle.style.width = (x2 - x1 - 1) * sqPx - px + 'px';
                middle.style.height = heatHeight * sqPx + px + 'px';
                middle.style.display = 'block';
            }
        }
    }

    function callSelectionRedraw(sample, shiftPressed, ctrlPressed) {
        if (ctrlPressed) {
            highlightStart = sample;
            highlightEnd = sample + Math.abs(heatActiveSample1 - heatActiveSample2);
        } else if (shiftPressed && heatActiveSample1 !== -1) {
            highlightStart = Math.min(heatActiveSample1, sample);
            highlightEnd = Math.max(heatActiveSample1, sample);
        } else {
            highlightStart = highlightEnd = sample;
        }

        callHighlightRedraw(highlightStart, highlightEnd, 'Selection');

        const index = sample - currentHeatmap.startBlock();
        const heatmap = currentHeatmap.heatmap();
        if (index >= 0 && index < heatmap.length) {
            const ms = startMs + currentHeatmap.currentTimeBlock() * index;
            const total =  heatmap[index];
            const max = currentHeatmap.max();
            heatCanvas.title = new Date(ms).toLocaleTimeString(undefined, timeOptionsShort) + " " + index;  // FIXME
            const totalText = "total: " + total + " (" + Math.floor(total / max * 100) + "%)";
            const searchText = searchExecutedCount > index
                ? "; match: " + found[index] + " (" + Math.floor(found[index] / Math.max(total, 1) * 100) + "%)"
                : "";
            status.textContent = totalText + searchText;
            status.style.display = 'inline';
        } else {
            status.style.display = 'none';
        }
    }

    function callActiveRedraw(sample, shiftPressed, ctrlPressed) {
        if (ctrlPressed) {
            let minSelected = Math.min(heatActiveSample1, heatActiveSample2);
            let maxSelected = Math.max(heatActiveSample1, heatActiveSample2);

            heatDiffStart = highlightStart;
            heatDiffEnd = highlightEnd;

            callHighlightRedraw(highlightStart, highlightEnd, 'Diff');
            renderDiff(
                minSelected - currentHeatmap.startBlock(),
                maxSelected - currentHeatmap.startBlock(),
                heatDiffStart - currentHeatmap.startBlock(),
                heatDiffEnd - currentHeatmap.startBlock()
            );
        } else {
            heatDiffStart = -1;
            heatDiffEnd = -1;
            if (shiftPressed && heatActiveSample1 !== -1) {
                heatActiveSample2 = sample;
            } else {
                heatActiveSample1 = heatActiveSample2 = sample;
            }

            let minSelected = Math.min(heatActiveSample1, heatActiveSample2);
            let maxSelected = Math.max(heatActiveSample1, heatActiveSample2);

            callHighlightRedraw(highlightStart, highlightEnd, 'Diff');
            callHighlightRedraw(minSelected, maxSelected, 'Active');
            renderTraces(
                Math.max(0, minSelected - currentHeatmap.startBlock()),
                Math.min(currentHeatmap.heatmap().length - 1, maxSelected - currentHeatmap.startBlock())
            );
        }
    }

    window.addEventListener('keydown', function (e) {
        if (e.key === 'Shift') {
            callSelectionRedraw(heatLastSample, true, e.ctrlKey);
        } else if (e.key === 'Control') {
            callSelectionRedraw(heatLastSample, e.shiftKey, true);
        }
    });

    window.addEventListener('keyup', function (e) {
        if (e.key === 'Shift') {
            callSelectionRedraw(heatLastSample, false, e.ctrlKey);
        } else if (e.key === 'Control') {
            callSelectionRedraw(heatLastSample, e.shiftKey, false);
        }
    });

    heatCanvas.onmousemove = function (event) {
        let x = Math.floor((event.offsetX + heatCanvasContainer.scrollLeft - canvasScrollPadding) / sqPx);
        let y = Math.floor(Math.max(0, event.offsetY - canvasTimeHeightPx) / sqPx);
        if (y >= heatHeight) {
            y = heatHeight - 1;
        }
        heatLastSample = x * heatHeight + y;
        if ((event.buttons & 1) === 1) {
            callSelectionRedraw(heatLastSample, true, event.ctrlKey);
        } else {
            callSelectionRedraw(heatLastSample, event.shiftKey, event.ctrlKey);
        }
    }

    heatCanvas.onmouseout = function () {
        status.style.display = 'none';
    };

    heatCanvas.onmousedown = function (event) {
        let x = Math.floor((event.offsetX + heatCanvasContainer.scrollLeft - canvasScrollPadding) / sqPx);
        let y = Math.floor(Math.max(0, event.offsetY - canvasTimeHeightPx) / sqPx);
        let sample = x * heatHeight + y;

        callActiveRedraw(sample, event.shiftKey, event.ctrlKey);
    };

    heatCanvas.onmouseup = function (event) {
        let x = Math.floor((event.offsetX + heatCanvasContainer.scrollLeft - canvasScrollPadding) / sqPx);
        let y = Math.floor(Math.max(0, event.offsetY - canvasTimeHeightPx) / sqPx);
        let sample = x * heatHeight + y;

        callActiveRedraw(sample, true, event.ctrlKey);
    };



init();
// FIXME search(/*highlight:*/);
</script></body></html>
